<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo</title>
    <url>/2021/05/28/Hexo/</url>
    <content><![CDATA[<h2 id="å¿«é€Ÿå¼€å§‹-Hexo"><a href="#å¿«é€Ÿå¼€å§‹-Hexo" class="headerlink" title="å¿«é€Ÿå¼€å§‹ Hexo"></a>å¿«é€Ÿå¼€å§‹ Hexo</h2><span id="more"></span>

<h3 id="åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« "><a href="#åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« " class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« "></a>åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« </h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="è¿è¡ŒæœåŠ¡å™¨"><a href="#è¿è¡ŒæœåŠ¡å™¨" class="headerlink" title="è¿è¡ŒæœåŠ¡å™¨"></a>è¿è¡ŒæœåŠ¡å™¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br><span class="line">$ <span class="comment"># hexo s</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="ç”Ÿæˆé™æ€æ–‡ä»¶"><a href="#ç”Ÿæˆé™æ€æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé™æ€æ–‡ä»¶"></a>ç”Ÿæˆé™æ€æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line">$ <span class="comment"># hexo g</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="å‘å¸ƒåˆ°è¿œç¨‹ç½‘ç«™"><a href="#å‘å¸ƒåˆ°è¿œç¨‹ç½‘ç«™" class="headerlink" title="å‘å¸ƒåˆ°è¿œç¨‹ç½‘ç«™"></a>å‘å¸ƒåˆ°è¿œç¨‹ç½‘ç«™</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br><span class="line">$ <span class="comment">#hexo d</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 126.å•è¯æ¥é¾™ ||</title>
    <url>/2021/06/21/LeetCode/leetcode-126/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>ç»™å®šä¸¤ä¸ªå•è¯ï¼ˆbeginWord å’Œ endWordï¼‰å’Œä¸€ä¸ªå­—å…¸ wordListï¼Œæ‰¾å‡ºæ‰€æœ‰ä» beginWord åˆ° endWord çš„æœ€çŸ­è½¬æ¢åºåˆ—ã€‚è½¬æ¢éœ€éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š</p>
<p>æ¯æ¬¡è½¬æ¢åªèƒ½æ”¹å˜ä¸€ä¸ªå­—æ¯ã€‚<br>è½¬æ¢åå¾—åˆ°çš„å•è¯å¿…é¡»æ˜¯å­—å…¸ä¸­çš„å•è¯ã€‚<br>è¯´æ˜:</p>
<ul>
<li>å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„è½¬æ¢åºåˆ—ï¼Œè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</li>
<li>æ‰€æœ‰å•è¯å…·æœ‰ç›¸åŒçš„é•¿åº¦ã€‚</li>
<li>æ‰€æœ‰å•è¯åªç”±å°å†™å­—æ¯ç»„æˆã€‚</li>
<li>å­—å…¸ä¸­ä¸å­˜åœ¨é‡å¤çš„å•è¯ã€‚</li>
<li>ä½ å¯ä»¥å‡è®¾ beginWord å’Œ endWord æ˜¯éç©ºçš„ï¼Œä¸”äºŒè€…ä¸ç›¸åŒã€‚<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">beginWord = &quot;hit&quot;,</span><br><span class="line">endWord = &quot;cog&quot;,</span><br><span class="line">wordList = [&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;lot&quot;,&quot;log&quot;,&quot;cog&quot;]</span><br><span class="line"></span><br><span class="line">è¾“å‡º:</span><br><span class="line">[</span><br><span class="line">  [&quot;hit&quot;,&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;cog&quot;],</span><br><span class="line">Â  [&quot;hit&quot;,&quot;hot&quot;,&quot;lot&quot;,&quot;log&quot;,&quot;cog&quot;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">beginWord = &quot;hit&quot;</span><br><span class="line">endWord = &quot;cog&quot;</span><br><span class="line">wordList = [&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;lot&quot;,&quot;log&quot;]</span><br><span class="line"></span><br><span class="line">è¾“å‡º: []</span><br><span class="line"></span><br><span class="line">è§£é‡Š:Â endWord &quot;cog&quot; ä¸åœ¨å­—å…¸ä¸­ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ç¬¦åˆè¦æ±‚çš„è½¬æ¢åºåˆ—ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æ ¹æ®é¢˜æ„å…ˆå°†å•è¯è¡¨æ„æˆä¸€ä¸ªæ— å‘å›¾ï¼Œç„¶åbfsæœç´¢è·¯å¾„ã€‚</p>
<p>è¿™é‡Œæ³¨æ„ï¼Œå› ä¸ºè¦æ±‚è¿”å›å…¨éƒ¨æœ€çŸ­è·¯å¾„ï¼Œæ‰€ä»¥bfsçš„é˜Ÿåˆ—ä¸­å•çº¯çš„å­˜èŠ‚ç‚¹è¡Œä¸é€šï¼ˆ<del>Maybeå¯ä»¥å§</del>ï¼‰ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å­˜è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯<strong>ä»èµ·ç‚¹åˆ°è¿™ä¸ªç‚¹çš„è·¯å¾„</strong>ï¼Œå…¶ä»–çš„å’Œæ™®é€šbfsæ²¡ä»€ä¹ˆä¸¤æ ·ã€‚</p>
<p>å¦å¤–å°±æ˜¯æ—¶é—´å¡çš„æœ‰ç‚¹ç´§ï¼Œåœ¨æ„å›¾çš„æ—¶å€™æ²¡æœ‰é‚£å¥<code>if(tmp &gt; 1) break;</code>å°±è¶…æ—¶äº†ï¼Ÿï¼Ÿæ‰¾ä¸ªæ—¶é—´ä¼˜åŒ–ä¸€ä¸‹ç®—æ³•ã€‚</p>
<hr>
<p>( è¿™ä¸ªé¢˜ç¡®å®æœ‰ç‚¹è®©äººå¤´å¤§ï¼Œè¿˜æ˜¯å¤ªèœäº†</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;vector&lt;string&gt;&gt; <span class="built_in">findLadders</span>(string beginWord, string endWord, vector&lt;string&gt;&amp; wordList) &#123;</span><br><span class="line">    <span class="keyword">int</span> n, len, beg, end;</span><br><span class="line">    unordered_map&lt;string, <span class="keyword">int</span>&gt; wti;</span><br><span class="line">    vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; G;  </span><br><span class="line">    vector&lt;string&gt; words;  <span class="comment">//æ‹·è´å•è¯è¡¨</span></span><br><span class="line"></span><br><span class="line">    n = wordList.<span class="built_in">size</span>(); <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    len = wordList[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">    words = wordList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        wti[words[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!wti.<span class="built_in">count</span>(endWord)) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(!wti.<span class="built_in">count</span>(beginWord)) &#123; words.<span class="built_in">push_back</span>(beginWord); wti[beginWord] = n++; &#125;</span><br><span class="line">    </span><br><span class="line">    beg = wti[beginWord];</span><br><span class="line">    end = wti[endWord];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„å›¾</span></span><br><span class="line">    G.<span class="built_in">resize</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; len; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(words[i][k] != words[j][k]) tmp++;</span><br><span class="line">                <span class="keyword">if</span>(tmp &gt; <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(tmp == <span class="number">1</span>) &#123;</span><br><span class="line">                G[i].<span class="built_in">push_back</span>(j);</span><br><span class="line">                G[j].<span class="built_in">push_back</span>(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;vector&lt;string&gt;&gt; ans;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æœè·¯</span></span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dis</span><span class="params">(n, <span class="number">0x3f3f3f</span>)</span></span>;</span><br><span class="line">    dis[beg] = <span class="number">0</span>;</span><br><span class="line">    queue&lt;vector&lt;string&gt;&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;beginWord&#125;);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        vector&lt;string&gt; path = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">int</span> u = wti[path.<span class="built_in">back</span>()];</span><br><span class="line">        <span class="keyword">if</span>(u == end) &#123;</span><br><span class="line">            ans.<span class="built_in">push_back</span>(path);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> v : G[u]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(dis[u] + <span class="number">1</span> &lt;= dis[v]) &#123;</span><br><span class="line">                    vector&lt;string&gt; tmp = path;</span><br><span class="line">                    tmp.<span class="built_in">push_back</span>(words[v]);</span><br><span class="line">                    q.<span class="built_in">push</span>(tmp);</span><br><span class="line">                    dis[v] = dis[u] + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æœç´¢</tag>
        <tag>æœ€çŸ­è·¯</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 128.æœ€é•¿è¿ç»­åºåˆ—</title>
    <url>/2021/06/22/LeetCode/leetcode-128/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾å‡ºæœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦ã€‚</p>
<p>è¦æ±‚ç®—æ³•çš„**æ—¶é—´å¤æ‚åº¦ä¸º O(n)**ã€‚</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: [100, 4, 200, 1, 3, 2]</span><br><span class="line">è¾“å‡º: 4</span><br><span class="line">è§£é‡Š: æœ€é•¿è¿ç»­åºåˆ—æ˜¯ [1, 2, 3, 4]ã€‚å®ƒçš„é•¿åº¦ä¸º 4ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ è‡ªç„¶æ˜¯<strong>ä¸èƒ½æ’åº</strong>äº†ï¼Œå¹¶æŸ¥é›†å¯ä»¥æŠŠ<strong>å±æ€§ç›¸ä¼¼çš„ä¸€ç±»æ•°èšåœ¨ä¸€èµ·çš„ä½œç”¨</strong>ï¼Œè€Œä¸”å‹ç¼©åçš„å¹¶æŸ¥é›†æ—¶é—´å¤æ‚åº¦ä¹Ÿå¾ˆå¯è§‚ã€‚</p>
<ul>
<li><p>å…ˆåˆå§‹åŒ–æ•°ç»„ä¸­æ¯ä¸€ä¸ªæ•°æŒ‡å‘æœ¬èº«ã€‚</p>
</li>
<li><p>å¾ªç¯æ•°ç»„</p>
<ul>
<li><p>å¦‚æœ $nums[i] + 1$ åœ¨å¹¶æŸ¥é›†ä¸­ï¼Œ $nums[i] + 1$ æŒ‡å‘ $nums[i]$ã€‚</p>
</li>
<li><p>å¦‚æœ $nums[i] - 1$ åœ¨å¹¶æŸ¥é›†ä¸­ï¼Œ $nums[i]$ æŒ‡å‘ $nums[i] - 1$ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>âš è¿™é¢˜ä¾ç„¶æœ‰ä¸ªç©ºæ•°ç»„é—®é¢˜ï¼Œåˆè¢«å‘äº†ã€‚ã€‚ã€‚</strong></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">unordered_map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; p;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == p[x] ? x : p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">longestConsecutive</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.<span class="built_in">size</span>(); <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> item : nums) &#123; p[item] = item; &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> item : nums) &#123;</span><br><span class="line">        <span class="keyword">if</span>(p.<span class="built_in">count</span>(item + <span class="number">1</span>)) p[item + <span class="number">1</span>] = item;</span><br><span class="line">        <span class="keyword">if</span>(p.<span class="built_in">count</span>(item - <span class="number">1</span>)) p[item] = item - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> item : nums) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="built_in">find</span>(item);</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, item - temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>å¹¶æŸ¥é›†</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 238.é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯</title>
    <url>/2021/06/22/LeetCode/leetcode-238/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸ºÂ nÂ çš„æ•´æ•°æ•°ç»„Â numsï¼Œå…¶ä¸­Â n &gt; 1ï¼Œè¿”å›è¾“å‡ºæ•°ç»„Â outputÂ ï¼Œå…¶ä¸­ output[i]Â ç­‰äºÂ numsÂ ä¸­é™¤Â nums[i]Â ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯ã€‚</p>
<p><strong>æç¤º</strong>ï¼šé¢˜ç›®æ•°æ®ä¿è¯æ•°ç»„ä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€ï¼ˆç”šè‡³æ˜¯æ•´ä¸ªæ•°ç»„ï¼‰çš„ä¹˜ç§¯éƒ½åœ¨ 32 ä½æ•´æ•°èŒƒå›´å†…ã€‚</p>
<p><strong>è¯´æ˜</strong>: è¯·ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œä¸”åœ¨Â O(n) æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚</p>
<p><strong>è¿›é˜¶</strong>ï¼šä½ å¯ä»¥åœ¨å¸¸æ•°ç©ºé—´å¤æ‚åº¦å†…å®Œæˆè¿™ä¸ªé¢˜ç›®å—ï¼Ÿï¼ˆ å‡ºäºå¯¹ç©ºé—´å¤æ‚åº¦åˆ†æçš„ç›®çš„ï¼Œè¾“å‡ºæ•°ç»„ä¸è¢«è§†ä¸ºé¢å¤–ç©ºé—´ã€‚)</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: [1,2,3,4]</span><br><span class="line">è¾“å‡º: [24,12,8,6]</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ul>
<li><p>å¸¸è§„åšæ³•<br>  ä¸€çœ‹åˆ°çš„ä¸€ä¸‹å­æƒ³åˆ°çš„å¯èƒ½å°±æ˜¯æŠŠæ‰€æœ‰æ•°ç´¯ä¹˜èµ·æ¥ï¼Œç„¶å<strong>å¾ªç¯</strong>ä¸€è¾¹ï¼Œå¾ªç¯åˆ°é‚£ä¸ªæ•°å°±<strong>é™¤æ‰</strong>å“ªä¸ªæ•°ã€‚ä½†æ˜¯æ³¨æ„å¦‚æœè¿™ä¸ªé¢˜æ˜¯ç´¯åŠ çš„è¯å¯ä»¥è¿™æ ·åšï¼Œä½†æ˜¯è¿™ä¸ªé¢˜æ˜¯ç´¯ä¹˜ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä½ç½®æ˜¯0ï¼Œè¿™æ—¶å€™å°±ä¼šå‡ºé”™ã€‚</p>
<p>  æ‰€ä»¥è€ƒè™‘å¦ä¸€ç§æ–¹æ³•ï¼Œå°†æ•°ç»„åšä¸€æ¬¡<strong>å‰ç¼€å’Œåç¼€ç´¯ä¹˜</strong>ï¼Œå¾ªç¯åˆ°æŸä¸ªæ•°çš„æ—¶å€™å°†è¯¥æ•°<strong>å‰ç¼€ä¹˜ä»¥åç¼€</strong>å³å¯</p>
</li>
<li><p>è¿›é˜¶åšæ³•<br>  åœ¨è¿›é˜¶é‡Œé¢è¦æ±‚åˆ°å¸¸æ•°ç©ºé—´å¤æ‚åº¦ï¼Œå¦‚æœæ˜¯æŒ‰ç…§å¸¸è§„åšæ³•ï¼Œéœ€è¦ç”¨åˆ°<strong>leftå’Œright</strong>ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«å­˜<strong>å‰ç¼€å’Œåç¼€</strong>ï¼Œå¦å¤–è¿˜å¾—å¼€ä¸€ä¸ªç­”æ¡ˆæ•°ç»„å»å­˜å‚¨è®¡ç®—ç­”æ¡ˆã€‚è¿™æ ·ç©ºé—´å¤æ‚åº¦æ˜æ˜¾æ˜¯ $O(n)$ ï¼Œå› ä¸ºé¢˜ç›®è¦æ±‚ä¸­è®²åˆ°</p>
<blockquote>
<p>å‡ºäºå¯¹ç©ºé—´å¤æ‚åº¦åˆ†æçš„ç›®çš„ï¼Œè¾“å‡ºæ•°ç»„ä¸è¢«è§†ä¸ºé¢å¤–ç©ºé—´ã€‚</p>
</blockquote>
<p>  ä¹Ÿå°±æ˜¯å¸¸æ•°ç©ºé—´å¤æ‚åº¦çš„è¯å°±éœ€è¦æŠŠç­”æ¡ˆæ•°ç»„æ‹¿è¿›æ¥<strong>é‡æ–°åˆ©ç”¨</strong>ï¼Œäºæ˜¯å¯ä»¥æƒ³åˆ°å¦‚ä¸‹åšæ³•</p>
<blockquote>
<p>å‡è®¾nums[] = {a, b, c, d}<br>  ä»¤ans[] = {1, a, ab, abc}<br>  ç„¶åå€’ç€è®¡ç®—ä¸€è¾¹ansæ•°ç»„ä½¿å¾—<br>  ans[] = {1 * bcd, a * cd, ab * d, abc}</p>
</blockquote>
<p>  è¿™ä¸åˆšå¥½å°±æ˜¯ç­”æ¡ˆå—ã€‚è¿™ä¸ªé¢˜çš„åšæ³•å°±å‡ºæ¥äº†</p>
</li>
</ul>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><ul>
<li><p>å¸¸è§„åšæ³•</p>
  <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">productExceptSelf</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">left</span><span class="params">(n)</span>, <span class="title">right</span><span class="params">(n)</span>, <span class="title">ans</span><span class="params">(n)</span></span>;</span><br><span class="line">    </span><br><span class="line">    left[<span class="number">0</span>] = nums[<span class="number">0</span>]; right[n - <span class="number">1</span>] = nums[n - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123; left[i] = nums[i] * left[i - <span class="number">1</span>]; &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123; right[i] = nums[i] * right[i + <span class="number">1</span>]; &#125;</span><br><span class="line">    </span><br><span class="line">    ans[<span class="number">0</span>] = right[<span class="number">1</span>]; ans[n - <span class="number">1</span>] = left[n - <span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        ans[i] = left[i - <span class="number">1</span>] * right[i + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>è¿›é˜¶åšæ³•</p>
  <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">productExceptSelf</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">ans</span><span class="params">(n, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123; </span><br><span class="line">        ans[i] = ans[i - <span class="number">1</span>] * nums[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> tmp = nums[n - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        ans[i] *= tmp;</span><br><span class="line">        tmp *= nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>å‰ç¼€å’Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 15.æ–°21ç‚¹</title>
    <url>/2021/06/20/LeetCode/leetcode-15/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„Â numsï¼Œåˆ¤æ–­Â numsÂ ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾—Â a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [-1, 0, 1, 2, -1, 4]</span><br><span class="line">è¾“å‡ºï¼šans = [[-1, 0, 1], [-1, -1, 2]]</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æ’åº+åŒæŒ‡é’ˆ+vectoræ•°ç»„å»é‡ï¼Œå»é‡æœ‰ä¸¤ç§æ–¹å¼ğŸ™‚</p>
<ul>
<li><p>vector + setå»é‡<br><code>set&lt;vector&lt;int&gt;&gt; s(ans.begin(), ans.end());</code><br><code>ans.assign(s.begin(), s.end());</code></p>
<p>  è¿‡æ˜¯å¯ä»¥è¿‡ï¼Œä½†æ˜¯â€¦.<br>  <a href="https://imgtu.com/i/RuxDV1"><img src="https://z3.ax1x.com/2021/06/23/RuxDV1.png" alt="RuxDV1.png"></a></p>
</li>
<li><p>ç¬¬äºŒç§å°±æ˜¯åœ¨ä»£ç é‡Œé¢å»é‡ï¼Œå¦‚æœç¢°åˆ°é‡å¤çš„å°±è·³è¿‡ï¼Œè¿™ä¸ªä¸ç®—å¤ªå·®..<br>  <a href="https://imgtu.com/i/Rux0bR"><img src="https://z3.ax1x.com/2021/06/23/Rux0bR.png" alt="Rux0bR.png"></a></p>
</li>
</ul>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">threeSum</span>(vector&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">if</span>(nums.<span class="built_in">size</span>() &lt; <span class="number">3</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">2</span> &amp;&amp; nums[i] &lt;= <span class="number">0</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> l = i + <span class="number">1</span>, r = n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = nums[i] + nums[l] + nums[r];</span><br><span class="line">            <span class="keyword">if</span>(tmp &gt; <span class="number">0</span>) r--;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(tmp &lt; <span class="number">0</span>) l++;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">while</span>(l &lt; r &amp;&amp; nums[l] == nums[l + <span class="number">1</span>]) l++;</span><br><span class="line">                <span class="keyword">while</span>(l &lt; r &amp;&amp; nums[r] == nums[r - <span class="number">1</span>]) r--;</span><br><span class="line">                ans.<span class="built_in">push_back</span>(&#123;nums[i], nums[l], nums[r]&#125;);</span><br><span class="line">                l++; r--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ’åº</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 29.é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</title>
    <url>/2021/06/21/LeetCode/leetcode-29/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—ã€‚</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix = [[1,2,3],[4,5,6],[7,8,9]]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,6,9,8,7,4,5]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix =Â [[1,2,3,4],[5,6,7,8],[9,10,11,12]]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,4,8,12,11,10,9,5,6,7]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0 &lt;= matrix.length &lt;= 100</span><br><span class="line">0 &lt;= matrix[i].lengthÂ &lt;= 100</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ç›´æ¥æŒ‰ç…§é¢˜æ„è½¬å°±å¥½äº†ï¼Œè¿™é“é¢˜è™½ç„¶æ ‡çš„Easyï¼Œä½†è¿˜æ˜¯è¢«<strong>ç©ºå‘é‡</strong>å’Œ<strong>æ•°æ®èŒƒå›´ä¸æ˜ç¡®</strong>ç»™å‘äº†ä¸€ä¸‹ã€‚ã€‚</p>
<p>æ²¡æœ‰æ•°æ®èŒƒå›´ï¼Œæˆ‘ç›´æ¥æŠŠè®¿é—®è¿‡çš„åœ°æ–¹æ ‡è®° $0x3f3f3f3f$ ä½†å…¶å®è¿™ç§åšæ³•æ˜¯ä¸å¯¹çš„ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨å¦ä¸€ä¸ª $vis$ æ•°ç»„ï¼Œ$vis[i][j]$ è¡¨ç¤º$i,j$ è¿™ä¸ªä½ç½®è¾“å‡ºè¿‡äº†ã€‚</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ok</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> &lt;= x &amp;&amp; x &lt; n &amp;&amp; <span class="number">0</span> &lt;= y &amp;&amp; y &lt; m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">spiralOrder</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = matrix.<span class="built_in">size</span>(); <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    <span class="keyword">int</span> m = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">ans</span><span class="params">(n * m)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>, tmp = <span class="number">0</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> d[<span class="number">4</span>][<span class="number">2</span>] = &#123; &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125; &#125;;</span><br><span class="line">    ans[cnt++] = matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    matrix[x][y] = inf;</span><br><span class="line">    <span class="keyword">while</span>(cnt &lt; n * m) &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">ok</span>(x + d[tmp][<span class="number">0</span>], y + d[tmp][<span class="number">1</span>], n, m) &amp;&amp; matrix[x + d[tmp][<span class="number">0</span>]][y + d[tmp][<span class="number">1</span>]] != inf) &#123;</span><br><span class="line">            ans[cnt++] = matrix[x + d[tmp][<span class="number">0</span>]][y + d[tmp][<span class="number">1</span>]];</span><br><span class="line">            matrix[x + d[tmp][<span class="number">0</span>]][y + d[tmp][<span class="number">1</span>]] = inf;</span><br><span class="line">            x += d[tmp][<span class="number">0</span>];</span><br><span class="line">            y += d[tmp][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        tmp = (tmp + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 42.è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ</title>
    <url>/2021/06/21/LeetCode/leetcode-42/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>è¾“å…¥ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰æ­£æ•°ä¹Ÿæœ‰è´Ÿæ•°ã€‚æ•°ç»„ä¸­çš„ä¸€ä¸ªæˆ–è¿ç»­å¤šä¸ªæ•´æ•°ç»„æˆä¸€ä¸ªå­æ•°ç»„ã€‚æ±‚æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚</p>
<p>è¦æ±‚<strong>æ—¶é—´å¤æ‚åº¦</strong>ä¸º $O(n)$ ã€‚</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: nums = [-2,1,-3,4,-1,2,1,-5,4]</span><br><span class="line">è¾“å‡º: 6</span><br><span class="line">è§£é‡Š:Â è¿ç»­å­æ•°ç»„Â [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸ºÂ 6ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 &lt;=Â arr.length &lt;= 10^5</span><br><span class="line">-100 &lt;= arr[i] &lt;= 100</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>çŠ¶æ€å®šä¹‰</strong>ï¼š$dp[i]$ = ä»¥$nums[i]$ä¸ºç»“å°¾çš„è¿ç»­å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼</p>
<p><strong>è½¬ç§»æ–¹ç¨‹</strong>ï¼šè‹¥ $dp[i-1] \leq 0$ ï¼Œè¯´æ˜ $dp[iâˆ’1]$ å¯¹ $dp[i]$ äº§ç”Ÿè´Ÿè´¡çŒ®ï¼Œå³ $dp[i-1] + nums[i]$ è¿˜ä¸å¦‚ $nums[i]$ æœ¬èº«å¤§ã€‚</p>
<ul>
<li><p>å½“ $dp[i-1] \leq 0$ï¼Œ$dp[i]=nums[i]$</p>
</li>
<li><p>å½“ $dp[i-1]&gt;0$ï¼Œ$dp[i] = dp[i-1]+nums[i]$</p>
</li>
</ul>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(nums.size())</span></span>;</span><br><span class="line">    dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> ans = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        dp[i] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>] + nums[i], nums[i]);</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, dp[i]); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 837.æ–°21ç‚¹</title>
    <url>/2021/06/22/LeetCode/leetcode-837/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>çˆ±ä¸½ä¸å‚ä¸ä¸€ä¸ªå¤§è‡´åŸºäºçº¸ç‰Œæ¸¸æˆ â€œ21ç‚¹â€ è§„åˆ™çš„æ¸¸æˆï¼Œæè¿°å¦‚ä¸‹ï¼š</p>
<p>çˆ±ä¸½ä¸ä»¥ 0 åˆ†å¼€å§‹ï¼Œå¹¶åœ¨å¥¹çš„å¾—åˆ†å°‘äº K åˆ†æ—¶æŠ½å–æ•°å­—ã€‚ æŠ½å–æ—¶ï¼Œå¥¹ä» [1, W] çš„èŒƒå›´ä¸­éšæœºè·å¾—ä¸€ä¸ªæ•´æ•°ä½œä¸ºåˆ†æ•°è¿›è¡Œç´¯è®¡ï¼Œå…¶ä¸­ W æ˜¯æ•´æ•°ã€‚ æ¯æ¬¡æŠ½å–éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå…¶ç»“æœå…·æœ‰ç›¸åŒçš„æ¦‚ç‡ã€‚</p>
<p>å½“çˆ±ä¸½ä¸è·å¾—ä¸å°‘äº K åˆ†æ—¶ï¼Œå¥¹å°±åœæ­¢æŠ½å–æ•°å­—ã€‚ çˆ±ä¸½ä¸çš„åˆ†æ•°ä¸è¶…è¿‡ N çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = 10, K = 1, W = 10</span><br><span class="line">è¾“å‡ºï¼š1.00000</span><br><span class="line">è¯´æ˜ï¼šçˆ±ä¸½ä¸å¾—åˆ°ä¸€å¼ å¡ï¼Œç„¶ååœæ­¢ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = 6, K = 1, W = 10</span><br><span class="line">è¾“å‡ºï¼š0.60000</span><br><span class="line">è¯´æ˜ï¼šçˆ±ä¸½ä¸å¾—åˆ°ä¸€å¼ å¡ï¼Œç„¶ååœæ­¢ã€‚</span><br><span class="line">åœ¨ W = 10 çš„ 6 ç§å¯èƒ½ä¸‹ï¼Œå¥¹çš„å¾—åˆ†ä¸è¶…è¿‡ N = 6 åˆ†ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = 21, K = 17, W = 10</span><br><span class="line">è¾“å‡ºï¼š0.73278</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 0 &lt;= K &lt;= N &lt;= 10000</span><br><span class="line">2. 1 &lt;= W &lt;= 10000</span><br><span class="line">3. å¦‚æœç­”æ¡ˆä¸æ­£ç¡®ç­”æ¡ˆçš„è¯¯å·®ä¸è¶…è¿‡ 10^-5ï¼Œåˆ™è¯¥ç­”æ¡ˆå°†è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆé€šè¿‡ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å®šä¹‰è¿™æ ·çš„<strong>dpæ•°ç»„</strong><br>$$dp[i] = ä»¤åˆå§‹åˆ†æ•°ä¸ºiï¼ŒæŠ½ç‰Œç»“æŸåä¸è¶…è¿‡Nçš„æ¦‚ç‡$$</p>
<p>åˆå§‹åŒ– $dp$ æ•°ç»„çš„æ—¶å€™ $dp[i]=1,i \in [K,N]$ $dp[i]=0,i \in (N,+ \infty )$ </p>
<p>å½“<strong>åˆå§‹åˆ†æ•°</strong>ä¸º $K-1$ æ—¶ï¼Œå¾ˆæ˜æ˜¾çŸ¥é“<strong>æ¦‚ç‡</strong>ä¸º $P= \frac{\sum_{i=K}^{K+W} dp[i]}{W}$ ï¼Œè¿™æ—¶é¡ºç€å…¬å¼ä»k-1æ¨å›0å³å¯ã€‚</p>
<p>ä½†æ˜¯è¿™é‡Œæ³¨æ„ä¸€ä¸‹æ•°æ®èŒƒå›´ï¼Œå¦‚æœæ˜¯è¿™æ ·å…ˆå¾ªç¯ä¸€ä¸ª $K$ ï¼Œå†å¾ªç¯ $W$ ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šå¾ˆé«˜æ‰€ä»¥åœ¨å¤„ç†çš„æ—¶å€™æ³¨æ„ä¸€ä¸‹é‚£ä¸€æ®µ $\sum_{i=K}^{K+W} dp[i]$ ï¼Œ<strong>è®¡ç®—çš„æ—¶å€™å¯ä»¥å‡å»åŒºé—´åé¢çš„ï¼Œå†åŠ ä¸ŠåŒºé—´å‰é¢çš„ã€‚</strong></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">new21Game</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span> K, <span class="keyword">int</span> W)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">double</span>&gt; <span class="title">dp</span><span class="params">(N + W + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = K; i &lt;= N; i++) dp[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">double</span> tmp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = K + <span class="number">1</span>; i &lt;= K + W; i++) tmp += dp[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = K - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        tmp += dp[i + <span class="number">1</span>];</span><br><span class="line">        tmp -= dp[i + <span class="number">1</span> + W];</span><br><span class="line">        dp[i] = tmp / W;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 64.æ±‚1+2+...+n</title>
    <url>/2021/06/21/LeetCode/leetcode-64/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><ul>
<li>æ±‚ 1+2+â€¦+n ï¼Œè¦æ±‚ä¸èƒ½ä½¿ç”¨ä¹˜é™¤æ³•ã€forã€whileã€ifã€elseã€switchã€caseç­‰å…³é”®å­—åŠæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼ˆA?B:Cï¼‰ã€‚<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: n = 3</span><br><span class="line">è¾“å‡º: 6</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: n = 9</span><br><span class="line">è¾“å‡º: 45</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å¯ä»¥å…ˆæ€è€ƒé€šè¿‡æ±‚å’Œå…¬å¼ <code>n * (n + 1) &gt;&gt; 1</code> ä½†è¿™ç§æ–¹å¼å¿…é¡»è¦ç”¨ä¹˜æ³•ï¼Œä¸ç„¶çš„è¯éœ€è¦<code>if</code>æ¥åšåˆ¤æ–­ï¼Œåœ¨å¶æ•°é‚£é‡Œ <code> &gt;&gt; 1</code> ï¼Œæ‰€ä»¥è¿™ä¸ªæ€è·¯ä¼šè¡Œä¸é€šã€‚</p>
<p>é€šè¿‡å¾ªç¯æ¥æ±‚å’Œ <code>while(n) sum += (n--);</code> ä½†æ˜¯ä¼šç”¨åˆ°<code>while</code>å¯è¿™å·²ç»å¾ˆç²¾ç®€äº†ï¼Œæ²¡æœ‰ç”¨åˆ°ä¹˜é™¤æ³•åªæ˜¯å¤šäº†ä¸€ä¸ªwhileï¼Œwhileåˆå¯ä»¥é€šè¿‡é€’å½’æ¶ˆæ‰ã€‚</p>
<ul>
<li>æ€è€ƒå¦‚ä½•å»æ‰whileå¾ªç¯ï¼Œè¿™é‡Œè¦æ˜ç¡®ä¸€ç‚¹ï¼Œåœ¨ <code>C/C++</code> ä¸­<code>&amp;&amp;</code>å’Œ<code>||</code>æ“ä½œå¹¶ä¸æ˜¯å¯¹ä¸¤ä¸ªæ“ä½œæ•°éƒ½å»åˆ¤æ–­ä¸€ä¸‹ï¼Œ<strong>è€Œæ˜¯å½“<code>&amp;&amp;</code>, <code>||</code>ç¬¬ä¸€ä¸ªæ“ä½œæ•°å°±å·²ç»æ»¡è¶³æ¡ä»¶çš„æƒ…å†µä¸‹ä¸ä¼šå†å»åˆ¤æ–­ç¬¬äºŒä¸ªæ“ä½œæ•°äº†</strong>ï¼Œåˆ©ç”¨è¿™ä¸€ç‚¹å¯ä»¥ä½œä¸ºé€’å½’çš„è¾¹ç•Œåˆ¤æ–­ã€‚<br>  å‡è®¾å½“å‰å¾ªç¯åˆ°äº† $x$<ul>
<li><code>!x || (sum += x)</code> è¡¨ç¤ºå½“ $x$ è¾¾åˆ°<strong>å‘ä¸‹</strong>å¾ªç¯è¾¹ç•Œ 0 æ—¶è¿”å› <code>false</code>ï¼Œè¿™æ—¶é€’å½’åœæ­¢</li>
<li><code>x &amp;&amp; ï¼ˆsum += x)</code> è¡¨ç¤ºå½“ $x$ è¾¾åˆ°<strong>å‘ä¸‹</strong>å¾ªç¯è¾¹ç•Œ 0 æ—¶è¿”å› <code>false</code>ï¼Œé€’å½’åœæ­¢</li>
<li><code>x ^ n</code> è¡¨ç¤ºå½“ $x$ è¾¾åˆ°<strong>å‘ä¸Š</strong>å¾ªç¯è¾¹ç•Œ n æ—¶é€’å½’åœæ­¢ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•éœ€è¦å¦ä¸€ä¸ªå‡½æ•°çš„é…åˆ</li>
</ul>
</li>
</ul>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><ul>
<li>3ç§</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sumNums</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    !n || (n += <span class="built_in">sumNums</span>(n - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sumNums</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    n &amp;&amp; (n += <span class="built_in">sumNums</span>(n - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">subSum</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    (x ^ n) &amp;&amp; (x += <span class="built_in">subSum</span>(x + <span class="number">1</span>, n));</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sumNums</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">subSum</span>(<span class="number">1</span>, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/06/02/Og8FAjvZ6pR2SKQ.png" alt="leetcode6-2_2.png"></p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>ä½è¿ç®—</tag>
      </tags>
  </entry>
  <entry>
    <title>mongoose APIå‚è€ƒ</title>
    <url>/2021/08/01/mongoose-API%E5%8F%82%E8%80%83/</url>
    <content><![CDATA[<h3 id="é€šç”¨API"><a href="#é€šç”¨API" class="headerlink" title="é€šç”¨API"></a>é€šç”¨API</h3><span id="more"></span>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">http_message</span> &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">message</span>;</span> <span class="comment">/* Whole message: request line + headers + body */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">body</span>;</span>    <span class="comment">/* Message body. 0-length for requests with no body */</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/* HTTP Request line (or HTTP response line) */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">method</span>;</span> <span class="comment">/* &quot;GET&quot; */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">uri</span>;</span>    <span class="comment">/* &quot;/my_file.html&quot; */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">proto</span>;</span>  <span class="comment">/* &quot;HTTP/1.1&quot; -- for both request and response */</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/* For responses, code and response status message are set */</span></span><br><span class="line">  <span class="keyword">int</span> resp_code;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">resp_status_msg</span>;</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * Query-string part of the URI. For example, for HTTP request</span></span><br><span class="line"><span class="comment">   *    GET /foo/bar?param1=val1&amp;param2=val2</span></span><br><span class="line"><span class="comment">   *    |    uri    |     query_string     |</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * Note that question mark character doesn&#x27;t belong neither to the uri,</span></span><br><span class="line"><span class="comment">   * nor to the query_string</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">query_string</span>;</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/* Headers */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">header_names</span>[<span class="title">MG_MAX_HTTP_HEADERS</span>];</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">header_values</span>[<span class="title">MG_MAX_HTTP_HEADERS</span>];</span></span><br><span class="line">&#125;;<span class="comment">///HTTPæ¶ˆæ¯</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">websocket_message</span> &#123;</span></span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> *data;</span><br><span class="line">  <span class="keyword">size_t</span> size;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> flags;</span><br><span class="line">&#125;;<span class="comment">///websocketæ¶ˆæ¯</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mg_http_multipart_part</span> &#123;</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *file_name;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *var_name;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">data</span>;</span></span><br><span class="line">  <span class="keyword">int</span> status; <span class="comment">/* &lt;0 on error */</span></span><br><span class="line">  <span class="keyword">void</span> *user_data;</span><br><span class="line">&#125;;<span class="comment">///HTTPåˆ†åŒ…éƒ¨åˆ†</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mg_ssi_call_ctx</span> &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">http_message</span> *<span class="title">req</span>;</span> <span class="comment">/* The request being processed. */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">file</span>;</span>       <span class="comment">/* Filesystem path of the file being processed. */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">arg</span>;</span> <span class="comment">/* The argument passed to the tag: &lt;!-- call arg --&gt;. */</span></span><br><span class="line">&#125;;<span class="comment">///SSIè°ƒç”¨ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_set_protocol_http_websocket</span><span class="params">(struct mg_connection *nc)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_handshake</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *uri,</span></span></span><br><span class="line"><span class="params"><span class="function">                                 <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_handshake2</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *path,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *host, <span class="keyword">const</span> <span class="keyword">char</span> *protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_handshake3</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *path,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *host, <span class="keyword">const</span> <span class="keyword">char</span> *protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers, <span class="keyword">const</span> <span class="keyword">char</span> *user,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *pass)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_handshake3v</span><span class="params">(struct mg_connection *nc,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str path,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str host,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str extra_headers,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str user,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str pass)</span></span>;</span><br><span class="line"><span class="function">struct mg_connection *<span class="title">mg_connect_ws</span><span class="params">(struct mg_mgr *mgr,</span></span></span><br><span class="line"><span class="params"><span class="function">                                    MG_CB(<span class="keyword">mg_event_handler_t</span> event_handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                          <span class="keyword">void</span> *user_data),</span></span></span><br><span class="line"><span class="params"><span class="function">                                    <span class="keyword">const</span> <span class="keyword">char</span> *url, <span class="keyword">const</span> <span class="keyword">char</span> *protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">                                    <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="function">struct mg_connection *<span class="title">mg_connect_ws_opt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_mgr *mgr, MG_CB(<span class="keyword">mg_event_handler_t</span> ev_handler, <span class="keyword">void</span> *user_data),</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_connect_opts opts, <span class="keyword">const</span> <span class="keyword">char</span> *url, <span class="keyword">const</span> <span class="keyword">char</span> *protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_frame</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> op_and_flags,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="keyword">const</span> <span class="keyword">void</span> *data, <span class="keyword">size_t</span> data_len)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_framev</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> op_and_flags,</span></span></span><br><span class="line"><span class="params"><span class="function">                              <span class="keyword">const</span> struct mg_str *strings, <span class="keyword">int</span> num_strings)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_printf_websocket_frame</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> op_and_flags,</span></span></span><br><span class="line"><span class="params"><span class="function">                               <span class="keyword">const</span> <span class="keyword">char</span> *fmt, ...)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_url_decode</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *src, <span class="keyword">int</span> src_len, <span class="keyword">char</span> *dst, <span class="keyword">int</span> dst_len,</span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="keyword">int</span> is_form_url_encoded)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">mg_hash_md5_v</span><span class="params">(<span class="keyword">size_t</span> num_msgs, <span class="keyword">const</span> <span class="keyword">uint8_t</span> *msgs[],</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">const</span> <span class="keyword">size_t</span> *msg_lens, <span class="keyword">uint8_t</span> *digest)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">mg_hash_sha1_v</span><span class="params">(<span class="keyword">size_t</span> num_msgs, <span class="keyword">const</span> <span class="keyword">uint8_t</span> *msgs[],</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> <span class="keyword">size_t</span> *msg_lens, <span class="keyword">uint8_t</span> *digest)</span></span>;</span><br></pre></td></tr></table></figure>



<h3 id="HTTP-Serverç«¯API"><a href="#HTTP-Serverç«¯API" class="headerlink" title="HTTP Serverç«¯API"></a>HTTP Serverç«¯API</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_parse_http</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s, <span class="keyword">int</span> n, struct http_message *hm, <span class="keyword">int</span> is_req)</span></span>;</span><br><span class="line"><span class="comment">/**è§£æhttpæ¶ˆæ¯ï¼Œå¦‚æœis_req=1 æ­¤æ¶ˆæ¯æ˜¯httpè¯·æ±‚ï¼Œis_req=0 æ­¤æ¶ˆæ¯æ˜¯httpå›åº”</span></span><br><span class="line"><span class="comment"> *è¿”å›è§£æçš„å­—èŠ‚æ•° å¦‚æœhttpæ¶ˆæ¯ä¸å®Œæ•´åˆ™è¿”å›0 å¦‚æœè§£æå‡ºé”™ï¼Œåˆ™è¿”å›è´Ÿæ•°*/</span></span><br><span class="line"><span class="function">struct mg_str *<span class="title">mg_get_http_header</span><span class="params">(struct http_message *hm, <span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</span><br><span class="line"><span class="comment">/**æœç´¢å¹¶è¿”å›è§£æåçš„httpæ¶ˆæ¯hmä¸­çš„è¡¨å¤´åç§°ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°æ ‡å¤´ï¼Œåˆ™è¿”å›NULL</span></span><br><span class="line"><span class="comment"> *å®ä¾‹ï¼šstruct mg_str *host_hdr = mg_get_http_header(hm, &quot;Host&quot;);*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_http_parse_header</span><span class="params">(struct mg_str *hdr, <span class="keyword">const</span> <span class="keyword">char</span> *var_name, <span class="keyword">char</span> *buf,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="keyword">size_t</span> buf_size)</span></span>;</span><br><span class="line"><span class="comment">/**è§£æhttpå¤´hdr,æŸ¥æ‰¾å˜é‡var_nameå¹¶å°†å…¶å€¼å­˜å‚¨åˆ°bufä¸­ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å˜é‡ï¼Œè¿”å›0å¦åˆ™è¿”å›é0ã€‚æ­¤å‡½æ•°ç”¨äºè§£æcookieséªŒè¯å¤´ç­‰ã€‚å¦‚æœæˆåŠŸåˆ™è¿”å›å˜é‡å€¼çš„é•¿åº¦ï¼Œå¦‚æœbufç¼“å†²åŒºä¸å¤Ÿå¤§ï¼Œæˆ–è€…æ²¡æœ‰æ‰¾åˆ°æ­¤å˜é‡åˆ™è¿”å›0</span></span><br><span class="line"><span class="comment">char user[20];</span></span><br><span class="line"><span class="comment">struct mg_str *hdr = mg_get_http_header(hm, &quot;Authorization&quot;);</span></span><br><span class="line"><span class="comment">mg_http_parse_header(hdr, &quot;username&quot;, user, sizeof(user));</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_get_http_basic_auth</span><span class="params">(struct http_message *hm, <span class="keyword">char</span> *user, <span class="keyword">size_t</span> user_len,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">char</span> *pass, <span class="keyword">size_t</span> pass_len)</span></span>;</span><br><span class="line"><span class="comment">/*è·å–å¹¶è§£ææˆæƒï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°æˆæƒå¤´æˆ–è€…mg_parse_http_basic_authè§£æç»“æœå¤´å¤±è´¥*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_parse_http_basic_auth</span><span class="params">(struct mg_str *hdr, <span class="keyword">char</span> *user, <span class="keyword">size_t</span> user_len,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="keyword">char</span> *pass, <span class="keyword">size_t</span> pass_len)</span></span>;</span><br><span class="line"><span class="comment">/*è§£ææˆæƒ,å¦‚æˆæƒç±»å‹ä¸æ˜¯Basicæˆ–è€…å‡ºç°å…¶ä»–é”™è¯¯(å¦‚ç”¨äºbase64ç¼–ç çš„ç”¨æˆ·å¯†ç ä¸å¯¹)åŸºæœ¬å¤´è¿”å›-1*/</span></span><br><span class="line"><span class="function"><span class="keyword">size_t</span> <span class="title">mg_parse_multipart</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *buf, <span class="keyword">size_t</span> buf_len, <span class="keyword">char</span> *var_name,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">size_t</span> var_name_len, <span class="keyword">char</span> *file_name,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">size_t</span> file_name_len, <span class="keyword">const</span> <span class="keyword">char</span> **chunk,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">size_t</span> *chunk_len)</span></span>;</span><br><span class="line"><span class="comment">/*è§£æåŒ…å«å¤šéƒ¨åˆ†è¡¨å•æ•°æ®åº“çš„ç¼“å†²åŒºbuf,buf_len,å°†å—åå­˜å‚¨åœ¨var_name,var_name_lenç¼“å†²åŒºä¸­ã€‚å¦‚æœå—æ˜¯ä¸Šä¼ æ–‡ä»¶ï¼Œé‚£ä¹ˆfile_name,file_name_lenå°†ä¼šè¢«ä¸€ä¸ªä¸Šä¼ çš„æ–‡ä»¶åå¡«å……ã€‚chunk,chunk_lenæŒ‡å‘å—æ•°æ®ã€‚è¿”å›è¦è·³åˆ°ä¸‹ä¸€ä¸ªå—çš„å­—èŠ‚æ•°ï¼Œå¦‚æœæ²¡æœ‰æ›´å¤šå—åˆ™è¿”å›0*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_get_http_var</span><span class="params">(<span class="keyword">const</span> struct mg_str *buf, <span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">char</span> *dst,</span></span></span><br><span class="line"><span class="params"><span class="function">                    <span class="keyword">size_t</span> dst_len)</span></span>;</span><br><span class="line"><span class="comment">/*è·å–Httpè¡¨å•å˜é‡ã€‚ä»bufè·å–å˜é‡åï¼Œåˆ°æŒ‡å®šdstæŒ‡å®šé•¿åº¦dst_lençš„ç¼“å†²åŒºã€‚ç›®çš„åœ°å€æ€»æ˜¯0ç»ˆæ­¢ï¼Œè¿”å›è·å–åˆ°çš„å˜é‡çš„é•¿åº¦ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å˜é‡ï¼Œåˆ™è¿”å›0.bufå¿…é¡»æ˜¯æœ‰æ•ˆçš„urlç¼–ç ç¼“å†²åŒºã€‚å¦‚æœdsté•¿åº¦å¤ªå°æˆ–è€…å‘ç”Ÿé”™è¯¯è¿”å›è´Ÿæ•°*/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ­¤ç»“æ„å®šä¹‰äº†mg_serve_http()çš„å·¥ä½œæ–¹å¼ï¼Œæœ€ä½³æ˜¯è®¾ç½®éœ€è¦çš„ï¼Œå…¶ä½™ä¸ºNULL</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mg_serve_http_opts</span> &#123;</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *document_root;<span class="comment">///webæ ¹ç›®å½•è·¯å¾„</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *index_files;<span class="comment">///ç´¢å¼•æ–‡ä»¶åˆ—è¡¨ï¼Œé»˜è®¤æ˜¯&quot;&quot;</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  per_directory_auth_file =NULLè¡¨ç¤ºç¦ç”¨èº«ä»½éªŒè¯</span></span><br><span class="line"><span class="comment">  per_directory_auth_file =&quot;.htpasswd&quot; è¦ä½¿ç”¨èº«ä»½è®¤è¯æ¥ä¿æŠ¤ç›®å½•ï¼Œç„¶ååœ¨ä»»ä½•ç›®å½•åˆ›å»ºä½¿ç”¨                                 digestè®¤è¯çš„.htpasswdæ–‡ä»¶ã€‚ä½¿ç”¨mongoose webæœåŠ¡å™¨äºŒè¿›åˆ¶æ–‡ä»¶æˆ–                             è€…Apacheçš„htpasswdå®ä¾‹åˆ›å»º/æ“ä½œå¯†ç æ–‡ä»¶</span></span><br><span class="line"><span class="comment">                             ç¡®ä¿auth_domainæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åŸŸ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *per_directory_auth_file;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *auth_domain;<span class="comment">//æˆæƒåŸŸã€‚å³webæœåŠ¡å™¨çš„åŸŸå</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">      global_auth_file = NULL ç¦ç”¨èº«ä»½è®¤è¯</span></span><br><span class="line"><span class="comment">      é€šå¸¸åªä¿æŠ¤document_rootæ ¹ç›®å½•é€‰å®šçš„ç›®å½•ã€‚å¦‚æœå¯¹webæœåŠ¡å™¨çš„æ‰€æœ‰è®¿é—®éƒ½å¿…é¡»ç»è¿‡èº«ä»½éªŒè¯ï¼Œ       ä¸ç®¡URIæ˜¯ä»€ä¹ˆï¼Œå°†æ­¤é€‰é¡¹è®¾ç½®ä¸ºå¯†ç æ–‡ä»¶çš„è·¯å¾„ã€‚æ­¤æ–‡ä»¶çš„æ ¼å¼ä¸.htpasswdçš„æ ¼å¼ä¸€æ ·ï¼Œå¹¶æŠŠæ­¤        æ–‡ä»¶æ”¾åœ¨document_rootæ ¹ç›®å½•ä¹‹å¤–ï¼Œä»¥é˜²ä»–äººè·å–åˆ°æ­¤æ–‡ä»¶</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *global_auth_file;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *enable_directory_listing;<span class="comment">//è®¾ç½®ä¸º&quot;no&quot;ç¦ç”¨ç›®å½•åˆ—è¡¨ï¼Œé»˜è®¤å¯ç”¨</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *ssi_pattern;<span class="comment">///ssiåŒ¹é…æ¨¡å¼  æºç æœ‰è¯¦ç»†ä»‹ç»</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *ip_acl;<span class="comment">///ip_acl=NULLè¡¨ç¤ºæ‰€æœ‰IPéƒ½å¯é“¾æ¥</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> MG_ENABLE_HTTP_URL_REWRITES</span></span><br><span class="line">      <span class="keyword">const</span> <span class="keyword">char</span> *url_rewrites;/æºç æœ‰è¯¦ç»†ä»‹ç»</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *dav_document_root;<span class="comment">///DAVçš„æ ¹ç›®å½•,dav_document_root=NULL åˆ™DAVè¯·æ±‚å¤±è´¥</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *dav_auth_file;<span class="comment">//DAVå¯†ç æ–‡ä»¶ï¼Œdav_auth_file=NULL åˆ™DAVè¯·æ±‚å¤±è´¥ dav_auth_file=&quot;-&quot; ç¦ç”¨DAVé‰´æƒ</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *hidden_file_pattern;<span class="comment">///æ–‡ä»¶éšè—çš„Globæ¨¡å¼</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *cgi_file_pattern;<span class="comment">///cgi_file_pattern != NULL åˆ™ä½¿èƒ½cgiï¼Œå³æ­¤ç›®å½•ä¸‹æ»¡è¶³ **.cgi$|**.php$&quot;éƒ½è§†ä¸ºcgiæ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *cgi_interpreter;<span class="comment">///å¦‚æœä¸æ˜¯NULLï¼Œè¯·å¿½ç•¥CGIè„šæœ¬hashbangå¹¶ä½¿ç”¨è¿™ä¸ªè§£é‡Šå™¨</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *custom_mime_types;</span><br><span class="line"><span class="comment">/*Comma-separated list of Content-Type overrides for path suffixes,&quot;.txt=text/plain; charset=utf-8,.c=text/plain&quot;e.g.*/</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers;<span class="comment">///æ·»åŠ åˆ°æ¯ä¸ªhttpç›¸åº”çš„é¢å¤–çš„header,è¦å¯ç”¨CORSï¼Œè¯·å°†æ­¤è®¾ç½®ä¸º&quot;Access-Control-Allow-Origin: *&quot;ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_serve_http</span><span class="params">(struct mg_connection *nc, struct http_message *hm,</span></span></span><br><span class="line"><span class="params"><span class="function">                   struct mg_serve_http_opts opts)</span></span>;</span><br><span class="line"><span class="comment">/*æ ¹æ®optsçš„å†…å®¹ï¼Œæä¾›ç‰¹å®šçš„httpè¯·æ±‚*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_http_serve_file</span><span class="params">(struct mg_connection *nc, struct http_message *hm,</span></span></span><br><span class="line"><span class="params"><span class="function">                        <span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">const</span> struct mg_str mime_type,</span></span></span><br><span class="line"><span class="params"><span class="function">                        <span class="keyword">const</span> struct mg_str extra_headers)</span></span>;</span><br><span class="line"><span class="comment">/*æä¾›å…·æœ‰ç»™å®šMIMEç±»å‹å’Œå¯é€‰extra_headerså¤´çš„ç‰¹å®šæ–‡ä»¶*/</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> struct <span class="title">mg_str</span> <span class="params">(*mg_fu_fname_fn)</span><span class="params">(struct mg_connection *nc,</span></span></span><br><span class="line"><span class="params"><span class="function">                                        struct mg_str fname)</span></span>;<span class="comment">///mg_file_upload_handler()çš„å›è°ƒå‡½æ•°åŸå‹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_file_upload_handler</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> ev, <span class="keyword">void</span> *ev_data,</span></span></span><br><span class="line"><span class="params"><span class="function">                            mg_fu_fname_fn local_name_fn</span></span></span><br><span class="line"><span class="params"><span class="function">                                MG_UD_ARG(<span class="keyword">void</span> *user_data))</span></span>;</span><br><span class="line"><span class="comment">/*æ–‡ä»¶ä¸Šä¼ å¤„ç†ç¨‹åºã€‚è¿™ä¸ªå¤„ç†ç¨‹åºå¯ä»¥ç”¨æœ€å°‘çš„ä»£ç å®ç°æ–‡ä»¶ä¸Šä¼ .æ­¤ç¨‹åºå¤„ç†MG_EV_HTTPPARTäº‹ä»¶å¹¶ä¿å­˜æ–‡ä»¶æ•°æ®åˆ°æœ¬åœ°ã€‚local_name_fnå°†ä»¥å®¢æˆ·ç«¯æä¾›çš„åå­—è°ƒç”¨å¹¶ä»¥æœŸæœ›çš„æœ¬åœ°æ–‡ä»¶åç§°æ‰“å¼€ã€‚å¦‚æœè¿”å›NULLå°†ç»ˆæ­¢æ–‡ä»¶ä¸Šä¼ (å®¢æˆ·ç«¯å¾—åˆ°403)ï¼Œå¦‚æœè¿”å›ä¸æ˜¯NULL,è¿”å›çš„å­—ç¬¦ä¸²å¿…é¡»æ˜¯å †åˆ†é…çš„ï¼Œä¸”è°ƒç”¨æ–¹éœ€è¦é‡Šæ”¾è¿™äº›å­—ç¬¦ä¸²ã€‚å¼‚å¸¸æƒ…å†µï¼šè¿”å›å®Œå…¨ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_register_http_endpoint</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *uri_path,</span></span></span><br><span class="line"><span class="params"><span class="function">                               MG_CB(<span class="keyword">mg_event_handler_t</span> handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                     <span class="keyword">void</span> *user_data))</span></span>;</span><br><span class="line"><span class="comment">/*ä¸ºncæ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå¦‚æœæ³¨å†Œäº†å›è°ƒå‡½æ•°ï¼Œå…¶ä¼šè¢«è°ƒç”¨æ¬§å† ï¼Œè€Œä¸æ˜¯è°ƒç”¨mg_bind()ä¸­æä¾›çš„å›è°ƒå‡½æ•°*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mg_http_endpoint_opts</span> &#123;</span></span><br><span class="line">  <span class="keyword">void</span> *user_data;</span><br><span class="line">  <span class="comment">/*æˆæƒåŸŸ (realm) */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *auth_domain;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *auth_file;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_register_http_endpoint_opt</span><span class="params">(struct mg_connection *nc,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> <span class="keyword">char</span> *uri_path,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">mg_event_handler_t</span> handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   struct mg_http_endpoint_opts opts)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_http_check_digest_auth</span><span class="params">(struct http_message *hm, <span class="keyword">const</span> <span class="keyword">char</span> *auth_domain,</span></span></span><br><span class="line"><span class="params"><span class="function">                              FILE *fp)</span></span>;</span><br><span class="line"><span class="comment">/*æ ¹æ®æ‰“å¼€çš„å¯†ç æ–‡ä»¶éªŒè¯HTTPè¯·æ±‚ã€‚å¦‚æœç»è¿‡èº«ä»½éªŒè¯ï¼Œè¿”å›1ï¼Œå¦åˆ™è¿”å›0*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_check_digest_auth</span><span class="params">(struct mg_str method, struct mg_str uri,</span></span></span><br><span class="line"><span class="params"><span class="function">                         struct mg_str username, struct mg_str cnonce,</span></span></span><br><span class="line"><span class="params"><span class="function">                         struct mg_str response, struct mg_str qop,</span></span></span><br><span class="line"><span class="params"><span class="function">                         struct mg_str nc, struct mg_str nonce,</span></span></span><br><span class="line"><span class="params"><span class="function">                         struct mg_str auth_domain, FILE *fp)</span></span>;</span><br><span class="line"><span class="comment">/*å¯¹æ‰“å¼€çš„å¯†ç æ–‡ä»¶éªŒè¯ç»™å®šçš„å“åº”å‚æ•°ã€‚å¦‚æœç»è¿‡èº«ä»½éªŒè¯ï¼Œè¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚</span></span><br><span class="line"><span class="comment">ç”± mg_http_check_digest_auth().è°ƒç”¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_http_chunk</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *buf, <span class="keyword">size_t</span> len)</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä½¿ç”¨ç»„å—HTTPç¼–ç å‘å®¢æˆ·ç«¯å‘é€å¤§å°ä¸ºlençš„ç¼“å†²åŒºbuf.è¿™ä¸ªå‡½æ•°é¦–å…ˆå°†  å‘é€ç¼“å†²åŒºå¤§å°(16è¿›åˆ¶)+æ¢è¡Œç¬¦+ç¼“å†²åŒº+æ¢è¡Œç¬¦å‘å‡ºã€‚ä¾‹å¦‚ï¼Œmg_send_http_chunk(ncï¼Œâ€œfooâ€ï¼Œ3)å°†æŠŠ &quot;3\r\nfoo\r\n&quot;å­—ç¬¦ä¸²è¿½åŠ åˆ°nc-&gt;send_mbufè¾“å‡ºIOç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">HTTPå¤´â€œä¼ è¾“ç¼–ç :å—åŒ–â€åº”è¯¥åœ¨ä½¿ç”¨æ­¤å‡½æ•°ä¹‹å‰å‘é€</span></span><br><span class="line"><span class="comment">ä¸è¦å¿˜è®°åœ¨å“åº”ç»“æŸæ—¶å‘é€ä¸€ä¸ªç©ºå—ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æ‰€æœ‰å†…å®¹éƒ½å·²å‘é€</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_printf_http_chunk</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *fmt, ...)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€ä¸€ä¸ªprintfæ ¼å¼çš„HTTPå—ã€‚åŠŸèƒ½ç±»ä¼¼äºmg_send_http_chunk()ã€‚*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_response_line</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> status_code,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€å“åº”çŠ¶æ€è¡Œã€‚å¦‚æœextra_headersä¸æ˜¯NULLï¼Œé‚£ä¹ˆextra_headersä¹Ÿä¼šåœ¨å“åº”è¡Œä¹‹åå‘é€ã€‚extra_headersä¸èƒ½ä»¥æ–°è¡Œç»“æŸ*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_http_send_error</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> code, <span class="keyword">const</span> <span class="keyword">char</span> *reason)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€ä¸€ä¸ªé”™è¯¯çš„å›åº”ã€‚å¦‚æœåŸå› ä¸ºç©ºï¼Œæ¶ˆæ¯å°†ä»é”™è¯¯ä»£ç ä¸­æ¨æ–­å‡ºæ¥(å¦‚æœæ”¯æŒçš„è¯)*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_http_send_redirect</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> status_code,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> struct mg_str location,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> struct mg_str extra_headers)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€ä¸€ä¸ªé‡å®šå‘å“åº”ã€‚status_codeåº”è¯¥æ˜¯301æˆ–302ï¼Œä½ç½®æŒ‡å‘æ–°ä½ç½®ã€‚å¦‚æœextra_headersä¸æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆextra_headersä¹Ÿä¼šåœ¨å“åº”è¡Œä¹‹åå‘é€ã€‚extra_headersä¸èƒ½ä»¥æ–°è¡Œç»“æŸã€‚*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_head</span><span class="params">(struct mg_connection *n, <span class="keyword">int</span> status_code,</span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="keyword">int64_t</span> content_length, <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€å“åº”è¡Œå’Œæ ‡é¢˜ã€‚è¿™ä¸ªå‡½æ•°ç”¨status_codeå‘é€å“åº”è¡Œï¼Œå¹¶è‡ªåŠ¨å‘é€ä¸€ä¸ªæ ‡é¢˜:&quot;Content-Length&quot;æˆ– &quot;Transfer-Encoding&quot;ã€‚å¦‚æœcontent_lengthä¸ºè´Ÿï¼Œåˆ™å‘é€â€œTransfer-Encoding: chunkedâ€æŠ¥å¤´ï¼Œå¦åˆ™å‘é€â€œContent-Lengthâ€æŠ¥å¤´ã€‚å¦‚æœè½¬æ¢ç¼–ç è¢«åˆ†å‰²ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä½“å¿…é¡»ä½¿ç”¨mg_send_http_chunk()æˆ–mg_printf_http_chunk()å‡½æ•°å‘é€ã€‚å¦åˆ™ï¼Œå¿…é¡»ä½¿ç”¨mg_send()æˆ–mg_printf()ã€‚é¢å¤–çš„æ ‡é¢˜å¯ä»¥é€šè¿‡extra_headersè®¾ç½®ã€‚æ³¨æ„ï¼Œextra_headersä¸èƒ½è¢«ä¸€ä¸ªæ–°çš„è¡Œç»ˆæ­¢*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_printf_html_escape</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *fmt, ...)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€ä¸€ä¸ªæ‰“å°æ ¼å¼çš„HTTPå—ï¼Œè½¬ä¹‰HTMLæ ‡è®°*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_http_reverse_proxy</span><span class="params">(struct mg_connection *nc,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> struct http_message *hm, struct mg_str mount,</span></span></span><br><span class="line"><span class="params"><span class="function">                           struct mg_str upstream)</span></span>;</span><br><span class="line"><span class="comment">/*å°†ç»™å®šçš„è¯·æ±‚ä»£ç†ç»™ç»™å®šçš„ä¸Šæ¸¸httpæœåŠ¡å™¨.æŒ‚è½½ä¸­çš„è·¯å¾„å‰ç¼€å°†è¢«å‰¥ç¦»åˆ°ä¸Šæ¸¸æœåŠ¡å™¨è¯·æ±‚çš„è·¯å¾„ï¼Œä¾‹å¦‚å¦‚æœæŒ‚è½½ä¸º/apiï¼Œä¸Šæ¸¸ä¸º http://localhost:8001/foo é‚£ä¹ˆå‘/apiä¼ å…¥çš„è¯·æ±‚å°†ä¼ å…¥åˆ° http://localhost:8001/foo/bar*/</span></span><br></pre></td></tr></table></figure>



<h3 id="HTTP-Clientç«¯API"><a href="#HTTP-Clientç«¯API" class="headerlink" title="HTTP Clientç«¯API"></a>HTTP Clientç«¯API</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function">struct mg_connection *<span class="title">mg_connect_http</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_mgr *mgr,</span></span></span><br><span class="line"><span class="params"><span class="function">    MG_CB(<span class="keyword">mg_event_handler_t</span> event_handler, <span class="keyword">void</span> *user_data), <span class="keyword">const</span> <span class="keyword">char</span> *url,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers, <span class="keyword">const</span> <span class="keyword">char</span> *post_data)</span></span>;</span><br><span class="line"><span class="comment">/*åˆ›å»ºå‡ºç«™HTTPè¿æ¥çš„åŠ©æ‰‹å‡½æ•°</span></span><br><span class="line"><span class="comment">urlæ˜¯è¦è·å–çš„urlã€‚å®ƒå¿…é¡»è¢«æ­£ç¡®åœ°urlç¼–ç ï¼Œä¾‹å¦‚æ²¡æœ‰ç©ºæ ¼ï¼Œç­‰ç­‰.é»˜è®¤æƒ…å†µä¸‹ï¼Œmg_connect_http()å‘é€è¿æ¥å’Œä¸»æœºå¤´</span></span><br><span class="line"><span class="comment">extra_headersæ˜¯ä¸€ä¸ªé¢å¤–çš„HTTPå¤´:&quot;User-Agent: my-app\r\n&quot;</span></span><br><span class="line"><span class="comment">å¦‚æœpost_dataä¸ºç©ºï¼Œåˆ™åˆ›å»ºä¸€ä¸ªGETè¯·æ±‚ã€‚å¦åˆ™ï¼Œå°†ä½¿ç”¨æŒ‡å®šçš„POSTæ•°æ®åˆ›å»ºPOSTè¯·æ±‚ã€‚</span></span><br><span class="line"><span class="comment">æ³¨æ„ï¼Œå¦‚æœè¦æäº¤çš„æ•°æ®æ˜¯è¡¨å•æäº¤ï¼Œé‚£ä¹ˆåº”è¯¥ç›¸åº”åœ°è®¾ç½®Content-TypeæŠ¥å¤´(å‚è§ä¸‹é¢çš„ç¤ºä¾‹)ã€‚</span></span><br><span class="line"><span class="comment">nc1 = mg_connect_http(mgr, ev_handler_1, &quot;http://www.google.com&amp;quot;, NULL,</span></span><br><span class="line"><span class="comment">                        NULL);</span></span><br><span class="line"><span class="comment">nc2 = mg_connect_http(mgr, ev_handler_1, &quot;https://github.com&amp;quot;, NULL, NULL);</span></span><br><span class="line"><span class="comment">nc3 = mg_connect_http(</span></span><br><span class="line"><span class="comment">      mgr, ev_handler_1, &quot;my_server:8000/form_submit/&quot;,</span></span><br><span class="line"><span class="comment">      &quot;Content-Type: application/x-www-form-urlencoded\r\n&quot;,</span></span><br><span class="line"><span class="comment">      &quot;var_1=value_1&amp;var_2=value_2&quot;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">struct mg_connection *<span class="title">mg_connect_http_opt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_mgr *mgr, MG_CB(<span class="keyword">mg_event_handler_t</span> ev_handler, <span class="keyword">void</span> *user_data),</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_connect_opts opts, <span class="keyword">const</span> <span class="keyword">char</span> *url, <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">char</span> *post_data)</span></span>;</span><br><span class="line"><span class="comment">/*åˆ›å»ºå‡ºç«™HTTPè¿æ¥çš„åŠ©æ‰‹å‡½æ•°.ä¸mg_connect_httpåŸºæœ¬ç›¸åŒï¼Œä½†å…è®¸æä¾›é¢å¤–çš„å‚æ•°(ä¾‹å¦‚SSLå‚æ•°)*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_http_create_digest_auth_header</span><span class="params">(<span class="keyword">char</span> *buf, <span class="keyword">size_t</span> buf_len,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="keyword">const</span> <span class="keyword">char</span> *method, <span class="keyword">const</span> <span class="keyword">char</span> *uri,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="keyword">const</span> <span class="keyword">char</span> *auth_domain, <span class="keyword">const</span> <span class="keyword">char</span> *user,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="keyword">const</span> <span class="keyword">char</span> *passwd)</span></span>;</span><br><span class="line"><span class="comment">/*ä¸ºå®¢æˆ·æœºè¯·æ±‚åˆ›å»ºæ‘˜è¦èº«ä»½éªŒè¯å¤´*/</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linuxç½‘ç»œç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>mongoose</tag>
      </tags>
  </entry>
  <entry>
    <title>Git</title>
    <url>/2021/08/08/Git/</url>
    <content><![CDATA[<h2 id="å‰è¨€-ï¼ˆè½¬ï¼‰"><a href="#å‰è¨€-ï¼ˆè½¬ï¼‰" class="headerlink" title="å‰è¨€ ï¼ˆè½¬ï¼‰"></a>å‰è¨€ ï¼ˆè½¬ï¼‰</h2><p>å› ä¸ºå·¥ä½œéœ€æ±‚ï¼Œæœ€è¿‘åˆé‡æ–°æ¸©ä¹ äº†ä¸€ä¸‹Gitæ“ä½œï¼Œé‚æ€»ç»“äº†ä¸€ç¯‡Gitå¸¸ç”¨æ“ä½œæŒ‡å—ï¼Œæ–¹ä¾¿æ—¥åå­¦ä¹ æŸ¥é˜…ï¼Œæœ¬åšå®¢ç²¾ç®€æç‚¼äº†åœ¨å¼€å‘è¿‡ç¨‹ä¸­Gitç»å¸¸ç”¨åˆ°çš„æ ¸å¿ƒå‘½ä»¤ï¼Œä¸»è¦å‚è€ƒäº†ã€Š<a href="https://www.liaoxuefeng.com/wiki/896043488029600">å»–é›ªå³°è€å¸ˆçš„Gitæ•™ç¨‹</a>ã€‹ï¼Œå¸Œæœ›å¯¹å¤§å®¶å­¦ä¹ ä½¿ç”¨Gitèƒ½å¸¦æ¥å¸®åŠ©ã€‚</p>
<span id="more"></span>

<h2 id="Gitç®€ä»‹"><a href="#Gitç®€ä»‹" class="headerlink" title="Gitç®€ä»‹"></a>Gitç®€ä»‹</h2><p>Gitæ˜¯Linuxä¹‹çˆ¶Linusçš„ç¬¬äºŒä¸ªä¼Ÿå¤§çš„ä½œå“ï¼Œå®ƒæœ€æ—©æ˜¯åœ¨Linuxä¸Šå¼€å‘çš„ï¼Œè¢«ç”¨æ¥ç®¡ç†Linuxæ ¸å¿ƒçš„æºä»£ç ã€‚åæ¥æ…¢æ…¢åœ°æœ‰äººå°†å…¶ç§»æ¤åˆ°äº†Unixã€Windowsã€Max OSç­‰æ“ä½œç³»ç»Ÿä¸­ã€‚</p>
<p>Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¸é›†ä¸­å¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸åŒçš„æ˜¯ï¼Œæ¯ä¸ªäººéƒ½å·¥ä½œåœ¨é€šè¿‡å…‹éš†å»ºç«‹çš„æœ¬åœ°ç‰ˆæœ¬åº“ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªäººéƒ½æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼ŒæŸ¥çœ‹æäº¤æ—¥å¿—ã€æäº¤ã€åˆ›å»ºé‡Œç¨‹ç¢‘å’Œåˆ†æ”¯ã€åˆå¹¶åˆ†æ”¯ã€å›é€€ç­‰æ‰€æœ‰æ“ä½œéƒ½ç›´æ¥åœ¨æœ¬åœ°å®Œæˆè€Œä¸éœ€è¦ç½‘ç»œè¿æ¥ã€‚</p>
<p>å¯¹äºGitä»“åº“æ¥è¯´ï¼Œæ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹å®Œæ•´çš„ä»“åº“ï¼Œæ‰€è°“çš„è¿œç¨‹ä»“åº“æˆ–æ˜¯æœåŠ¡å™¨ä»“åº“å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªä»“åº“ï¼Œåªä¸è¿‡è¿™å°ä¸»æœº24å°æ—¶è¿è¡Œï¼Œå®ƒæ˜¯ä¸€ä¸ªç¨³å®šçš„ä»“åº“ï¼Œä¾›ä»–äººå…‹éš†ã€æ¨é€ï¼Œä¹Ÿä»æœåŠ¡å™¨ä»“åº“ä¸­æ‹‰å–åˆ«äººçš„æäº¤ã€‚</p>
<p>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</p>
<h2 id="å®‰è£…ä¹‹åç¬¬ä¸€æ­¥"><a href="#å®‰è£…ä¹‹åç¬¬ä¸€æ­¥" class="headerlink" title="å®‰è£…ä¹‹åç¬¬ä¸€æ­¥"></a>å®‰è£…ä¹‹åç¬¬ä¸€æ­¥</h2><p>å®‰è£…å®Œæˆåï¼Œè¿˜éœ€è¦æœ€åä¸€æ­¥è®¾ç½®ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> user.name <span class="string">&quot;Your Name&quot;</span></span><br><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> user.email <span class="string">&quot;email@example.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>å› ä¸ºGitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªæœºå™¨éƒ½å¿…é¡»é…ç½®ç”¨æˆ·ä¿¡æ¯ï¼šä½ çš„åå­—å’ŒEmailåœ°å€ã€‚</p>
<p>æ³¨æ„<code>git config</code>å‘½ä»¤çš„<code>--global</code>å‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚</p>
<h2 id="åˆ›å»ºç‰ˆæœ¬åº“"><a href="#åˆ›å»ºç‰ˆæœ¬åº“" class="headerlink" title="åˆ›å»ºç‰ˆæœ¬åº“"></a>åˆ›å»ºç‰ˆæœ¬åº“</h2><h3 id="æœ¬åœ°ä»“åº“"><a href="#æœ¬åœ°ä»“åº“" class="headerlink" title="æœ¬åœ°ä»“åº“"></a>æœ¬åœ°ä»“åº“</h3><p>ç‰ˆæœ¬åº“åˆåä»“åº“ï¼Œè‹±æ–‡å<strong>repository</strong>ï¼Œä½ å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è¢«Gitç®¡ç†èµ·æ¥ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€åˆ é™¤ï¼ŒGitéƒ½èƒ½è·Ÿè¸ªï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è¿½è¸ªå†å²ï¼Œæˆ–è€…åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»å¯ä»¥â€œè¿˜åŸâ€ã€‚</p>
<p>æ‰€ä»¥ï¼Œåˆ›å»ºä¸€ä¸ªç‰ˆæœ¬åº“éå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åœ°æ–¹ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> mkdir learngit</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> learngit</span><br><span class="line"><span class="variable">$</span> <span class="built_in">pwd</span></span><br><span class="line">Path</span><br><span class="line">----</span><br><span class="line">D:\Blog\tmp\learngit</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒæ­¥ï¼Œé€šè¿‡<code>git init</code>å‘½ä»¤æŠŠè¿™ä¸ªç›®å½•å˜æˆGitå¯ä»¥ç®¡ç†çš„ä»“åº“ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git init</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> D:/Blog/tmp/learngit/.git/</span><br></pre></td></tr></table></figure>

<h3 id="è¿œç¨‹ä»“åº“"><a href="#è¿œç¨‹ä»“åº“" class="headerlink" title="è¿œç¨‹ä»“åº“"></a>è¿œç¨‹ä»“åº“</h3><h4 id="åˆ›å»ºSSH-Key"><a href="#åˆ›å»ºSSH-Key" class="headerlink" title="åˆ›å»ºSSH Key"></a>åˆ›å»ºSSH Key</h4><p>Gitæ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬<code>https</code>ï¼Œä½†é€šè¿‡<code>ssh</code>æ”¯æŒçš„åŸç”Ÿ<code>git</code>åè®®é€Ÿåº¦æœ€å¿«ã€‚ç”±äºæœ¬åœ°Gitä»“åº“å’ŒGitHubä»“åº“ä¹‹é—´çš„ä¼ è¾“æ˜¯é€šè¿‡SSHåŠ å¯†çš„ï¼Œæ‰€ä»¥ï¼Œéœ€è¦åœ¨å…³è”è¿œç¨‹ä»“åº“å‰éœ€è¦é…ç½®<code>SSH Key</code>è‡³Githubè®¾ç½®ä¸­ï¼Œè¿™æ ·è¿œç¨‹ä»“åº“æ‰å…è®¸æœ¬æœºå¯¹è¿œç¨‹ä»“åº“çš„æ‹‰å»/æ¨é€æ“ä½œã€‚</p>
<p>æ‰“å¼€<code>Shell</code>ï¼Œè¿›å…¥åˆ°â€<code>~/.ssh</code>â€œç›®å½•ä¸‹ï¼Œè¿è¡Œâ€<code>ls</code>â€œå‘½ä»¤çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰<code>id_rsa</code>å’Œ<code>id_rsa.pub</code>è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œå¯ç›´æ¥è·³åˆ°ä¸‹ä¸€æ­¥ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ‰§è¡Œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> ssh<span class="literal">-keygen</span> <span class="literal">-t</span> rsa <span class="literal">-C</span> <span class="string">&quot;youremail@example.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>ä¸€è·¯å›è½¦å³å¯ã€‚æ‰§è¡Œå‘½ä»¤åï¼Œæˆ‘ä»¬å†è¿›å…¥åˆ°â€<code>~/.ssh</code>â€œç›®å½•ä¸‹ï¼Œè¿è¡Œâ€<code>ls</code>â€œå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰<code>id_rsa</code>å’Œ<code>id_rsa.pub</code>ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯SSH Keyçš„ç§˜é’¥å¯¹ï¼Œ<code>id_rsa</code>æ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºå»ï¼Œ<code>id_rsa.pub</code>æ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563105584864.png" alt="1563105584864"></p>
<p>æ‰“å¼€â€œAccount settingsâ€ï¼Œâ€œSSH Keysâ€é¡µé¢ï¼Œç„¶åï¼Œç‚¹â€œNew SSH Keyâ€ï¼Œå¡«ä¸Šä»»æ„Titleï¼Œåœ¨Keyæ–‡æœ¬æ¡†é‡Œç²˜è´´<code>id_rsa.pub</code>æ–‡ä»¶çš„å†…å®¹ï¼ˆWin 10 ä¸‹å¯ä½¿ç”¨â€<code>type ~/.ssh/id_rsa.pub</code>â€œå‘½ä»¤æŸ¥çœ‹å…¬é’¥æ–‡ä»¶å†…å®¹ï¼‰ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563105973152.png" alt="1563105973152"></p>
<p>ç‚¹å‡»â€œAdd SSH Keyâ€ä¹‹åï¼Œå°±å¯ä»¥çœ‹åˆ°ä½ çš„å…¬é’¥å·²ç»åŠ å…¥åˆ°äº†ä½ çš„Githubä»“åº“é…ç½®ä¸­ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563106045201.png" alt="1563106045201"></p>
<h4 id="æ·»åŠ è¿œç¨‹åº“"><a href="#æ·»åŠ è¿œç¨‹åº“" class="headerlink" title="æ·»åŠ è¿œç¨‹åº“"></a>æ·»åŠ è¿œç¨‹åº“</h4><p>é¦–å…ˆï¼Œç™»é™†GitHubï¼Œç„¶åï¼Œåœ¨å³ä¸Šè§’æ‰¾åˆ°â€œCreate a new repoâ€æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563103995786.png" alt="1563103995786"></p>
<p>åœ¨Repository nameå¡«å…¥<code>learngit</code>ï¼Œå…¶ä»–ä¿æŒé»˜è®¤è®¾ç½®ï¼Œç‚¹å‡»â€œCreate repositoryâ€æŒ‰é’®ï¼Œå°±æˆåŠŸåœ°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Gitä»“åº“ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563104100618.png" alt="1563104100618"></p>
<p>è¿™æ ·å°±æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªç©ºç™½çš„è¿œç¨‹ä»“åº“ï¼Œé‚£ä¹ˆå¦‚ä½•å°†è¿™ä¸ªè¿œç¨‹ä»“åº“ä¸æœ¬åœ°ä»“åº“è¿›è¡Œå…³è”å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬æ ¹æ®Gitæ‰€ç»™å‡ºçš„æç¤ºå¯çŸ¥ï¼Œå¯ä»¥åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–°ä»“åº“å¯¹è¿œç¨‹ä»“åº“è¿›è¡Œå…³è”ï¼Œä¹Ÿå¯ä»¥å¯¹æœ¬åœ°å·²æœ‰ä»“åº“è¿›è¡Œå…³è”ã€‚</p>
<h5 id="å…³è”æ–°ä»“åº“"><a href="#å…³è”æ–°ä»“åº“" class="headerlink" title="å…³è”æ–°ä»“åº“"></a>å…³è”æ–°ä»“åº“</h5><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# learngit&quot;</span> &gt;&gt; README.md</span><br><span class="line">git init</span><br><span class="line">git add README.md</span><br><span class="line">git commit <span class="literal">-m</span> <span class="string">&quot;first commit&quot;</span></span><br><span class="line">git remote add origin git@github.com:guoyaohua/learngit.git</span><br><span class="line">git push <span class="literal">-u</span> origin master</span><br></pre></td></tr></table></figure>

<h5 id="å…³è”å·²æœ‰ä»“åº“"><a href="#å…³è”å·²æœ‰ä»“åº“" class="headerlink" title="å…³è”å·²æœ‰ä»“åº“"></a>å…³è”å·²æœ‰ä»“åº“</h5><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git remote add origin git@github.com:guoyaohua/learngit.git</span><br><span class="line">git push <span class="literal">-u</span> origin master</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šæ–‡åœ¨æœ¬åœ°åˆå§‹åŒ–çš„â€œlearngitâ€ä»“åº“ã€‚<strong>ï¼ˆæ³¨æ„ï¼šæœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“å¯ä»¥ä¸åŒåï¼Œæœ¬æ–‡åªæ˜¯ä¸ºäº†å†™æ•™ç¨‹è®¾ç½®ä¸ºç›¸åŒåç§°ã€‚ï¼‰</strong></p>
<p><img src="http://pic.guoyaohua.com/image/git/1563104810075.png" alt="1563104810075"></p>
<p>æˆ‘ä»¬å†åˆ·æ–°ä¸‹<code>Github Code</code>ç•Œé¢ï¼Œå‘ç°æ–°åŠ å…¥çš„<code>README.md</code>æ–‡ä»¶å·²ç»æ¨é€åˆ°äº†è¿œç¨‹ä»“åº“ä¸­ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563106284174.png" alt="1563106284174"></p>
<h2 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h2><h3 id="å·¥ä½œåŒºå’Œæš‚å­˜åŒº"><a href="#å·¥ä½œåŒºå’Œæš‚å­˜åŒº" class="headerlink" title="å·¥ä½œåŒºå’Œæš‚å­˜åŒº"></a>å·¥ä½œåŒºå’Œæš‚å­˜åŒº</h3><h4 id="å·¥ä½œåŒºï¼ˆWorking-Directoryï¼‰"><a href="#å·¥ä½œåŒºï¼ˆWorking-Directoryï¼‰" class="headerlink" title="å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰"></a>å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰</h4><p>å°±æ˜¯ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„<code>learngit</code>æ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªå·¥ä½œåŒºï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563106681604.png" alt="1563106681604"></p>
<h4 id="ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰"><a href="#ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰" class="headerlink" title="ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰"></a>ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰</h4><p>å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•<code>.git</code>ï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚</p>
<p>Gitçš„ç‰ˆæœ¬åº“é‡Œå­˜äº†å¾ˆå¤šä¸œè¥¿ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ç§°ä¸º<strong>Stage</strong>ï¼ˆæˆ–è€…å«<strong>Index</strong>ï¼‰çš„<strong>æš‚å­˜åŒº</strong>ï¼Œè¿˜æœ‰Gitä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯<code>master</code>ï¼Œä»¥åŠæŒ‡å‘<code>master</code>çš„ä¸€ä¸ªæŒ‡é’ˆå«<code>HEAD</code>ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/Repository.jpg" alt="Repository"></p>
<p>åˆ†æ”¯å’Œ<code>HEAD</code>çš„æ¦‚å¿µæœ¬æ–‡åé¢å†è¯¦ç»†è¯´æ˜ã€‚</p>
<p>æˆ‘ä»¬æŠŠæ–‡ä»¶å¾€Gitç‰ˆæœ¬åº“é‡Œæ·»åŠ çš„æ—¶å€™ï¼Œæ˜¯åˆ†ä¸¤æ­¥æ‰§è¡Œçš„ï¼š</p>
<p>ç¬¬ä¸€æ­¥æ˜¯ç”¨<code>git add</code>æŠŠæ–‡ä»¶æ·»åŠ è¿›å»ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°<strong>æš‚å­˜åŒº</strong>ï¼›</p>
<p>ç¬¬äºŒæ­¥æ˜¯ç”¨<code>git commit</code>æäº¤æ›´æ”¹ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬åˆ›å»ºGitç‰ˆæœ¬åº“æ—¶ï¼ŒGitè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†å”¯ä¸€ä¸€ä¸ª<code>master</code>åˆ†æ”¯ï¼Œæ‰€ä»¥ç°åœ¨ï¼Œ<code>git commit</code>å°±æ˜¯å¾€<code>master</code>åˆ†æ”¯ä¸Šæäº¤æ›´æ”¹ã€‚</p>
<p>ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œéœ€è¦æäº¤çš„æ–‡ä»¶ä¿®æ”¹é€šé€šæ”¾åˆ°æš‚å­˜åŒºï¼Œç„¶åï¼Œä¸€æ¬¡æ€§æäº¤æš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹ã€‚</p>
<p>ä½¿ç”¨<code>git status</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€ã€‚</p>
<h3 id="ç‰ˆæœ¬å›é€€"><a href="#ç‰ˆæœ¬å›é€€" class="headerlink" title="ç‰ˆæœ¬å›é€€"></a>ç‰ˆæœ¬å›é€€</h3><p>Gitç‰ˆæœ¬æ§åˆ¶å¯ä»¥ç†è§£ä¸ºï¼Œæˆ‘ä»¬å†ç¼–å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹codeè¿›è¡Œå¤šæ¬¡ä¿®æ”¹ï¼Œæ¯å½“ä½ è§‰å¾—æ–‡ä»¶ä¿®æ”¹åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œå°±å¯ä»¥â€œä¿å­˜ä¸€ä¸ªå¿«ç…§â€ï¼Œè¿™ä¸ªå¿«ç…§åœ¨Gitä¸­è¢«ç§°ä¸º<code>commit</code>ã€‚ä¸€æ—¦ä½ æŠŠæ–‡ä»¶æ”¹ä¹±äº†ï¼Œæˆ–è€…è¯¯åˆ äº†æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä»æœ€è¿‘çš„ä¸€ä¸ª<code>commit</code>æ¢å¤ï¼Œç„¶åç»§ç»­å·¥ä½œï¼Œè€Œä¸æ˜¯æŠŠå‡ ä¸ªæœˆçš„å·¥ä½œæˆæœå…¨éƒ¨ä¸¢å¤±ã€‚</p>
<p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç”¨<code>git log</code>å‘½ä»¤æŸ¥çœ‹æˆ‘ä»¬æäº¤çš„å†å²è®°å½•ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git log</span><br><span class="line">commit <span class="number">1094</span>adb7b9b3807259d8cb349e7df1d4d6477073 (HEAD -&gt; master)</span><br><span class="line">Author: Yaohua Guo &lt;guo.yaohua@foxmail.com&gt;</span><br><span class="line">Date:   Fri May <span class="number">18</span> <span class="number">21</span>:<span class="number">06</span>:<span class="number">15</span> <span class="number">2018</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    append GPL</span><br><span class="line"></span><br><span class="line">commit e475afc93c209a690c39c13a46716e8fa000c366</span><br><span class="line">Author: Yaohua Guo &lt;guo.yaohua@foxmail.com&gt;</span><br><span class="line">Date:   Fri May <span class="number">18</span> <span class="number">21</span>:<span class="number">03</span>:<span class="number">36</span> <span class="number">2018</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    add distributed</span><br><span class="line"></span><br><span class="line">commit eaadf4e385e865d25c48e7ca9c8395c3f7dfaef0</span><br><span class="line">Author: Yaohua Guo &lt;guo.yaohua@foxmail.com&gt;</span><br><span class="line">Date:   Fri May <span class="number">18</span> <span class="number">20</span>:<span class="number">59</span>:<span class="number">18</span> <span class="number">2018</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    wrote a readme file</span><br></pre></td></tr></table></figure>

<p>Gitä¸­ï¼Œcommit idæ˜¯ä¸€ä¸ªä½¿ç”¨SHA1è®¡ç®—å‡ºæ¥çš„ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—ï¼Œç”¨åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œcommitåé¢çš„é‚£ä¸€ä¸²åå…­è¿›åˆ¶æ•°å­—å°±æ˜¯æ¯ä¸€æ¬¡æäº¤çš„ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>git log</code>å‘½ä»¤çœ‹åˆ°æ¯æ¬¡æäº¤çš„ç‰ˆæœ¬å·ã€ç”¨æˆ·åã€æ—¥æœŸä»¥åŠç‰ˆæœ¬æè¿°ç­‰ä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>git reset</code>å‘½ä»¤è¿›è¡Œç‰ˆæœ¬å›é€€æ“ä½œã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git reset -<span class="literal">-hard</span> HEAD^</span><br></pre></td></tr></table></figure>

<p>åœ¨Gitä¸­ï¼Œç”¨HEADè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^ ï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^^ ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¦‚æœéœ€è¦å›é€€å‡ åä¸ªç‰ˆæœ¬ï¼Œå†™å‡ åä¸ª^å®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å¯ä»¥å†™ï¼Œä¾‹å¦‚å›é€€30ä¸ªç‰ˆæœ¬ä¸ºï¼šHEAD~30ã€‚</p>
<p>å¦‚æœå›é€€å®Œç‰ˆæœ¬åˆåæ‚”äº†ï¼Œæƒ³æ¢å¤ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½¿ç”¨å¦‚ä¸‹å³å¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git reset -<span class="literal">-hard</span> commit_id </span><br></pre></td></tr></table></figure>

<p>ä¸è¿‡å½“æˆ‘ä»¬æ‰§è¡Œ<code>git reset</code>è¿›è¡Œç‰ˆæœ¬å›é€€ä¹‹åï¼Œä¹‹å‰æœ€æ–°çš„ç‰ˆæœ¬å·æ— æ³•é€šè¿‡<code>git log</code>æŸ¥è¯¢åˆ°ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨<code>git reflog</code>å‘½ä»¤æŸ¥è¯¢Gitçš„æ“ä½œè®°å½•ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¯¥è®°å½•ä¸­æ‰¾åˆ°ä¹‹å‰çš„commit idä¿¡æ¯ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git reflog</span><br><span class="line">e475afc HEAD<span class="selector-tag">@</span>&#123;<span class="number">1</span>&#125;: reset: moving to HEAD^</span><br><span class="line"><span class="number">1094</span>adb (HEAD -&gt; master) HEAD<span class="selector-tag">@</span>&#123;<span class="number">2</span>&#125;: commit: append GPL</span><br><span class="line">e475afc HEAD<span class="selector-tag">@</span>&#123;<span class="number">3</span>&#125;: commit: add distributed</span><br><span class="line">eaadf4e HEAD<span class="selector-tag">@</span>&#123;<span class="number">4</span>&#125;: commit (initial): wrote a readme file</span><br></pre></td></tr></table></figure>

<p>åœ¨Gitä¸­ï¼Œç‰ˆæœ¬å›é€€é€Ÿåº¦éå¸¸å¿«ï¼Œå› ä¸ºGitåœ¨å†…éƒ¨æœ‰ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„HEADæŒ‡é’ˆï¼Œå½“ä½ å›é€€ç‰ˆæœ¬çš„æ—¶å€™ï¼ŒGitä»…ä»…æ˜¯æŠŠHEADä»æŒ‡å‘å›é€€çš„ç‰ˆæœ¬ï¼Œç„¶åé¡ºä¾¿åˆ·æ–°å·¥ä½œåŒºæ–‡ä»¶ã€‚</p>
<h4 id="é‡ç½®å‘½ä»¤"><a href="#é‡ç½®å‘½ä»¤" class="headerlink" title="é‡ç½®å‘½ä»¤"></a>é‡ç½®å‘½ä»¤</h4><p>é‡ç½®å‘½ä»¤çš„ä½œç”¨æ˜¯å°†å½“å‰çš„åˆ†æ”¯é‡è®¾ï¼ˆresetï¼‰åˆ°æŒ‡å®šçš„<code>&lt;commit&gt;</code>æˆ–è€…<code>HEAD</code>ï¼ˆé»˜è®¤æ˜¯HEADï¼Œå³æœ€æ–°çš„ä¸€æ¬¡æäº¤ï¼‰ï¼Œå¹¶ä¸”æ ¹æ®[mode]æœ‰å¯èƒ½æ›´æ–°Indexå’ŒWorking directoryï¼ˆé»˜è®¤æ˜¯mixedï¼‰ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git reset [--<span class="type">hard</span>|<span class="type">soft</span>|<span class="type">mixed</span>|<span class="type">merge</span>|<span class="type">keep</span>] [<span class="type">commit</span>|<span class="type">HEAD</span>]</span><br></pre></td></tr></table></figure>

<ol>
<li>â€“hardï¼š<strong>é‡è®¾â€œæš‚å­˜åŒºâ€å’Œâ€œå·¥ä½œåŒºâ€</strong>ï¼Œä»<code>&lt;commit&gt;</code>ä»¥æ¥åœ¨å·¥ä½œåŒºä¸­çš„ä»»ä½•æ”¹å˜éƒ½è¢«ä¸¢å¼ƒï¼Œå¹¶æŠŠHEADæŒ‡å‘<code>&lt;commit&gt;</code>ã€‚<strong>ï¼ˆå½»åº•å›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œæœ¬åœ°çš„æºç ä¹Ÿä¼šå˜ä¸ºä¸Šä¸€ä¸ªç‰ˆæœ¬çš„å†…å®¹ã€‚ï¼‰</strong></li>
<li>â€“softï¼š<strong>â€œå·¥ä½œåŒºâ€ä¸­çš„å†…å®¹ä¸ä½œä»»ä½•æ”¹å˜ï¼ŒHEADæŒ‡å‘<code>&lt;commit&gt;</code>ï¼Œè‡ªä»<code>&lt;commit&gt;</code>ä»¥æ¥çš„æ‰€æœ‰æ”¹å˜éƒ½ä¼šå›é€€åˆ°â€œæš‚å­˜åŒºâ€ä¸­ï¼Œæ˜¾ç¤ºåœ¨<code>git status</code>çš„*â€œChanges to be committedâ€*ä¸­ã€‚ï¼ˆå›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œåªå›é€€äº†commitçš„ä¿¡æ¯ã€‚å¦‚æœè¿˜è¦æäº¤ï¼Œç›´æ¥commitå³å¯ã€‚ï¼‰</strong></li>
<li>â€“mixedï¼š<strong>ä»…é‡è®¾â€œæš‚å­˜åŒºâ€ï¼Œå¹¶æŠŠHEADæŒ‡å‘<code>&lt;commit&gt;</code>ï¼Œä½†æ˜¯ä¸é‡è®¾â€œå·¥ä½œåŒºâ€ï¼Œæœ¬åœ°æ–‡ä»¶ä¿®æ”¹ä¸å—å½±å“ã€‚</strong>è¿™ä¸ªæ¨¡å¼æ˜¯é»˜è®¤æ¨¡å¼ï¼Œå³å½“ä¸æ˜¾ç¤ºå‘ŠçŸ¥<code>git reset</code>æ¨¡å¼æ—¶ï¼Œä¼šä½¿ç”¨mixedæ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼çš„æ•ˆæœæ˜¯ï¼Œå·¥ä½œåŒºä¸­æ–‡ä»¶çš„ä¿®æ”¹éƒ½ä¼šè¢«ä¿ç•™ï¼Œä¸ä¼šä¸¢å¼ƒï¼Œä½†æ˜¯ä¹Ÿä¸ä¼šè¢«æ ‡è®°æˆâ€œ<em>Changes to be committed</em>â€ï¼Œä½†æ˜¯ä¼šæç¤ºæ–‡ä»¶æœªè¢«æ›´æ–°ã€‚<strong>ï¼ˆå›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œåªä¿ç•™æºç ï¼Œå›é€€commitå’Œindexä¿¡æ¯ï¼‰</strong></li>
</ol>
<h5 id="æ–‡ä»¶ç²’åº¦æ“ä½œ"><a href="#æ–‡ä»¶ç²’åº¦æ“ä½œ" class="headerlink" title="æ–‡ä»¶ç²’åº¦æ“ä½œ"></a>æ–‡ä»¶ç²’åº¦æ“ä½œ</h5><p>éœ€è¦æ³¨æ„çš„æ˜¯åœ¨<code>mixed</code>æ¨¡å¼ä¸‹è¿›è¡Œ<code>reset</code>æ“ä½œæ—¶å¯ä»¥æ˜¯å…¨å±€æ€§é‡ç½®ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡ä»¶ç²’åº¦é‡ç½®ï¼ŒåŒºåˆ«åœ¨äºäºŒè€…ä½œç”¨åŸŸä¸åŒï¼Œæ–‡ä»¶ç²’åº¦åªä¼šä½¿å¯¹åº”æ–‡ä»¶çš„æš‚å­˜åŒºçŠ¶æ€å˜ä¸ºæŒ‡å®šcommitæ—¶è¯¥æ–‡ä»¶çš„æš‚å­˜åŒºçŠ¶æ€ï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜ç‰ˆæœ¬åº“çŠ¶æ€ï¼Œå³HEADæŒ‡é’ˆä¸ä¼šæ”¹å˜ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æ•ˆæœã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸¤ä¸ªæ–‡ä»¶è¿›è¡Œä¸¤æ¬¡æäº¤ï¼Œå¯ä»¥çœ‹åˆ°ç›®å‰HEADæŒ‡å‘æœ€æ–°ä¸€æ¬¡æäº¤â€œtext2â€ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563611168654.png" alt="1563611168654"></p>
<p>æˆ‘ä»¬å¯¹â€œfile1.txtâ€è¿›è¡Œresetæ“ä½œï¼Œä»¤å…¶é‡ç½®ä¸ºâ€œtext1â€çŠ¶æ€ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563611993505.png" alt="1563611993505"></p>
<p>å¹¶ä¸”æˆ‘ä»¬é€šè¿‡git logå‘½ä»¤å¯å‘ç°ï¼Œæ­¤æ—¶HEADæŒ‡é’ˆå¹¶æ²¡æœ‰æ”¹å˜ï¼Œè¿˜æ˜¯æŒ‡å‘æœ€æ–°ä¸€æ¬¡æäº¤â€œText 2â€ï¼Œå¯çŸ¥æ–‡ä»¶ç²’åº¦çš„<code>reset --mixed</code>ä¸æ”¹å˜ç‰ˆæœ¬åº“HEADæŒ‡é’ˆçŠ¶æ€ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563612094551.png" alt="1563612094551"></p>
<p>å¯¹äºsoftå’Œhardæ¨¡å¼åˆ™æ— æ³•è¿›è¡Œæ–‡ä»¶ç²’åº¦æ“ä½œã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563609363728.png" alt="1563609363728"></p>
<h4 id="Reset-å¸¸ç”¨ç¤ºä¾‹"><a href="#Reset-å¸¸ç”¨ç¤ºä¾‹" class="headerlink" title="Reset å¸¸ç”¨ç¤ºä¾‹"></a>Reset å¸¸ç”¨ç¤ºä¾‹</h4><ol>
<li><p>å›é€€addæ“ä½œ</p>
 <figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add test</span><br><span class="line"><span class="variable">$</span> git reset HEAD test  </span><br><span class="line"><span class="comment"># HEADæŒ‡çš„æ˜¯å½“å‰æŒ‡å‘çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥å°†HEADè¿˜æˆä»»æ„æƒ³å›é€€çš„ç‰ˆæœ¬å·</span></span><br></pre></td></tr></table></figure>

<p> å¯ä»¥å°†testä»â€œå·²æš‚å­˜â€çŠ¶æ€ï¼ˆIndexåŒºï¼‰å›æ»šåˆ°æŒ‡å®šCommitæ—¶æš‚å­˜åŒºçš„çŠ¶æ€ã€‚</p>
</li>
<li><p>å›é€€æœ€åä¸€æ¬¡æäº¤</p>
 <figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add test</span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;Add test&quot;</span></span><br><span class="line"><span class="variable">$</span> git reset -<span class="literal">-soft</span> HEAD^</span><br></pre></td></tr></table></figure>

<p> å¯ä»¥å°†testä»â€œå·²æäº¤â€çŠ¶æ€å˜ä¸ºâ€œå·²æš‚å­˜â€çŠ¶æ€ã€‚</p>
</li>
<li><p>å›é€€æœ€è¿‘å‡ æ¬¡æäº¤ï¼Œå¹¶æŠŠè¿™å‡ æ¬¡æäº¤æ”¾åˆ°æ–°åˆ†æ”¯ä¸Š</p>
 <figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch topic <span class="comment"># å·²å½“å‰åˆ†æ”¯ä¸ºåŸºç¡€ï¼Œæ–°å»ºåˆ†æ”¯topic</span></span><br><span class="line"><span class="variable">$</span> git reset -<span class="literal">-hard</span> HEAD~<span class="number">2</span> <span class="comment"># åœ¨å½“å‰åˆ†æ”¯ä¸Šå›æ»šæäº¤</span></span><br><span class="line"><span class="variable">$</span> git checkout topic</span><br></pre></td></tr></table></figure>

<p> é€šè¿‡ä¸´æ—¶åˆ†æ”¯æ¥ä¿ç•™æäº¤ï¼Œç„¶ååœ¨å½“å‰åˆ†æ”¯ä¸Šåšç¡¬å›æ»šã€‚</p>
</li>
<li><p>å°†æœ¬åœ°çš„çŠ¶æ€å›é€€åˆ°å’Œè¿œç¨‹ä¸€æ ·</p>
 <figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git reset -<span class="literal">-hard</span> origin/devlop</span><br></pre></td></tr></table></figure></li>
<li><p>å›é€€åˆ°æŸä¸ªç‰ˆæœ¬æäº¤</p>
 <figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git reset <span class="number">497</span>e350</span><br></pre></td></tr></table></figure>

<p> å½“å‰HEADä¼šæŒ‡å‘â€œ497e350â€ï¼Œæš‚å­˜åŒºä¸­çš„çŠ¶æ€ä¼šæ¢å¤åˆ°æäº¤â€œ497e350â€æ—¶æš‚å­˜åŒºçš„çŠ¶æ€ã€‚</p>
</li>
</ol>
<h3 id="æ’¤é”€ä¿®æ”¹"><a href="#æ’¤é”€ä¿®æ”¹" class="headerlink" title="æ’¤é”€ä¿®æ”¹"></a>æ’¤é”€ä¿®æ”¹</h3><p>å½“æˆ‘ä»¬å› ä¸ºä¸€äº›åŸå› æƒ³è¦ä¸¢å¼ƒå·¥ä½œåŒºæŸäº›æ–‡ä»¶ä¿®æ”¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨â€œ<code>git checkout -- &lt;file&gt;</code>â€å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä»…ä¼šæ¢å¤å·¥ä½œåŒºæ–‡ä»¶çŠ¶æ€ï¼Œä¸ä¼šå¯¹ç‰ˆæœ¬åº“æœ‰ä»»ä½•æ”¹åŠ¨ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563613938574.png" alt="1563613938574"></p>
<p>å‘½ä»¤<code>git checkout -- file1.txt</code>æ„æ€å°±æ˜¯ï¼ŒæŠŠ<code>file1.txt</code>æ–‡ä»¶åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>ä¸€ç§æ˜¯<code>file1.txt</code>è‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼›</li>
<li>ä¸€ç§æ˜¯<code>file1.txt</code>å·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œå°±æ˜¯è®©è¿™ä¸ªæ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡<code>git commit</code>æˆ–<code>git add</code>æ—¶çš„çŠ¶æ€ã€‚</p>
<h3 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h3><p>åœ¨Gitä¸­ï¼Œåˆ é™¤ä¹Ÿæ˜¯ä¸€ä¸ªä¿®æ”¹æ“ä½œï¼Œæˆ‘ä»¬å®æˆ˜ä¸€ä¸‹ï¼Œå…ˆæ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶<code>test.txt</code>åˆ°Gitå¹¶ä¸”æäº¤ï¼š</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ é€šå¸¸ç›´æ¥åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æŠŠæ²¡ç”¨çš„æ–‡ä»¶åˆ äº†ï¼Œæˆ–è€…ç”¨<code>rm</code>å‘½ä»¤åˆ äº†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> test.txt</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™ï¼ŒGitçŸ¥é“ä½ åˆ é™¤äº†æ–‡ä»¶ï¼Œå› æ­¤ï¼Œå·¥ä½œåŒºå’Œç‰ˆæœ¬åº“å°±ä¸ä¸€è‡´äº†ï¼Œ<code>git status</code>å‘½ä»¤ä¼šç«‹åˆ»å‘Šè¯‰ä½ å“ªäº›æ–‡ä»¶è¢«åˆ é™¤äº†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">	deleted:    test.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸€æ˜¯ç¡®å®è¦ä»ç‰ˆæœ¬åº“ä¸­åˆ é™¤è¯¥æ–‡ä»¶ï¼Œé‚£å°±ç”¨å‘½ä»¤<code>git rm</code>åˆ æ‰ï¼Œå¹¶ä¸”<code>git commit</code>ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git <span class="built_in">rm</span> test.txt</span><br><span class="line"><span class="built_in">rm</span> <span class="string">&#x27;test.txt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;remove test.txt&quot;</span></span><br><span class="line">[<span class="type">master</span> <span class="type">d46f35e</span>] remove test.txt</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> deletion(-)</span><br><span class="line"> delete mode <span class="number">100644</span> test.txt</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œæ–‡ä»¶å°±ä»ç‰ˆæœ¬åº“ä¸­è¢«åˆ é™¤äº†ã€‚</p>
<blockquote>
<p>æç¤ºï¼šå…ˆæ‰‹åŠ¨åˆ é™¤æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨<code>git rm &lt;file&gt;</code>å’Œ<code>git add &lt;file&gt;</code>æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>
</blockquote>
<p>å¦ä¸€ç§æƒ…å†µæ˜¯åˆ é”™äº†ï¼Œå› ä¸ºç‰ˆæœ¬åº“é‡Œè¿˜æœ‰å‘¢ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆè½»æ¾åœ°æŠŠè¯¯åˆ çš„æ–‡ä»¶æ¢å¤åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout -- test.txt</span><br></pre></td></tr></table></figure>

<p><code>git checkout</code>å…¶å®æ˜¯ç”¨ç‰ˆæœ¬åº“é‡Œçš„ç‰ˆæœ¬æ›¿æ¢å·¥ä½œåŒºçš„ç‰ˆæœ¬ï¼Œæ— è®ºå·¥ä½œåŒºæ˜¯ä¿®æ”¹è¿˜æ˜¯åˆ é™¤ï¼Œéƒ½å¯ä»¥â€œä¸€é”®è¿˜åŸâ€ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä»æ¥æ²¡æœ‰è¢«æ·»åŠ åˆ°ç‰ˆæœ¬åº“å°±è¢«åˆ é™¤çš„æ–‡ä»¶ï¼Œæ˜¯æ— æ³•æ¢å¤çš„ï¼</p>
</blockquote>
<h2 id="åˆ†æ”¯ç®¡ç†"><a href="#åˆ†æ”¯ç®¡ç†" class="headerlink" title="åˆ†æ”¯ç®¡ç†"></a>åˆ†æ”¯ç®¡ç†</h2><h3 id="åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯"><a href="#åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯" class="headerlink" title="åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯"></a>åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯</h3><p>åœ¨ä¸Šæ–‡â€œç‰ˆæœ¬å›é€€â€é‡Œï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œæ¯æ¬¡æäº¤ï¼ŒGitéƒ½æŠŠå®ƒä»¬ä¸²æˆä¸€æ¡æ—¶é—´çº¿ï¼Œè¿™æ¡æ—¶é—´çº¿å°±æ˜¯ä¸€ä¸ªåˆ†æ”¯ã€‚æˆªæ­¢åˆ°ç›®å‰ï¼Œåªæœ‰ä¸€æ¡æ—¶é—´çº¿ï¼Œåœ¨Gité‡Œï¼Œè¿™ä¸ªåˆ†æ”¯å«ä¸»åˆ†æ”¯ï¼Œå³<code>master</code>åˆ†æ”¯ã€‚<code>HEAD</code>ä¸¥æ ¼æ¥è¯´ä¸æ˜¯æŒ‡å‘æäº¤ï¼Œè€Œæ˜¯æŒ‡å‘<code>master</code>ï¼Œ<code>master</code>æ‰æ˜¯æŒ‡å‘æäº¤çš„ï¼Œæ‰€ä»¥ï¼Œ<code>HEAD</code>æŒ‡å‘çš„å°±æ˜¯å½“å‰åˆ†æ”¯ã€‚</p>
<p>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œ<code>master</code>åˆ†æ”¯æ˜¯ä¸€æ¡çº¿ï¼ŒGitç”¨<code>master</code>æŒ‡å‘æœ€æ–°çš„æäº¤ï¼Œå†ç”¨<code>HEAD</code>æŒ‡å‘<code>master</code>ï¼Œå°±èƒ½ç¡®å®šå½“å‰åˆ†æ”¯ï¼Œä»¥åŠå½“å‰åˆ†æ”¯çš„æäº¤ç‚¹ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/0.png" alt="img"></p>
<p>æ¯æ¬¡æäº¤ï¼Œ<code>master</code>åˆ†æ”¯éƒ½ä¼šå‘å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè¿™æ ·ï¼Œéšç€ä½ ä¸æ–­æäº¤ï¼Œ<code>master</code>åˆ†æ”¯çš„çº¿ä¹Ÿè¶Šæ¥è¶Šé•¿ã€‚</p>
<p>å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚<code>dev</code>æ—¶ï¼ŒGitæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆå«<code>dev</code>ï¼ŒæŒ‡å‘<code>master</code>ç›¸åŒçš„æäº¤ï¼Œå†æŠŠ<code>HEAD</code>æŒ‡å‘<code>dev</code>ï¼Œå°±è¡¨ç¤ºå½“å‰åˆ†æ”¯åœ¨<code>dev</code>ä¸Šï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1.png" alt="img"></p>
<p>Gitåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å¾ˆå¿«ï¼Œå› ä¸ºé™¤äº†å¢åŠ ä¸€ä¸ª<code>dev</code>æŒ‡é’ˆï¼Œæ”¹æ”¹<code>HEAD</code>çš„æŒ‡å‘ï¼Œå·¥ä½œåŒºçš„æ–‡ä»¶éƒ½æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚</p>
<p>ä¸è¿‡ï¼Œä»ç°åœ¨å¼€å§‹ï¼Œå¯¹å·¥ä½œåŒºçš„ä¿®æ”¹å’Œæäº¤å°±æ˜¯é’ˆå¯¹<code>dev</code>åˆ†æ”¯äº†ï¼Œæ¯”å¦‚æ–°æäº¤ä¸€æ¬¡åï¼Œ<code>dev</code>æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè€Œ<code>master</code>æŒ‡é’ˆä¸å˜ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/2.png" alt="img"></p>
<p>å‡å¦‚æˆ‘ä»¬åœ¨<code>dev</code>ä¸Šçš„å·¥ä½œå®Œæˆäº†ï¼Œå°±å¯ä»¥æŠŠ<code>dev</code>åˆå¹¶åˆ°<code>master</code>ä¸Šã€‚Gitæ€ä¹ˆåˆå¹¶å‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥æŠŠ<code>master</code>æŒ‡å‘<code>dev</code>çš„å½“å‰æäº¤ï¼Œå°±å®Œæˆäº†åˆå¹¶ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/3.png" alt="img"></p>
<p>æ‰€ä»¥Gitåˆå¹¶åˆ†æ”¯ä¹Ÿå¾ˆå¿«ï¼å°±æ”¹æ”¹æŒ‡é’ˆï¼Œå·¥ä½œåŒºå†…å®¹ä¹Ÿä¸å˜ï¼</p>
<p>åˆå¹¶å®Œåˆ†æ”¯åï¼Œç”šè‡³å¯ä»¥åˆ é™¤<code>dev</code>åˆ†æ”¯ã€‚åˆ é™¤<code>dev</code>åˆ†æ”¯å°±æ˜¯æŠŠ<code>dev</code>æŒ‡é’ˆç»™åˆ æ‰ï¼Œåˆ æ‰åï¼Œæˆ‘ä»¬å°±å‰©ä¸‹äº†ä¸€æ¡<code>master</code>åˆ†æ”¯ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/4.png" alt="img"></p>
<p>ä¸‹é¢å¼€å§‹å®æˆ˜ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»º<code>dev</code>åˆ†æ”¯ï¼Œç„¶ååˆ‡æ¢åˆ°<code>dev</code>åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout <span class="literal">-b</span> dev</span><br><span class="line">Switched to a new branch <span class="string">&#x27;dev&#x27;</span></span><br></pre></td></tr></table></figure>

<p><code>git checkout</code>å‘½ä»¤åŠ ä¸Š<code>-b</code>å‚æ•°è¡¨ç¤ºåˆ›å»ºå¹¶åˆ‡æ¢ï¼Œç›¸å½“äºä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch dev <span class="comment"># åˆ›å»ºdevåˆ†æ”¯</span></span><br><span class="line"><span class="variable">$</span> git checkout dev <span class="comment"># åˆ‡æ¢åˆ°devåˆ†æ”¯</span></span><br><span class="line">Switched to branch <span class="string">&#x27;dev&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œç”¨<code>git branch</code>å‘½ä»¤æŸ¥çœ‹å½“å‰åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br></pre></td></tr></table></figure>

<p><code>git branch</code>å‘½ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª<code>*</code>å·ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨<code>dev</code>åˆ†æ”¯ä¸Šæ­£å¸¸æäº¤ï¼Œæ¯”å¦‚å¯¹<code>readme.txt</code>åšä¸ªä¿®æ”¹ï¼ŒåŠ ä¸Šä¸€è¡Œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">Creating a new branch is quick.</span><br></pre></td></tr></table></figure>

<p>ç„¶åæäº¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add readme.txt </span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;branch test&quot;</span></span><br><span class="line">[<span class="type">dev</span> <span class="type">b17d20e</span>] branch test</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+)</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œ<code>dev</code>åˆ†æ”¯çš„å·¥ä½œå®Œæˆï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ‡æ¢å›<code>master</code>åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br></pre></td></tr></table></figure>

<p>åˆ‡æ¢å›<code>master</code>åˆ†æ”¯åï¼Œå†æŸ¥çœ‹ä¸€ä¸ª<code>readme.txt</code>æ–‡ä»¶ï¼Œåˆšæ‰æ·»åŠ çš„å†…å®¹ä¸è§äº†ï¼å› ä¸ºé‚£ä¸ªæäº¤æ˜¯åœ¨<code>dev</code>åˆ†æ”¯ä¸Šï¼Œè€Œ<code>master</code>åˆ†æ”¯æ­¤åˆ»çš„æäº¤ç‚¹å¹¶æ²¡æœ‰å˜ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/5.png" alt="img"></p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠ<code>dev</code>åˆ†æ”¯çš„å·¥ä½œæˆæœåˆå¹¶åˆ°<code>master</code>åˆ†æ”¯ä¸Šï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git merge dev</span><br><span class="line">Updating d46f35e..b17d20e</span><br><span class="line">Fast<span class="literal">-forward</span></span><br><span class="line"> readme.txt | <span class="number">1</span> +</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+)</span><br></pre></td></tr></table></figure>

<p><code>git merge</code>å‘½ä»¤ç”¨äºåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚åˆå¹¶åï¼Œå†æŸ¥çœ‹<code>readme.txt</code>çš„å†…å®¹ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œå’Œ<code>dev</code>åˆ†æ”¯çš„æœ€æ–°æäº¤æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</p>
<p>æ³¨æ„åˆ°ä¸Šé¢çš„<code>Fast-forward</code>ä¿¡æ¯ï¼ŒGitå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ¬¡åˆå¹¶æ˜¯â€œå¿«è¿›æ¨¡å¼â€ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥æŠŠ<code>master</code>æŒ‡å‘<code>dev</code>çš„å½“å‰æäº¤ï¼Œæ‰€ä»¥åˆå¹¶é€Ÿåº¦éå¸¸å¿«ã€‚</p>
<p>å½“ç„¶ï¼Œä¹Ÿä¸æ˜¯æ¯æ¬¡åˆå¹¶éƒ½èƒ½<code>Fast-forward</code>ï¼Œæˆ‘ä»¬åé¢ä¼šè®²å…¶ä»–æ–¹å¼çš„åˆå¹¶ã€‚</p>
<p>åˆå¹¶å®Œæˆåï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°åˆ é™¤<code>dev</code>åˆ†æ”¯äº†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch <span class="literal">-d</span> dev</span><br><span class="line">Deleted branch dev (was b17d20e).</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤åï¼ŒæŸ¥çœ‹<code>branch</code>ï¼Œå°±åªå‰©ä¸‹<code>master</code>åˆ†æ”¯äº†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºåˆ›å»ºã€åˆå¹¶å’Œåˆ é™¤åˆ†æ”¯éå¸¸å¿«ï¼Œæ‰€ä»¥Gité¼“åŠ±ä½ ä½¿ç”¨åˆ†æ”¯å®ŒæˆæŸä¸ªä»»åŠ¡ï¼Œåˆå¹¶åå†åˆ æ‰åˆ†æ”¯ï¼Œè¿™å’Œç›´æ¥åœ¨<code>master</code>åˆ†æ”¯ä¸Šå·¥ä½œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†è¿‡ç¨‹æ›´å®‰å…¨ã€‚</p>
<h3 id="è§£å†³å†²çª"><a href="#è§£å†³å†²çª" class="headerlink" title="è§£å†³å†²çª"></a>è§£å†³å†²çª</h3><p>åœ¨çœŸæ­£å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåˆå¹¶åˆ†æ”¯ç»å¸¸ä¼šé‡åˆ°åˆ†æ”¯å†²çªçš„æƒ…å†µï¼Œæ— æ³•ç›´æ¥åˆå¹¶ï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªåœºæ™¯ã€‚</p>
<p>å‡†å¤‡æ–°çš„<code>feature1</code>åˆ†æ”¯ï¼Œç»§ç»­æˆ‘ä»¬çš„æ–°åˆ†æ”¯å¼€å‘ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout <span class="literal">-b</span> feature1</span><br><span class="line">Switched to a new branch <span class="string">&#x27;feature1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>readme.txt</code>æœ€åä¸€è¡Œï¼Œæ”¹ä¸ºï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">Creating a new branch is quick AND simple.</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>feature1</code>åˆ†æ”¯ä¸Šæäº¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add readme.txt</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;AND simple&quot;</span></span><br><span class="line">[<span class="type">feature1</span> <span class="number">14096</span><span class="type">d0</span>] AND simple</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+), <span class="number">1</span> deletion(-)</span><br></pre></td></tr></table></figure>

<p>åˆ‡æ¢åˆ°<code>master</code>åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by <span class="number">1</span> commit.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your local commits)</span><br></pre></td></tr></table></figure>

<p>Gitè¿˜ä¼šè‡ªåŠ¨æç¤ºæˆ‘ä»¬å½“å‰<code>master</code>åˆ†æ”¯æ¯”è¿œç¨‹çš„<code>master</code>åˆ†æ”¯è¦è¶…å‰1ä¸ªæäº¤ã€‚</p>
<p>åœ¨<code>master</code>åˆ†æ”¯ä¸ŠæŠŠ<code>readme.txt</code>æ–‡ä»¶çš„æœ€åä¸€è¡Œæ”¹ä¸ºï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">Creating a new branch is quick &amp; simple.</span><br></pre></td></tr></table></figure>

<p>æäº¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add readme.txt </span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;&amp; simple&quot;</span></span><br><span class="line">[<span class="type">master</span> <span class="number">5</span><span class="type">dc6824</span>] &amp; simple</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+), <span class="number">1</span> deletion(-)</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œ<code>master</code>åˆ†æ”¯å’Œ<code>feature1</code>åˆ†æ”¯å„è‡ªéƒ½åˆ†åˆ«æœ‰æ–°çš„æäº¤ï¼Œå˜æˆäº†è¿™æ ·ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/6.png" alt="img"></p>
<p>è¿™ç§æƒ…å†µä¸‹ï¼ŒGitæ— æ³•æ‰§è¡Œâ€œå¿«é€Ÿåˆå¹¶(Fast-forward)â€ï¼Œåªèƒ½è¯•å›¾æŠŠå„è‡ªçš„ä¿®æ”¹åˆå¹¶èµ·æ¥ï¼Œä½†è¿™ç§åˆå¹¶å°±å¯èƒ½ä¼šæœ‰å†²çªï¼Œæˆ‘ä»¬è¯•è¯•çœ‹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git merge feature1</span><br><span class="line">Auto<span class="literal">-merging</span> readme.txt</span><br><span class="line">CONFLICT (content): Merge conflict <span class="keyword">in</span> readme.txt</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure>

<p>Gitå‘Šè¯‰æˆ‘ä»¬ï¼Œ<code>readme.txt</code>æ–‡ä»¶å­˜åœ¨å†²çªï¼Œå¿…é¡»æ‰‹åŠ¨è§£å†³å†²çªåå†æäº¤ã€‚<code>git status</code>ä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ä»¬å†²çªçš„æ–‡ä»¶ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git status</span><br><span class="line">On branch master</span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by <span class="number">2</span> commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your local commits)</span><br><span class="line"></span><br><span class="line">You have unmerged paths.</span><br><span class="line">  (fix conflicts and run <span class="string">&quot;git commit&quot;</span>)</span><br><span class="line">  (use <span class="string">&quot;git merge --abort&quot;</span> to abort the merge)</span><br><span class="line"></span><br><span class="line">Unmerged paths:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to mark resolution)</span><br><span class="line"></span><br><span class="line">	both modified:   readme.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥çœ‹readme.txtçš„å†…å®¹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">Git is a distributed version control system.</span><br><span class="line">Git is free software distributed under the GPL.</span><br><span class="line">Git has a mutable index called stage.</span><br><span class="line">Git tracks changes of files.</span><br><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">Creating a new branch is quick &amp; simple.</span><br><span class="line">=======</span><br><span class="line">Creating a new branch is quick AND simple.</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature1</span><br></pre></td></tr></table></figure>

<p>Gitç”¨<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>ï¼Œ<code>=======</code>ï¼Œ<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>æ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¿®æ”¹å¦‚ä¸‹åä¿å­˜ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">Creating a new branch is quick and simple.</span><br></pre></td></tr></table></figure>

<p>å†æäº¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add readme.txt </span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;conflict fixed&quot;</span></span><br><span class="line">[<span class="type">master</span> <span class="type">cf810e4</span>] conflict fixed</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œ<code>master</code>åˆ†æ”¯å’Œ<code>feature1</code>åˆ†æ”¯å˜æˆäº†ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/7.png" alt="img"></p>
<p>ç”¨å¸¦å‚æ•°çš„<code>git log</code>ä¹Ÿå¯ä»¥çœ‹åˆ°åˆ†æ”¯çš„åˆå¹¶æƒ…å†µï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git log -<span class="literal">-graph</span> -<span class="literal">-pretty</span>=oneline -<span class="literal">-abbrev</span><span class="literal">-commit</span></span><br><span class="line">*   cf810e4 (HEAD -&gt; master) conflict fixed</span><br><span class="line">|\  </span><br><span class="line">| * <span class="number">14096</span>d0 (feature1) AND simple</span><br><span class="line">* | <span class="number">5</span>dc6824 &amp; simple</span><br><span class="line">|/  </span><br><span class="line">* b17d20e branch test</span><br><span class="line">* d46f35e (origin/master) remove test.txt</span><br><span class="line">* b84166e add test.txt</span><br><span class="line">* <span class="number">519219</span>b git tracks changes</span><br><span class="line">* e43a48b understand how stage works</span><br><span class="line">* <span class="number">1094</span>adb append GPL</span><br><span class="line">* e475afc add distributed</span><br><span class="line">* eaadf4e wrote a readme file</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œåˆ é™¤<code>feature1</code>åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch <span class="literal">-d</span> feature1</span><br><span class="line">Deleted branch feature1 (was <span class="number">14096</span>d0).</span><br></pre></td></tr></table></figure>

<p>å·¥ä½œå®Œæˆã€‚</p>
<h3 id="åˆ†æ”¯ç®¡ç†ç­–ç•¥"><a href="#åˆ†æ”¯ç®¡ç†ç­–ç•¥" class="headerlink" title="åˆ†æ”¯ç®¡ç†ç­–ç•¥"></a>åˆ†æ”¯ç®¡ç†ç­–ç•¥</h3><p>é€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æœå¯èƒ½ï¼ŒGitä¼šç”¨<code>Fast forward</code>æ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚</p>
<p>å¦‚æœè¦å¼ºåˆ¶ç¦ç”¨<code>Fast forward</code>æ¨¡å¼ï¼ŒGitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å®æˆ˜ä¸€ä¸‹<code>--no-ff</code>æ–¹å¼çš„<code>git merge</code>ï¼š</p>
<p>é¦–å…ˆï¼Œä»ç„¶åˆ›å»ºå¹¶åˆ‡æ¢<code>dev</code>åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout <span class="literal">-b</span> dev</span><br><span class="line">Switched to a new branch <span class="string">&#x27;dev&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹readme.txtæ–‡ä»¶ï¼Œå¹¶æäº¤ä¸€ä¸ªæ–°çš„commitï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add readme.txt </span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;add merge&quot;</span></span><br><span class="line">[<span class="type">dev</span> <span class="type">f52c633</span>] add merge</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+)</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œæˆ‘ä»¬åˆ‡æ¢å›<code>master</code>ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br></pre></td></tr></table></figure>

<p>å‡†å¤‡åˆå¹¶<code>dev</code>åˆ†æ”¯ï¼Œè¯·æ³¨æ„<code>--no-ff</code>å‚æ•°ï¼Œè¡¨ç¤ºç¦ç”¨<code>Fast forward</code>ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git merge -<span class="literal">-no</span><span class="literal">-ff</span> <span class="literal">-m</span> <span class="string">&quot;merge with no-ff&quot;</span> dev</span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> readme.txt | <span class="number">1</span> +</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+)</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæœ¬æ¬¡åˆå¹¶è¦åˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼Œæ‰€ä»¥åŠ ä¸Š<code>-m</code>å‚æ•°ï¼ŒæŠŠcommitæè¿°å†™è¿›å»ã€‚</p>
<p>åˆå¹¶åï¼Œæˆ‘ä»¬ç”¨<code>git log</code>çœ‹çœ‹åˆ†æ”¯å†å²ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git log -<span class="literal">-graph</span> -<span class="literal">-pretty</span>=oneline -<span class="literal">-abbrev</span><span class="literal">-commit</span></span><br><span class="line">*   e1e9c68 (HEAD -&gt; master) merge with no<span class="literal">-ff</span></span><br><span class="line">|\  </span><br><span class="line">| * f52c633 (dev) add merge</span><br><span class="line">|/  </span><br><span class="line">*   cf810e4 conflict fixed</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸ä½¿ç”¨<code>Fast forward</code>æ¨¡å¼ï¼Œmergeåå°±åƒè¿™æ ·ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/8.png" alt="img"></p>
<h4 id="åˆ†æ”¯ç­–ç•¥"><a href="#åˆ†æ”¯ç­–ç•¥" class="headerlink" title="åˆ†æ”¯ç­–ç•¥"></a>åˆ†æ”¯ç­–ç•¥</h4><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‰ç…§å‡ ä¸ªåŸºæœ¬åŸåˆ™è¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼š</p>
<p>é¦–å…ˆï¼Œ<code>master</code>åˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ä»…ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå¹³æ—¶ä¸èƒ½åœ¨ä¸Šé¢å¹²æ´»ï¼›</p>
<p>é‚£åœ¨å“ªå¹²æ´»å‘¢ï¼Ÿå¹²æ´»éƒ½åœ¨<code>dev</code>åˆ†æ”¯ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>dev</code>åˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠ<code>dev</code>åˆ†æ”¯åˆå¹¶åˆ°<code>master</code>ä¸Šï¼Œåœ¨<code>master</code>åˆ†æ”¯å‘å¸ƒ1.0ç‰ˆæœ¬ï¼›</p>
<p>ä½ å’Œå›¢é˜ŸåŒäº‹æ¯ä¸ªäººéƒ½åœ¨<code>dev</code>åˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€<code>dev</code>åˆ†æ”¯ä¸Šåˆå¹¶å°±å¯ä»¥äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œå›¢é˜Ÿåˆä½œçš„åˆ†æ”¯çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/9.png" alt="img"></p>
<h3 id="çŠ¶æ€å­˜å‚¨"><a href="#çŠ¶æ€å­˜å‚¨" class="headerlink" title="çŠ¶æ€å­˜å‚¨"></a>çŠ¶æ€å­˜å‚¨</h3><p>å½“æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦æš‚æ—¶æ”¾ä¸‹æ‰‹ä¸­çš„å·¥ä½œï¼Œåˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯è¿›è¡Œå¼€å‘ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬åœ¨devåˆ†æ”¯è¿›è¡Œç¨‹åº2.0ç‰ˆæœ¬å¼€å‘æ—¶ï¼Œå‘ç°1.0ç‰ˆæœ¬çš„ç¨‹åºå‡ºç°äº†bugï¼Œå¿…é¡»ç«‹åˆ»è¿›è¡Œä¿®å¤ï¼Œä½†æ˜¯åœ¨ç›®å‰çš„devåˆ†æ”¯æˆ‘ä»¬å¯èƒ½å·²ç»åšäº†å¾ˆå¤šä¿®æ”¹ï¼Œæš‚å­˜åŒºå¯èƒ½æœ‰äº†æš‚å­˜çŠ¶æ€ï¼Œç”šè‡³å¯èƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­åœ¨devåˆ†æ”¯è¿›è¡Œäº†å¤šæ¬¡commitï¼Œè¿™æ—¶å¦‚æœæˆ‘ä»¬æƒ³åˆ‡æ¢å›masteråˆ†æ”¯ï¼Œè¿›è¡Œbugä¿®å¤ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨åˆ°<code>git stash</code>å‘½ä»¤å­˜å‚¨åŸåˆ†æ”¯å½“å‰çš„çŠ¶æ€ã€‚</p>
<p>åœ¨è®²è§£<code>git stash</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè€ƒè™‘ä¸¤ç§åœºæ™¯ï¼š</p>
<p>ç¬¬ä¸€ç§å°±æ˜¯æˆ‘ä»¬æœªåœ¨devåˆ†æ”¯è¿›è¡Œä»»ä½•æäº¤ï¼Œæ­¤æ—¶HEADæŒ‡é’ˆæŒ‡å‘devï¼Œdevå’ŒmasteræŒ‡å‘åŒä¸€æ¬¡commitï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563631355797.png" alt="1563631355797"></p>
<p>æˆ‘ä»¬å¯èƒ½åœ¨devçš„å·¥ä½œåŒºåšäº†å¾ˆå¤šä¿®æ”¹ï¼Œä¹Ÿå°†éƒ¨åˆ†ä¿®æ”¹çŠ¶æ€åŠ å…¥äº†æš‚å­˜åŒºï¼ˆå³è¿›è¡Œäº†<code>git add</code>æ“ä½œï¼‰ï¼Œè¿™æ—¶æˆ‘ä»¬å°è¯•ä¸€ä¸‹ç›´æ¥ä½¿ç”¨<code>git checkout</code>å‘½ä»¤åˆ‡æ¢åˆ†æ”¯ã€‚</p>
<p>æ­¤æ—¶ï¼ŒGitçŠ¶æ€å¦‚ä¸‹ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563631585919.png" alt="1563631585919"></p>
<p>æˆ‘ä»¬ä¿®æ”¹â€œfile1.txtâ€å’Œâ€œfile2.txtâ€çš„å†…å®¹ï¼Œå¹¶å°†â€œfile1.txtâ€çš„æ”¹åŠ¨åŠ å…¥æš‚å­˜åŒºã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563631787056.png" alt="1563631787056"></p>
<p>æ­¤æ—¶å¯çœ‹å‡ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºå°±éƒ½æœ‰æ”¹å˜ï¼Œä½†HEADæŒ‡é’ˆæŒ‡å‘çš„devä¸masterä¸ºåŒä¸€ä¸ªcommitèŠ‚ç‚¹ã€‚</p>
<p>è¿™æ—¶æˆ‘ä»¬æ‰§è¡Œ<code>git checkout master</code>å‘½ä»¤å°è¯•åˆ‡æ¢åˆ†æ”¯ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563631937563.png" alt="1563631937563"></p>
<p>å¯ä»¥çœ‹å‡ºï¼ŒæˆåŠŸåˆ‡æ¢åˆ°äº†masteråˆ†æ”¯ä¸Šï¼Œè€Œä¸”å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„çŠ¶æ€ä¾æ—§ä¿ç•™ã€‚</p>
<p>æˆ‘ä»¬å†è€ƒè™‘ä¸€ä¸ªåœºæ™¯ï¼Œåœ¨devåˆ†æ”¯å¼€å‘æ—¶ï¼Œè¿›è¡Œäº†ä¸€æ¬¡æäº¤ï¼Œæ­¤æ—¶HEADæŒ‡å‘devåˆ†æ”¯ï¼Œdevåˆ†æ”¯è¶…å‰masteråˆ†æ”¯ä¸€æ¬¡commitï¼Œå…·ä½“è§ä¸‹å›¾ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563632158366.png" alt="1563632158366"></p>
<p>å¦‚æœæ­¤æ—¶æˆ‘ä»¬å·¥ä½œåŒºæˆ–æš‚å­˜åŒºæœ‰æœªæäº¤æ›´æ”¹æ—¶ï¼Œå°±æ— æ³•è¿›è¡Œåˆ†æ”¯åˆ‡æ¢æ“ä½œï¼ˆå¦‚æœæ²¡æœ‰æœªæäº¤ä¿®æ”¹çš„è¯å½“ç„¶å¯ä»¥è¿›è¡Œåˆ†æ”¯åˆ‡æ¢æ“ä½œï¼‰ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563632645976.png" alt="1563632645976"></p>
<p>æˆ‘æƒ³è¿™æ—¶å¤§å®¶å°±ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆä¸¤ç§çŠ¶æ€ä¸‹æˆ‘ä»¬éƒ½ä¿®æ”¹äº†æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„çŠ¶æ€ï¼Œä½†æ˜¯ä¸€ä¸ªå¯ä»¥åˆ‡æ¢åˆ†æ”¯å¹¶ä¸”ä¿ç•™å·¥ä½œåŒºã€æš‚å­˜åŒºçŠ¶æ€ï¼Œè€Œå¦ä¸€ç§çŠ¶æ€å°±æ— æ³•åˆ‡æ¢åˆ†æ”¯å‘¢ï¼Ÿ</p>
<p>æˆ‘èµ·åˆåœ¨é‡åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ä¹Ÿæ˜¯å¾ˆè¯§å¼‚ï¼Œåœ¨ç½‘ä¸Šæœç´¢äº†å¥½å¤šèµ„æ–™ï¼Œä¾æ—§æ²¡æœ‰æŸ¥åˆ°æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚</p>
<p>è¿™æ—¶æˆ‘ä»¬å°±åº”è¯¥ä»Gitçš„åŸç†æ¥è¿›è¡Œåˆ†æäº†ï¼Œ<strong>Gitåœ¨è¿›è¡Œç‰ˆæœ¬æ§åˆ¶æ—¶ï¼Œè®°å½•çš„å¹¶ä¸æ˜¯æ–‡ä»¶æœ¬èº«çš„ä¿¡æ¯ï¼Œè€Œæ˜¯æ–‡ä»¶çš„ä¿®æ”¹çŠ¶æ€</strong>ï¼Œä¾‹å¦‚æˆ‘ä»¬å†ä¸€ä¸ª10000è¡Œä»£ç çš„æ–‡ä»¶ä¸­ï¼Œæ–°åŠ å…¥äº†ä¸€è¡Œä»£ç è¿›è¡Œï¼ŒGitå¹¶ä¸æ˜¯å°†æœ€æ–°çš„10001è¡Œä»£ç ä½œä¸ºå¤‡ä»½ï¼Œè€Œæ˜¯ä»…ä»…è®°å½•äº†æ–°æ—§æ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ï¼Œå³åœ¨å“ªä¸ªä½ç½®ä¿®æ”¹äº†ä»€ä¹ˆå†…å®¹ï¼ˆä¿®æ”¹åŒ…æ‹¬ï¼šå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ç­‰ï¼‰ã€‚</p>
<p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ä¸Šé—®é¢˜åˆ°çš„ç¬¬ä¸€ç§åœºæ™¯ï¼šæˆ‘ä»¬æœªåœ¨devåˆ†æ”¯è¿›è¡Œä»»ä½•æäº¤ï¼Œæ­¤æ—¶HEADæŒ‡é’ˆæŒ‡å‘devï¼Œdevå’ŒmasteræŒ‡å‘åŒä¸€æ¬¡commitã€‚</p>
<p>è™½ç„¶æˆ‘ä»¬å†devåˆ†æ”¯çš„å·¥ä½œåŒºå’Œæš‚å­˜åŒºåšäº†ä¿®æ”¹ï¼Œè¿™äº›ä¿®æ”¹éƒ½æ˜¯åŸºäºdevæŒ‡å‘çš„commitè€Œè¨€çš„ï¼Œè€Œä¸”æ­¤æ—¶devå’ŒmasteræŒ‡å‘åŒä¸€ä¸ªcommitï¼Œæ‰€ä»¥ï¼Œè¯¥åœºæ™¯ä¸‹ï¼Œdevåˆ†æ”¯å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹ä¾æ—§é€‚ç”¨äºmasteråˆ†æ”¯ï¼Œæ‰€ä»¥å¯ä»¥æˆåŠŸåˆ‡æ¢åˆ†æ”¯ã€‚</p>
<p>è€Œç¬¬äºŒç§åœºæ™¯ï¼šåœ¨devåˆ†æ”¯å¼€å‘æ—¶ï¼Œè¿›è¡Œäº†ä¸€æ¬¡æäº¤ï¼Œæ­¤æ—¶HEADæŒ‡å‘devåˆ†æ”¯ï¼Œdevåˆ†æ”¯è¶…å‰masteråˆ†æ”¯ä¸€æ¬¡commitã€‚</p>
<p>è¿™æ—¶ï¼Œdevå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„çŠ¶æ€æ˜¯åŸºäºæœ€æ–°çš„devæŒ‡å‘çš„commitè€Œè¨€çš„ï¼Œå·²ç»ä¸èƒ½åº”ç”¨äºmasteræŒ‡å‘çš„commitäº†ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œåˆ‡æ¢åˆ†æ”¯æ—¶ï¼Œæç¤ºæŠ¥é”™ã€‚</p>
<h4 id="åº”ç”¨å®ä¾‹"><a href="#åº”ç”¨å®ä¾‹" class="headerlink" title="åº”ç”¨å®ä¾‹"></a>åº”ç”¨å®ä¾‹</h4><p>è½¯ä»¶å¼€å‘ä¸­ï¼Œbugå°±åƒå®¶å¸¸ä¾¿é¥­ä¸€æ ·ã€‚æœ‰äº†bugå°±éœ€è¦ä¿®å¤ï¼Œåœ¨Gitä¸­ï¼Œç”±äºåˆ†æ”¯æ˜¯å¦‚æ­¤çš„å¼ºå¤§ï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªbugéƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªæ–°çš„ä¸´æ—¶åˆ†æ”¯æ¥ä¿®å¤ï¼Œä¿®å¤åï¼Œåˆå¹¶åˆ†æ”¯ï¼Œç„¶åå°†ä¸´æ—¶åˆ†æ”¯åˆ é™¤ã€‚</p>
<p>å½“ä½ æ¥åˆ°ä¸€ä¸ªä¿®å¤ä¸€ä¸ªä»£å·101çš„bugçš„ä»»åŠ¡æ—¶ï¼Œå¾ˆè‡ªç„¶åœ°ï¼Œä½ æƒ³åˆ›å»ºä¸€ä¸ªåˆ†æ”¯<code>issue-101</code>æ¥ä¿®å¤å®ƒï¼Œä½†æ˜¯ï¼Œå½“å‰æ­£åœ¨<code>dev</code>ä¸Šè¿›è¡Œçš„å·¥ä½œè¿˜æ²¡æœ‰æäº¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git status</span><br><span class="line">On branch dev</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">	new file:   hello.py</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">	modified:   readme.txt</span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸æ˜¯ä½ ä¸æƒ³æäº¤ï¼Œè€Œæ˜¯å·¥ä½œåªè¿›è¡Œåˆ°ä¸€åŠï¼Œè¿˜æ²¡æ³•æäº¤ï¼Œé¢„è®¡å®Œæˆè¿˜éœ€1å¤©æ—¶é—´ã€‚ä½†æ˜¯ï¼Œå¿…é¡»åœ¨ä¸¤ä¸ªå°æ—¶å†…ä¿®å¤è¯¥bugï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p>å¹¸å¥½ï¼ŒGitè¿˜æä¾›äº†ä¸€ä¸ª<code>stash</code>åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå½“å‰å·¥ä½œç°åœºâ€œå‚¨è—â€èµ·æ¥ï¼Œç­‰ä»¥åæ¢å¤ç°åœºåç»§ç»­å·¥ä½œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git stash</span><br><span class="line">Saved working directory and index state WIP on dev: f52c633 add merge</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œç”¨<code>git status</code>æŸ¥çœ‹å·¥ä½œåŒºï¼Œå°±æ˜¯å¹²å‡€çš„ï¼ˆé™¤éæœ‰æ²¡æœ‰è¢«Gitç®¡ç†çš„æ–‡ä»¶ï¼‰ï¼Œå› æ­¤å¯ä»¥æ”¾å¿ƒåœ°åˆ›å»ºåˆ†æ”¯æ¥ä¿®å¤bugã€‚</p>
<p>é¦–å…ˆç¡®å®šè¦åœ¨å“ªä¸ªåˆ†æ”¯ä¸Šä¿®å¤bugï¼Œå‡å®šéœ€è¦åœ¨<code>master</code>åˆ†æ”¯ä¸Šä¿®å¤ï¼Œå°±ä»<code>master</code>åˆ›å»ºä¸´æ—¶åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by <span class="number">6</span> commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your local commits)</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git checkout <span class="literal">-b</span> issue<span class="literal">-101</span></span><br><span class="line">Switched to a new branch <span class="string">&#x27;issue-101&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä¿®å¤bugï¼Œéœ€è¦æŠŠâ€œGit is free software â€¦â€æ”¹ä¸ºâ€œGit is a free software â€¦â€ï¼Œç„¶åæäº¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add readme.txt </span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;fix bug 101&quot;</span></span><br><span class="line">[<span class="type">issue</span>-<span class="number">101</span> <span class="number">4</span><span class="type">c805e2</span>] fix bug <span class="number">101</span></span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+), <span class="number">1</span> deletion(-)</span><br></pre></td></tr></table></figure>

<p>ä¿®å¤å®Œæˆåï¼Œåˆ‡æ¢åˆ°<code>master</code>åˆ†æ”¯ï¼Œå¹¶å®Œæˆåˆå¹¶ï¼Œæœ€ååˆ é™¤<code>issue-101</code>åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br><span class="line">Your branch is ahead of <span class="string">&#x27;origin/master&#x27;</span> by <span class="number">6</span> commits.</span><br><span class="line">  (use <span class="string">&quot;git push&quot;</span> to publish your local commits)</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git merge -<span class="literal">-no</span><span class="literal">-ff</span> <span class="literal">-m</span> <span class="string">&quot;merged bug fix 101&quot;</span> issue<span class="literal">-101</span></span><br><span class="line">Merge made by the <span class="string">&#x27;recursive&#x27;</span> strategy.</span><br><span class="line"> readme.txt | <span class="number">2</span> +-</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+), <span class="number">1</span> deletion(-)</span><br></pre></td></tr></table></figure>

<p>ä¿®å¤å¥½BUGä¹‹åï¼Œå°±å¯ä»¥è¿”å›åŸåˆ†æ”¯ç»§ç»­ä¹‹å‰çš„å·¥ä½œäº†ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout dev</span><br><span class="line">Switched to branch <span class="string">&#x27;dev&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git status</span><br><span class="line">On branch dev</span><br><span class="line">nothing to commit, working tree clean</span><br></pre></td></tr></table></figure>

<p>å·¥ä½œåŒºæ˜¯å¹²å‡€çš„ï¼Œåˆšæ‰çš„å·¥ä½œç°åœºå­˜åˆ°å“ªå»äº†ï¼Ÿç”¨<code>git stash list</code>å‘½ä»¤çœ‹çœ‹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git stash list</span><br><span class="line">stash<span class="selector-tag">@</span>&#123;<span class="number">0</span>&#125;: WIP on dev: f52c633 add merge</span><br></pre></td></tr></table></figure>

<p>å·¥ä½œç°åœºè¿˜åœ¨ï¼ŒGitæŠŠstashå†…å®¹å­˜åœ¨æŸä¸ªåœ°æ–¹äº†ï¼Œä½†æ˜¯éœ€è¦æ¢å¤ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªåŠæ³•ï¼š</p>
<p>ä¸€æ˜¯ç”¨<code>git stash apply</code>æ¢å¤ï¼Œä½†æ˜¯æ¢å¤åï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤ï¼Œä½ éœ€è¦ç”¨<code>git stash drop</code>æ¥åˆ é™¤ï¼›</p>
<p>å¦ä¸€ç§æ–¹å¼æ˜¯ç”¨<code>git stash pop</code>ï¼Œæ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ äº†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git stash pop</span><br><span class="line">On branch dev</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line"></span><br><span class="line">	new file:   hello.py</span><br><span class="line"></span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line"></span><br><span class="line">	modified:   readme.txt</span><br><span class="line"></span><br><span class="line">Dropped refs/stash<span class="selector-tag">@</span>&#123;<span class="number">0</span>&#125; (<span class="number">5</span>d677e2ee266f39ea296182fb2354265b91b3b2a)</span><br></pre></td></tr></table></figure>

<p>å†ç”¨<code>git stash list</code>æŸ¥çœ‹ï¼Œå°±çœ‹ä¸åˆ°ä»»ä½•stashå†…å®¹äº†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git stash list</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥å¤šæ¬¡stashï¼Œæ¢å¤çš„æ—¶å€™ï¼Œå…ˆç”¨<code>git stash list</code>æŸ¥çœ‹ï¼Œç„¶åæ¢å¤æŒ‡å®šçš„stashï¼Œç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git stash apply stash<span class="selector-tag">@</span>&#123;<span class="number">0</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¤šäººåä½œ"><a href="#å¤šäººåä½œ" class="headerlink" title="å¤šäººåä½œ"></a>å¤šäººåä½œ</h3><p>å½“ä½ ä»è¿œç¨‹ä»“åº“å…‹éš†æ—¶ï¼Œå®é™…ä¸ŠGitè‡ªåŠ¨æŠŠæœ¬åœ°çš„<code>master</code>åˆ†æ”¯å’Œè¿œç¨‹çš„<code>master</code>åˆ†æ”¯å¯¹åº”èµ·æ¥äº†ï¼Œå¹¶ä¸”ï¼Œè¿œç¨‹ä»“åº“çš„é»˜è®¤åç§°æ˜¯<code>origin</code>ã€‚</p>
<p>ç”¨<code>git remote -v</code>æŸ¥çœ‹è¿œç¨‹åº“çš„è¯¦ç»†ä¿¡æ¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git remote <span class="literal">-v</span></span><br><span class="line">origin  git@github.com:guoyaohua/learngit.git (fetch)</span><br><span class="line">origin  git@github.com:guoyaohua/learngit.git (push)</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ˜¾ç¤ºäº†å¯ä»¥æŠ“å–å’Œæ¨é€çš„<code>origin</code>çš„åœ°å€ã€‚å¦‚æœæ²¡æœ‰æ¨é€æƒé™ï¼Œå°±çœ‹ä¸åˆ°pushçš„åœ°å€ã€‚</p>
<h4 id="æ¨é€åˆ†æ”¯"><a href="#æ¨é€åˆ†æ”¯" class="headerlink" title="æ¨é€åˆ†æ”¯"></a>æ¨é€åˆ†æ”¯</h4><p>æ¨é€åˆ†æ”¯ï¼Œå°±æ˜¯æŠŠè¯¥åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æœ¬åœ°æäº¤æ¨é€åˆ°è¿œç¨‹åº“ã€‚æ¨é€æ—¶ï¼Œè¦æŒ‡å®šæœ¬åœ°åˆ†æ”¯ï¼Œè¿™æ ·ï¼ŒGitå°±ä¼šæŠŠè¯¥åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹åº“å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ä¸Šï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git push origin master</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦æ¨é€å…¶ä»–åˆ†æ”¯ï¼Œæ¯”å¦‚<code>dev</code>ï¼Œå°±æ”¹æˆï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git push origin dev</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦æŠŠæœ¬åœ°åˆ†æ”¯å¾€è¿œç¨‹æ¨é€ï¼Œé‚£ä¹ˆï¼Œå“ªäº›åˆ†æ”¯éœ€è¦æ¨é€ï¼Œå“ªäº›ä¸éœ€è¦å‘¢ï¼Ÿ</p>
<ul>
<li><code>master</code>åˆ†æ”¯æ˜¯ä¸»åˆ†æ”¯ï¼Œå› æ­¤è¦æ—¶åˆ»ä¸è¿œç¨‹åŒæ­¥ï¼›</li>
<li><code>dev</code>åˆ†æ”¯æ˜¯å¼€å‘åˆ†æ”¯ï¼Œå›¢é˜Ÿæ‰€æœ‰æˆå‘˜éƒ½éœ€è¦åœ¨ä¸Šé¢å·¥ä½œï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ä¸è¿œç¨‹åŒæ­¥ï¼›</li>
<li>bugåˆ†æ”¯åªç”¨äºåœ¨æœ¬åœ°ä¿®å¤bugï¼Œå°±æ²¡å¿…è¦æ¨åˆ°è¿œç¨‹äº†ï¼Œé™¤éè€æ¿è¦çœ‹çœ‹ä½ æ¯å‘¨åˆ°åº•ä¿®å¤äº†å‡ ä¸ªbugï¼›</li>
<li>featureåˆ†æ”¯æ˜¯å¦æ¨åˆ°è¿œç¨‹ï¼Œå–å†³äºä½ æ˜¯å¦å’Œä½ çš„å°ä¼™ä¼´åˆä½œåœ¨ä¸Šé¢å¼€å‘ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œå°±æ˜¯åœ¨Gitä¸­ï¼Œåˆ†æ”¯å®Œå…¨å¯ä»¥åœ¨æœ¬åœ°è‡ªå·±è—ç€ç©ï¼Œæ˜¯å¦æ¨é€ï¼Œè§†ä½ çš„å¿ƒæƒ…è€Œå®šï¼</p>
<h4 id="æŠ“å–åˆ†æ”¯"><a href="#æŠ“å–åˆ†æ”¯" class="headerlink" title="æŠ“å–åˆ†æ”¯"></a>æŠ“å–åˆ†æ”¯</h4><p>å¤šäººåä½œæ—¶ï¼Œå¤§å®¶éƒ½ä¼šå¾€<code>master</code>å’Œ<code>dev</code>åˆ†æ”¯ä¸Šæ¨é€å„è‡ªçš„ä¿®æ”¹ã€‚</p>
<p>ç°åœ¨ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªä½ çš„åŒäº‹ï¼Œå¯ä»¥åœ¨å¦ä¸€å°ç”µè„‘ï¼ˆæ³¨æ„è¦æŠŠSSH Keyæ·»åŠ åˆ°GitHubï¼‰æˆ–è€…åŒä¸€å°ç”µè„‘çš„å¦ä¸€ä¸ªç›®å½•ä¸‹å…‹éš†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git clone git@github.com:guoyaohua/learngit.git</span><br><span class="line">Cloning into <span class="string">&#x27;learngit&#x27;</span>...</span><br><span class="line">remote: Counting objects: <span class="number">40</span>, done.</span><br><span class="line">remote: Compressing objects: <span class="number">100</span>% (<span class="number">21</span>/<span class="number">21</span>), done.</span><br><span class="line">remote: Total <span class="number">40</span> (delta <span class="number">14</span>), reused <span class="number">40</span> (delta <span class="number">14</span>), pack<span class="literal">-reused</span> <span class="number">0</span></span><br><span class="line">Receiving objects: <span class="number">100</span>% (<span class="number">40</span>/<span class="number">40</span>), done.</span><br><span class="line">Resolving deltas: <span class="number">100</span>% (<span class="number">14</span>/<span class="number">14</span>), done.</span><br></pre></td></tr></table></figure>

<p>å½“ä½ çš„åŒäº‹ä»è¿œç¨‹åº“cloneæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä½ çš„åŒäº‹åªèƒ½çœ‹åˆ°æœ¬åœ°çš„<code>master</code>åˆ†æ”¯ã€‚ä¸ä¿¡å¯ä»¥ç”¨<code>git branch</code>å‘½ä»¤çœ‹çœ‹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch</span><br><span class="line">* master</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œä½ çš„åŒäº‹è¦åœ¨<code>dev</code>åˆ†æ”¯ä¸Šå¼€å‘ï¼Œå°±å¿…é¡»åˆ›å»ºè¿œç¨‹<code>origin</code>çš„<code>dev</code>åˆ†æ”¯åˆ°æœ¬åœ°ï¼Œäºæ˜¯ä»–ç”¨è¿™ä¸ªå‘½ä»¤åˆ›å»ºæœ¬åœ°<code>dev</code>åˆ†æ”¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout <span class="literal">-b</span> dev origin/dev</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œä»–å°±å¯ä»¥åœ¨<code>dev</code>ä¸Šç»§ç»­ä¿®æ”¹ï¼Œç„¶åï¼Œæ—¶ä¸æ—¶åœ°æŠŠ<code>dev</code>åˆ†æ”¯<code>push</code>åˆ°è¿œç¨‹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add env.txt</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;add env&quot;</span></span><br><span class="line">[<span class="type">dev</span> <span class="number">7</span><span class="type">a5e5dd</span>] add env</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+)</span><br><span class="line"> create mode <span class="number">100644</span> env.txt</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git push origin dev</span><br><span class="line">Counting objects: <span class="number">3</span>, done.</span><br><span class="line">Delta compression <span class="keyword">using</span> up to 4 threads.</span><br><span class="line">Compressing objects: <span class="number">100</span>% (<span class="number">2</span>/<span class="number">2</span>), done.</span><br><span class="line">Writing objects: <span class="number">100</span>% (<span class="number">3</span>/<span class="number">3</span>), <span class="number">308</span> bytes | <span class="number">308.00</span> KiB/s, done.</span><br><span class="line">Total <span class="number">3</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">To github.com:michaelliao/learngit.git</span><br><span class="line">   f52c633..<span class="number">7</span>a5e5dd  dev -&gt; dev</span><br></pre></td></tr></table></figure>

<p>ä½ çš„åŒäº‹å·²ç»å‘<code>origin/dev</code>åˆ†æ”¯æ¨é€äº†ä»–çš„æäº¤ï¼Œè€Œç¢°å·§ä½ ä¹Ÿå¯¹åŒæ ·çš„æ–‡ä»¶ä½œäº†ä¿®æ”¹ï¼Œå¹¶è¯•å›¾æ¨é€ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">type</span> env.txt</span><br><span class="line">env</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git add env.txt</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;add new env&quot;</span></span><br><span class="line">[<span class="type">dev</span> <span class="number">7</span><span class="type">bd91f1</span>] add new env</span><br><span class="line"> <span class="number">1</span> file changed, <span class="number">1</span> insertion(+)</span><br><span class="line"> create mode <span class="number">100644</span> env.txt</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git push origin dev</span><br><span class="line">To github.com:michaelliao/learngit.git</span><br><span class="line"> ! [<span class="type">rejected</span>]        dev -&gt; dev (non<span class="literal">-fast</span><span class="literal">-forward</span>)</span><br><span class="line">error: failed to push some refs to <span class="string">&#x27;git@github.com:guoyaohua/learngit.git&#x27;</span></span><br><span class="line">hint: Updates were rejected because the tip of your current branch is behind</span><br><span class="line">hint: its remote counterpart. Integrate the remote changes (e.g.</span><br><span class="line">hint: <span class="string">&#x27;git pull ...&#x27;</span>) before pushing again.</span><br><span class="line">hint: See the <span class="string">&#x27;Note about fast-forwards&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;git push --help&#x27;</span> <span class="keyword">for</span> details.</span><br></pre></td></tr></table></figure>

<p>æ¨é€å¤±è´¥ï¼Œå› ä¸ºä½ çš„åŒäº‹çš„æœ€æ–°æäº¤å’Œä½ è¯•å›¾æ¨é€çš„æäº¤æœ‰å†²çªï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼ŒGitå·²ç»æç¤ºæˆ‘ä»¬ï¼Œå…ˆç”¨<code>git pull</code>æŠŠæœ€æ–°çš„æäº¤ä»<code>origin/dev</code>æŠ“ä¸‹æ¥ï¼Œç„¶åï¼Œåœ¨æœ¬åœ°åˆå¹¶ï¼Œè§£å†³å†²çªï¼Œå†æ¨é€ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git pull</span><br><span class="line">There is no tracking information <span class="keyword">for</span> the current branch.</span><br><span class="line">Please specify which branch you want to merge with.</span><br><span class="line">See git<span class="literal">-pull</span>(<span class="number">1</span>) <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">    git pull &lt;remote&gt; &lt;branch&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span> you wish to <span class="built_in">set</span> tracking information <span class="keyword">for</span> this branch you can <span class="keyword">do</span> so with:</span><br><span class="line"></span><br><span class="line">    git branch -<span class="literal">-set</span><span class="literal">-upstream</span><span class="literal">-to</span>=origin/&lt;branch&gt; dev</span><br></pre></td></tr></table></figure>

<p><code>git pull</code>ä¹Ÿå¤±è´¥äº†ï¼ŒåŸå› æ˜¯æ²¡æœ‰æŒ‡å®šæœ¬åœ°<code>dev</code>åˆ†æ”¯ä¸è¿œç¨‹<code>origin/dev</code>åˆ†æ”¯çš„é“¾æ¥ï¼Œæ ¹æ®æç¤ºï¼Œè®¾ç½®<code>dev</code>å’Œ<code>origin/dev</code>çš„é“¾æ¥ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch -<span class="literal">-set</span><span class="literal">-upstream</span><span class="literal">-to</span>=origin/dev dev</span><br><span class="line">Branch <span class="string">&#x27;dev&#x27;</span> <span class="built_in">set</span> up to track remote branch <span class="string">&#x27;dev&#x27;</span> from <span class="string">&#x27;origin&#x27;</span>.</span><br></pre></td></tr></table></figure>

<p>å†pullï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git pull</span><br><span class="line">Auto<span class="literal">-merging</span> env.txt</span><br><span class="line">CONFLICT (add/add): Merge conflict <span class="keyword">in</span> env.txt</span><br><span class="line">Automatic merge failed; fix conflicts and then commit the result.</span><br></pre></td></tr></table></figure>

<p>è¿™å›<code>git pull</code>æˆåŠŸï¼Œä½†æ˜¯åˆå¹¶æœ‰å†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ï¼Œè§£å†³çš„æ–¹æ³•å’Œåˆ†æ”¯ç®¡ç†ä¸­çš„è§£å†³å†²çªå®Œå…¨ä¸€æ ·ã€‚è§£å†³åï¼Œæäº¤ï¼Œå†pushï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git commit <span class="literal">-m</span> <span class="string">&quot;fix env conflict&quot;</span></span><br><span class="line">[<span class="type">dev</span> <span class="number">57</span><span class="type">c53ab</span>] fix env conflict</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> git push origin dev</span><br><span class="line">Counting objects: <span class="number">6</span>, done.</span><br><span class="line">Delta compression <span class="keyword">using</span> up to 4 threads.</span><br><span class="line">Compressing objects: <span class="number">100</span>% (<span class="number">4</span>/<span class="number">4</span>), done.</span><br><span class="line">Writing objects: <span class="number">100</span>% (<span class="number">6</span>/<span class="number">6</span>), <span class="number">621</span> bytes | <span class="number">621.00</span> KiB/s, done.</span><br><span class="line">Total <span class="number">6</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">To git@github.com:guoyaohua/learngit.git</span><br><span class="line">   <span class="number">7</span>a5e5dd..<span class="number">57</span>c53ab  dev -&gt; dev</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œå¤šäººåä½œçš„å·¥ä½œæ¨¡å¼é€šå¸¸æ˜¯è¿™æ ·ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œå¯ä»¥è¯•å›¾ç”¨<code>git push origin &lt;branch-name&gt;</code>æ¨é€è‡ªå·±çš„ä¿®æ”¹ï¼›</li>
<li>å¦‚æœæ¨é€å¤±è´¥ï¼Œåˆ™å› ä¸ºè¿œç¨‹åˆ†æ”¯æ¯”ä½ çš„æœ¬åœ°æ›´æ–°ï¼Œéœ€è¦å…ˆç”¨<code>git pull</code>è¯•å›¾åˆå¹¶ï¼›</li>
<li>å¦‚æœåˆå¹¶æœ‰å†²çªï¼Œåˆ™è§£å†³å†²çªï¼Œå¹¶åœ¨æœ¬åœ°æäº¤ï¼›</li>
<li>æ²¡æœ‰å†²çªæˆ–è€…è§£å†³æ‰å†²çªåï¼Œå†ç”¨<code>git push origin &lt;branch-name&gt;</code>æ¨é€å°±èƒ½æˆåŠŸï¼</li>
</ol>
<p>å¦‚æœ<code>git pull</code>æç¤º<code>no tracking information</code>ï¼Œåˆ™è¯´æ˜æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„é“¾æ¥å…³ç³»æ²¡æœ‰åˆ›å»ºï¼Œç”¨å‘½ä»¤<code>git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;</code>ã€‚</p>
<p>è¿™å°±æ˜¯å¤šäººåä½œçš„å·¥ä½œæ¨¡å¼ï¼Œä¸€æ—¦ç†Ÿæ‚‰äº†ï¼Œå°±éå¸¸ç®€å•ã€‚</p>
<h3 id="Rebase"><a href="#Rebase" class="headerlink" title="Rebase"></a>Rebase</h3><p><code>git rebase</code>å’Œ<code>git merge</code>åšçš„äº‹å…¶å®æ˜¯ä¸€æ ·çš„ã€‚å®ƒä»¬éƒ½è¢«è®¾è®¡æ¥å°†ä¸€ä¸ªåˆ†æ”¯çš„æ›´æ”¹å¹¶å…¥å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œåªä¸è¿‡æ–¹å¼æœ‰äº›ä¸åŒã€‚</p>
<p><code>git rebase</code>ç”¨äºæŠŠä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚</p>
<p>å‡è®¾ä½ ç°åœ¨åŸºäºè¿œç¨‹åˆ†æ”¯â€originâ€ï¼Œåˆ›å»ºä¸€ä¸ªå«â€myworkâ€çš„åˆ†æ”¯ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout <span class="literal">-b</span> mywork origin</span><br></pre></td></tr></table></figure>

<p>å‡è®¾è¿œç¨‹åˆ†æ”¯â€originâ€å·²ç»æœ‰äº†2ä¸ªæäº¤ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/rebase0.png" alt="img"></p>
<p>ç°åœ¨æˆ‘ä»¬åœ¨è¿™ä¸ªåˆ†æ”¯åšä¸€äº›ä¿®æ”¹ï¼Œç„¶åç”Ÿæˆä¸¤ä¸ªæäº¤(commit)ã€‚</p>
<p>ä½†æ˜¯ä¸æ­¤åŒæ—¶ï¼Œæœ‰äº›äººä¹Ÿåœ¨â€originâ€åˆ†æ”¯ä¸Šåšäº†ä¸€äº›ä¿®æ”¹å¹¶ä¸”åšäº†æäº¤äº†. è¿™å°±æ„å‘³ç€â€originâ€å’Œâ€myworkâ€è¿™ä¸¤ä¸ªåˆ†æ”¯å„è‡ªâ€å‰è¿›â€äº†ï¼Œå®ƒä»¬ä¹‹é—´â€åˆ†å‰â€äº†ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/rebase1.png" alt="img"></p>
<p>åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥ç”¨â€œpullâ€å‘½ä»¤æŠŠâ€œoriginâ€åˆ†æ”¯ä¸Šçš„ä¿®æ”¹æ‹‰ä¸‹æ¥å¹¶ä¸”å’Œä½ çš„ä¿®æ”¹åˆå¹¶ï¼› ç»“æœçœ‹èµ·æ¥å°±åƒä¸€ä¸ªæ–°çš„â€åˆå¹¶çš„æäº¤â€(merge commit):</p>
<p><img src="http://pic.guoyaohua.com/image/git/rebase2.png" alt="img"></p>
<p>ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³è®©â€œmyworkâ€åˆ†æ”¯å†å²çœ‹èµ·æ¥åƒæ²¡æœ‰ç»è¿‡ä»»ä½•åˆå¹¶ä¸€æ ·ï¼Œä½ ä¹Ÿè®¸å¯ä»¥ç”¨ <code>git rebase</code>ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git checkout mywork</span><br><span class="line"><span class="variable">$</span> git rebase origin</span><br></pre></td></tr></table></figure>

<p>è¿™äº›å‘½ä»¤ä¼šæŠŠä½ çš„â€myworkâ€åˆ†æ”¯é‡Œçš„æ¯ä¸ªæäº¤(commit)å–æ¶ˆæ‰ï¼Œå¹¶ä¸”æŠŠå®ƒä»¬ä¸´æ—¶ä¿å­˜ä¸ºè¡¥ä¸(patch)(è¿™äº›è¡¥ä¸æ”¾åˆ°â€.git/rebaseâ€ç›®å½•ä¸­)ï¼Œç„¶åæŠŠâ€myworkâ€åˆ†æ”¯æ›´æ–°ä¸ºæœ€æ–°çš„â€originâ€åˆ†æ”¯ï¼Œæœ€åæŠŠä¿å­˜çš„è¿™äº›è¡¥ä¸åº”ç”¨åˆ°â€myworkâ€åˆ†æ”¯ä¸Šã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/rebase3.png" alt="img"></p>
<p>å½“â€myworkâ€åˆ†æ”¯æ›´æ–°ä¹‹åï¼Œå®ƒä¼šæŒ‡å‘è¿™äº›æ–°åˆ›å»ºçš„æäº¤(commit)ï¼Œè€Œé‚£äº›è€çš„æäº¤ä¼šè¢«ä¸¢å¼ƒã€‚ å¦‚æœè¿è¡Œåƒåœ¾æ”¶é›†å‘½ä»¤(pruning garbage collection)ï¼Œè¿™äº›è¢«ä¸¢å¼ƒçš„æäº¤å°±ä¼šåˆ é™¤ã€‚</p>
<p><img src="http://pic.guoyaohua.com/image/git/rebase4.png" alt="img"></p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ç”¨mergeå’Œç”¨rebaseæ‰€äº§ç”Ÿçš„å†å²çš„åŒºåˆ«ï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/1563677573806.png" alt="1563677573806"></p>
<p><img src="http://pic.guoyaohua.com/image/git/rebase2.png" alt="img"></p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨<code>git log</code>æ¥å‚çœ‹commitæ—¶ï¼Œå…¶commitçš„é¡ºåºä¹Ÿæœ‰æ‰€ä¸åŒã€‚</p>
<p>å‡è®¾C3æäº¤äº<code>9:00AM</code>ï¼ŒC5æäº¤äº<code>10:00AM</code>ï¼ŒC4æäº¤äº<code>11:00AM</code>ï¼ŒC6æäº¤äº<code>12:00AM</code>ï¼Œ</p>
<p>å¯¹äºä½¿ç”¨<code>git merge</code>æ¥åˆå¹¶æ‰€çœ‹åˆ°çš„commitçš„é¡ºåºï¼ˆä»æ–°åˆ°æ—§ï¼‰æ˜¯ï¼š</p>
<p>C7ï¼ŒC6ï¼ŒC4ï¼ŒC5ï¼ŒC3ï¼ŒC2ï¼ŒC1</p>
<p>å¯¹äºä½¿ç”¨git rebaseæ¥åˆå¹¶æ‰€çœ‹åˆ°çš„commitçš„é¡ºåºï¼ˆä»æ–°åˆ°æ—§ï¼‰æ˜¯ï¼š</p>
<p>C7ï¼ŒC6â€™ï¼ŒC5â€™ï¼ŒC4ï¼ŒC3ï¼ŒC2ï¼ŒC1</p>
<p>å› ä¸ºC6â€™æäº¤åªæ˜¯C6æäº¤çš„å…‹éš†ï¼ŒC5â€™æäº¤åªæ˜¯C5æäº¤çš„å…‹éš†ï¼Œ</p>
<p>ä»ç”¨æˆ·çš„è§’åº¦çœ‹ä½¿ç”¨<code>git rebase</code>æ¥åˆå¹¶åæ‰€çœ‹åˆ°çš„commitçš„é¡ºåºï¼ˆä»æ–°åˆ°æ—§ï¼‰æ˜¯ï¼š</p>
<p>C7ï¼ŒC6ï¼ŒC5ï¼ŒC4ï¼ŒC3ï¼ŒC2ï¼ŒC1</p>
<p>å¦å¤–ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨<code>git pull</code>å‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨<code>--rebase</code>å‚æ•°ï¼Œå³<code>git pull --rebase</code>ï¼Œè¿™é‡ŒGitä¼šæŠŠä½ çš„æœ¬åœ°å½“å‰åˆ†æ”¯é‡Œçš„æ¯ä¸ªæäº¤(commit)å–æ¶ˆæ‰ï¼Œå¹¶ä¸”æŠŠå®ƒä»¬ä¸´æ—¶ä¿å­˜ä¸ºè¡¥ä¸(patch)(è¿™äº›è¡¥ä¸æ”¾åˆ°â€.git/rebaseâ€ç›®å½•ä¸­),ç„¶åæŠŠåˆ†æ”¯æ›´æ–° ä¸ºæœ€æ–°çš„â€originâ€åˆ†æ”¯ï¼Œæœ€åæŠŠä¿å­˜çš„è¿™äº›è¡¥ä¸åº”ç”¨åˆ°åˆ†æ”¯ä¸Šã€‚</p>
<h4 id="è§£å†³å†²çª-1"><a href="#è§£å†³å†²çª-1" class="headerlink" title="è§£å†³å†²çª"></a>è§£å†³å†²çª</h4><p>åœ¨rebaseçš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè®¸ä¼šå‡ºç°å†²çª(conflict)ã€‚åœ¨è¿™ç§æƒ…å†µï¼ŒGitä¼šåœæ­¢rebaseå¹¶ä¼šè®©ä½ å»è§£å†³å†²çªã€‚rebaseå’Œmergeçš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯rebaseçš„å†²çªæ˜¯ä¸€ä¸ªä¸€ä¸ªè§£å†³ï¼Œå¦‚æœæœ‰åä¸ªå†²çªï¼Œåœ¨è§£å†³å®Œç¬¬ä¸€ä¸ªå†²çªåï¼Œç”¨â€<code>git add</code>â€œå‘½ä»¤å»æ›´æ–°è¿™äº›å†…å®¹çš„ç´¢å¼•(index)ï¼Œç„¶åï¼Œä½ æ— éœ€æ‰§è¡Œ git-commitï¼Œåªè¦æ‰§è¡Œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add <span class="literal">-u</span> </span><br><span class="line"><span class="variable">$</span> git rebase -<span class="literal">-continue</span></span><br></pre></td></tr></table></figure>

<p>ç»§ç»­åæ‰ä¼šå‡ºç°ç¬¬äºŒä¸ªå†²çªï¼Œç›´åˆ°æ‰€æœ‰å†²çªè§£å†³å®Œï¼Œè€Œmergeæ˜¯æ‰€æœ‰çš„å†²çªéƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>åœ¨ä»»ä½•æ—¶å€™ï¼Œä½ å¯ä»¥ç”¨<code>--abort</code>å‚æ•°æ¥ç»ˆæ­¢rebaseçš„è¡ŒåŠ¨ï¼Œå¹¶ä¸”â€myworkâ€ åˆ†æ”¯ä¼šå›åˆ°rebaseå¼€å§‹å‰çš„çŠ¶æ€ã€‚</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git rebase -<span class="literal">-abort</span></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥rebaseçš„å·¥ä½œæµå°±æ˜¯</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">git rebase </span><br><span class="line"><span class="keyword">while</span>(å­˜åœ¨å†²çª) &#123;</span><br><span class="line">    git status</span><br><span class="line">    <span class="comment"># æ‰¾åˆ°å½“å‰å†²çªæ–‡ä»¶ï¼Œç¼–è¾‘è§£å†³å†²çª</span></span><br><span class="line">    git add <span class="literal">-u</span></span><br><span class="line">    git rebase -<span class="literal">-continue</span></span><br><span class="line">    <span class="keyword">if</span>( git rebase -<span class="literal">-abort</span> )</span><br><span class="line">        <span class="keyword">break</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åå†²çªå…¨éƒ¨è§£å†³ï¼ŒrebaseæˆåŠŸã€‚</p>
<h2 id="æ ‡ç­¾ç®¡ç†"><a href="#æ ‡ç­¾ç®¡ç†" class="headerlink" title="æ ‡ç­¾ç®¡ç†"></a>æ ‡ç­¾ç®¡ç†</h2><p>å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å…ˆåœ¨ç‰ˆæœ¬åº“ä¸­æ‰“ä¸€ä¸ªæ ‡ç­¾ï¼ˆtagï¼‰ï¼Œè¿™æ ·ï¼Œå°±å”¯ä¸€ç¡®å®šäº†æ‰“æ ‡ç­¾æ—¶åˆ»çš„ç‰ˆæœ¬ã€‚å°†æ¥æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œå–æŸä¸ªæ ‡ç­¾çš„ç‰ˆæœ¬ï¼Œå°±æ˜¯æŠŠé‚£ä¸ªæ‰“æ ‡ç­¾çš„æ—¶åˆ»çš„å†å²ç‰ˆæœ¬å–å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œæ ‡ç­¾ä¹Ÿæ˜¯ç‰ˆæœ¬åº“çš„ä¸€ä¸ªå¿«ç…§ã€‚</p>
<p>Gitçš„æ ‡ç­¾è™½ç„¶æ˜¯ç‰ˆæœ¬åº“çš„å¿«ç…§ï¼Œä½†å…¶å®å®ƒå°±æ˜¯æŒ‡å‘æŸä¸ªcommitçš„æŒ‡é’ˆï¼ˆè·Ÿåˆ†æ”¯å¾ˆåƒï¼Œä½†æ˜¯åˆ†æ”¯å¯ä»¥ç§»åŠ¨ï¼Œæ ‡ç­¾ä¸èƒ½ç§»åŠ¨ï¼‰ï¼Œæ‰€ä»¥ï¼Œåˆ›å»ºå’Œåˆ é™¤æ ‡ç­¾éƒ½æ˜¯ç¬é—´å®Œæˆçš„ã€‚</p>
<p>Gitæœ‰commitï¼Œä¸ºä»€ä¹ˆè¿˜è¦å¼•å…¥tagï¼Ÿ</p>
<p>â€œè¯·æŠŠä¸Šå‘¨ä¸€çš„é‚£ä¸ªç‰ˆæœ¬æ‰“åŒ…å‘å¸ƒï¼Œcommitå·æ˜¯6a5819eâ€¦â€</p>
<p>â€œä¸€ä¸²ä¹±ä¸ƒå…«ç³Ÿçš„æ•°å­—ä¸å¥½æ‰¾ï¼â€</p>
<p>å¦‚æœæ¢ä¸€ä¸ªåŠæ³•ï¼š</p>
<p>â€œè¯·æŠŠä¸Šå‘¨ä¸€çš„é‚£ä¸ªç‰ˆæœ¬æ‰“åŒ…å‘å¸ƒï¼Œç‰ˆæœ¬å·æ˜¯v1.2â€</p>
<p>â€œå¥½çš„ï¼ŒæŒ‰ç…§tag v1.2æŸ¥æ‰¾commitå°±è¡Œï¼â€</p>
<p>æ‰€ä»¥ï¼Œtagå°±æ˜¯ä¸€ä¸ªè®©äººå®¹æ˜“è®°ä½çš„æœ‰æ„ä¹‰çš„åå­—ï¼Œå®ƒè·ŸæŸä¸ªcommitç»‘åœ¨ä¸€èµ·ã€‚</p>
<h3 id="åˆ›å»ºæ ‡ç­¾"><a href="#åˆ›å»ºæ ‡ç­¾" class="headerlink" title="åˆ›å»ºæ ‡ç­¾"></a>åˆ›å»ºæ ‡ç­¾</h3><p>åœ¨Gitä¸­æ‰“æ ‡ç­¾éå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œåˆ‡æ¢åˆ°éœ€è¦æ‰“æ ‡ç­¾çš„åˆ†æ”¯ä¸Šï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git branch</span><br><span class="line">* dev</span><br><span class="line">  master</span><br><span class="line"><span class="variable">$</span> git checkout master</span><br><span class="line">Switched to branch <span class="string">&#x27;master&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œæ•²å‘½ä»¤<code>git tag &lt;name&gt;</code>å°±å¯ä»¥æ‰“ä¸€ä¸ªæ–°æ ‡ç­¾ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git tag v1.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ç”¨å‘½ä»¤<code>git tag</code>æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git tag</span><br><span class="line">v1.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æ ‡ç­¾æ˜¯æ‰“åœ¨æœ€æ–°æäº¤çš„commitä¸Šçš„ã€‚æœ‰æ—¶å€™ï¼Œå¦‚æœå¿˜äº†æ‰“æ ‡ç­¾ï¼Œæ¯”å¦‚ï¼Œç°åœ¨å·²ç»æ˜¯å‘¨äº”äº†ï¼Œä½†åº”è¯¥åœ¨å‘¨ä¸€æ‰“çš„æ ‡ç­¾æ²¡æœ‰æ‰“ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
<p>æ–¹æ³•æ˜¯æ‰¾åˆ°å†å²æäº¤çš„commit idï¼Œç„¶åæ‰“ä¸Šå°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git log -<span class="literal">-pretty</span>=oneline -<span class="literal">-abbrev</span><span class="literal">-commit</span></span><br><span class="line"><span class="number">12</span>a631b (HEAD -&gt; master, tag: v1.<span class="number">0</span>, origin/master) merged bug fix <span class="number">101</span></span><br><span class="line"><span class="number">4</span>c805e2 fix bug <span class="number">101</span></span><br><span class="line">e1e9c68 merge with no<span class="literal">-ff</span></span><br><span class="line">f52c633 add merge</span><br><span class="line">cf810e4 conflict fixed</span><br><span class="line"><span class="number">5</span>dc6824 &amp; simple</span><br><span class="line"><span class="number">14096</span>d0 AND simple</span><br><span class="line">b17d20e branch test</span><br><span class="line">d46f35e remove test.txt</span><br><span class="line">b84166e add test.txt</span><br><span class="line"><span class="number">519219</span>b git tracks changes</span><br><span class="line">e43a48b understand how stage works</span><br><span class="line"><span class="number">1094</span>adb append GPL</span><br><span class="line">e475afc add distributed</span><br><span class="line">eaadf4e wrote a readme file</span><br></pre></td></tr></table></figure>

<p>æ¯”æ–¹è¯´è¦å¯¹<code>add merge</code>è¿™æ¬¡æäº¤æ‰“æ ‡ç­¾ï¼Œå®ƒå¯¹åº”çš„commit idæ˜¯<code>f52c633</code>ï¼Œæ•²å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git tag v0.<span class="number">9</span> f52c633</span><br></pre></td></tr></table></figure>

<p>å†ç”¨å‘½ä»¤<code>git tag</code>æŸ¥çœ‹æ ‡ç­¾ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git tag</span><br><span class="line">v0.<span class="number">9</span></span><br><span class="line">v1.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œæ ‡ç­¾ä¸æ˜¯æŒ‰æ—¶é—´é¡ºåºåˆ—å‡ºï¼Œè€Œæ˜¯æŒ‰å­—æ¯æ’åºçš„ã€‚å¯ä»¥ç”¨<code>git show &lt;tagname&gt;</code>æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git show v0.<span class="number">9</span></span><br><span class="line">commit f52c63349bc3c1593499807e5c8e972b82c8f286 (tag: v0.<span class="number">9</span>)</span><br><span class="line">Author: Yaohua Guo &lt;guo.yaohua@foxmail.com&gt;</span><br><span class="line">Date:   Fri May <span class="number">18</span> <span class="number">21</span>:<span class="number">56</span>:<span class="number">54</span> <span class="number">2018</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    add merge</span><br><span class="line"></span><br><span class="line"><span class="built_in">diff</span> -<span class="literal">-git</span> a/readme.txt b/readme.txt</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>v0.9</code>ç¡®å®æ‰“åœ¨<code>add merge</code>è¿™æ¬¡æäº¤ä¸Šã€‚</p>
<p>è¿˜å¯ä»¥åˆ›å»ºå¸¦æœ‰è¯´æ˜çš„æ ‡ç­¾ï¼Œç”¨<code>-a</code>æŒ‡å®šæ ‡ç­¾åï¼Œ<code>-m</code>æŒ‡å®šè¯´æ˜æ–‡å­—ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git tag <span class="literal">-a</span> v0.<span class="number">1</span> <span class="literal">-m</span> <span class="string">&quot;version 0.1 released&quot;</span> <span class="number">1094</span>adb</span><br></pre></td></tr></table></figure>

<p>ç”¨å‘½ä»¤<code>git show &lt;tagname&gt;</code>å¯ä»¥çœ‹åˆ°è¯´æ˜æ–‡å­—ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git show v0.<span class="number">1</span></span><br><span class="line">tag v0.<span class="number">1</span></span><br><span class="line">Tagger: Yaohua Guo &lt;guo.yaohua@foxmail.com&gt;</span><br><span class="line">Date:   Fri May <span class="number">18</span> <span class="number">22</span>:<span class="number">48</span>:<span class="number">43</span> <span class="number">2018</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">version <span class="number">0.1</span> released</span><br><span class="line"></span><br><span class="line">commit <span class="number">1094</span>adb7b9b3807259d8cb349e7df1d4d6477073 (tag: v0.<span class="number">1</span>)</span><br><span class="line">Author: Yaohua Guo &lt;guo.yaohua@foxmail.com&gt;</span><br><span class="line">Date:   Fri May <span class="number">18</span> <span class="number">21</span>:<span class="number">06</span>:<span class="number">15</span> <span class="number">2018</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    append GPL</span><br><span class="line"></span><br><span class="line"><span class="built_in">diff</span> -<span class="literal">-git</span> a/readme.txt b/readme.txt</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="æ“ä½œæ ‡ç­¾"><a href="#æ“ä½œæ ‡ç­¾" class="headerlink" title="æ“ä½œæ ‡ç­¾"></a>æ“ä½œæ ‡ç­¾</h3><p>å¦‚æœæ ‡ç­¾æ‰“é”™äº†ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git tag <span class="literal">-d</span> v0.<span class="number">1</span></span><br><span class="line">Deleted tag <span class="string">&#x27;v0.1&#x27;</span> (was f15b0dd)</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºåˆ›å»ºçš„æ ‡ç­¾éƒ½åªå­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨æ¨é€åˆ°è¿œç¨‹ã€‚æ‰€ä»¥ï¼Œæ‰“é”™çš„æ ‡ç­¾å¯ä»¥åœ¨æœ¬åœ°å®‰å…¨åˆ é™¤ã€‚</p>
<p>å¦‚æœè¦æ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹ï¼Œä½¿ç”¨å‘½ä»¤<code>git push origin &lt;tagname&gt;</code>ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git push origin v1.<span class="number">0</span></span><br><span class="line">Total <span class="number">0</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">To git@github.com:guoyaohua/learngit.git</span><br><span class="line"> * [<span class="type">new</span> <span class="type">tag</span>]         v1.<span class="number">0</span> -&gt; v1.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ï¼Œä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨å°šæœªæ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°æ ‡ç­¾ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git push origin -<span class="literal">-tags</span></span><br><span class="line">Total <span class="number">0</span> (delta <span class="number">0</span>), reused <span class="number">0</span> (delta <span class="number">0</span>)</span><br><span class="line">To git@github.com:guoyaohua/learngit.git</span><br><span class="line"> * [<span class="type">new</span> <span class="type">tag</span>]         v0.<span class="number">9</span> -&gt; v0.<span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ ‡ç­¾å·²ç»æ¨é€åˆ°è¿œç¨‹ï¼Œè¦åˆ é™¤è¿œç¨‹æ ‡ç­¾å°±éº»çƒ¦ä¸€ç‚¹ï¼Œå…ˆä»æœ¬åœ°åˆ é™¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git tag <span class="literal">-d</span> v0.<span class="number">9</span></span><br><span class="line">Deleted tag <span class="string">&#x27;v0.9&#x27;</span> (was f52c633)</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œä»è¿œç¨‹åˆ é™¤ã€‚åˆ é™¤å‘½ä»¤ä¹Ÿæ˜¯pushï¼Œä½†æ˜¯æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git push origin :refs/tags/v0.<span class="number">9</span></span><br><span class="line">To git@github.com:guoyaohua/learngit.git</span><br><span class="line"> - [<span class="type">deleted</span>]         v0.<span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>è¦çœ‹çœ‹æ˜¯å¦çœŸçš„ä»è¿œç¨‹åº“åˆ é™¤äº†æ ‡ç­¾ï¼Œå¯ä»¥ç™»é™†GitHubæŸ¥çœ‹ã€‚</p>
<h2 id="è‡ªå®šä¹‰Git"><a href="#è‡ªå®šä¹‰Git" class="headerlink" title="è‡ªå®šä¹‰Git"></a>è‡ªå®šä¹‰Git</h2><h3 id="å¿½ç•¥ç‰¹æ®Šæ–‡ä»¶"><a href="#å¿½ç•¥ç‰¹æ®Šæ–‡ä»¶" class="headerlink" title="å¿½ç•¥ç‰¹æ®Šæ–‡ä»¶"></a>å¿½ç•¥ç‰¹æ®Šæ–‡ä»¶</h3><p>æœ‰äº›æ—¶å€™ï¼Œä½ å¿…é¡»æŠŠæŸäº›æ–‡ä»¶æ”¾åˆ°Gitå·¥ä½œç›®å½•ä¸­ï¼Œä½†åˆä¸èƒ½æäº¤å®ƒä»¬ï¼Œæ¯”å¦‚ä¿å­˜äº†æ•°æ®åº“å¯†ç çš„é…ç½®æ–‡ä»¶å•¦ï¼Œç­‰ç­‰ï¼Œæ¯æ¬¡<code>git status</code>éƒ½ä¼šæ˜¾ç¤º<code>Untracked files ...</code>ï¼Œæœ‰å¼ºè¿«ç—‡çš„æœ‹å‹å¿ƒé‡Œè‚¯å®šä¸çˆ½ã€‚</p>
<p>å¥½åœ¨Gitè€ƒè™‘åˆ°äº†å¤§å®¶çš„æ„Ÿå—ï¼Œè¿™ä¸ªé—®é¢˜è§£å†³èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨Gitå·¥ä½œåŒºçš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„<code>.gitignore</code>æ–‡ä»¶ï¼Œç„¶åæŠŠè¦å¿½ç•¥çš„æ–‡ä»¶åå¡«è¿›å»ï¼ŒGitå°±ä¼šè‡ªåŠ¨å¿½ç•¥è¿™äº›æ–‡ä»¶ã€‚</p>
<p>ä¸éœ€è¦ä»å¤´å†™<code>.gitignore</code>æ–‡ä»¶ï¼ŒGitHubå·²ç»ä¸ºæˆ‘ä»¬å‡†å¤‡äº†å„ç§é…ç½®æ–‡ä»¶ï¼Œåªéœ€è¦ç»„åˆä¸€ä¸‹å°±å¯ä»¥ä½¿ç”¨äº†ã€‚æ‰€æœ‰é…ç½®æ–‡ä»¶å¯ä»¥ç›´æ¥åœ¨çº¿æµè§ˆï¼š<a href="https://github.com/github/gitignore">https://github.com/github/gitignore</a></p>
<p>å¿½ç•¥æ–‡ä»¶çš„åŸåˆ™æ˜¯ï¼š</p>
<ol>
<li>å¿½ç•¥æ“ä½œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ¯”å¦‚ç¼©ç•¥å›¾ç­‰ï¼›</li>
<li>å¿½ç•¥ç¼–è¯‘ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶ç­‰ï¼Œä¹Ÿå°±æ˜¯å¦‚æœä¸€ä¸ªæ–‡ä»¶æ˜¯é€šè¿‡å¦ä¸€ä¸ªæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œé‚£è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶å°±æ²¡å¿…è¦æ”¾è¿›ç‰ˆæœ¬åº“ï¼Œæ¯”å¦‚Javaç¼–è¯‘äº§ç”Ÿçš„<code>.class</code>æ–‡ä»¶ï¼›</li>
<li>å¿½ç•¥ä½ è‡ªå·±çš„å¸¦æœ‰æ•æ„Ÿä¿¡æ¯çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚å­˜æ”¾å£ä»¤çš„é…ç½®æ–‡ä»¶ã€‚</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>å‡è®¾ä½ åœ¨Windowsä¸‹è¿›è¡ŒPythonå¼€å‘ï¼ŒWindowsä¼šè‡ªåŠ¨åœ¨æœ‰å›¾ç‰‡çš„ç›®å½•ä¸‹ç”Ÿæˆéšè—çš„ç¼©ç•¥å›¾æ–‡ä»¶ï¼Œå¦‚æœæœ‰è‡ªå®šä¹‰ç›®å½•ï¼Œç›®å½•ä¸‹å°±ä¼šæœ‰<code>Desktop.ini</code>æ–‡ä»¶ï¼Œå› æ­¤ä½ éœ€è¦å¿½ç•¥Windowsè‡ªåŠ¨ç”Ÿæˆçš„åƒåœ¾æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Windows:</span><br><span class="line">Thumbs.db</span><br><span class="line">ehthumbs.db</span><br><span class="line">Desktop.ini</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œç»§ç»­å¿½ç•¥Pythonç¼–è¯‘äº§ç”Ÿçš„<code>.pyc</code>ã€<code>.pyo</code>ã€<code>dist</code>ç­‰æ–‡ä»¶æˆ–ç›®å½•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Python:</span><br><span class="line">*.py[cod]</span><br><span class="line">*.so</span><br><span class="line">*.egg</span><br><span class="line">*.egg-info</span><br><span class="line">dist</span><br><span class="line">build</span><br></pre></td></tr></table></figure>

<p>åŠ ä¸Šä½ è‡ªå·±å®šä¹‰çš„æ–‡ä»¶ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„<code>.gitignore</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Windows:</span><br><span class="line">Thumbs.db</span><br><span class="line">ehthumbs.db</span><br><span class="line">Desktop.ini</span><br><span class="line"></span><br><span class="line"># Python:</span><br><span class="line">*.py[cod]</span><br><span class="line">*.so</span><br><span class="line">*.egg</span><br><span class="line">*.egg-info</span><br><span class="line">dist</span><br><span class="line">build</span><br><span class="line"></span><br><span class="line"># My configurations:</span><br><span class="line">db.ini</span><br><span class="line">deploy_key_rsa</span><br></pre></td></tr></table></figure>

<p>æœ€åä¸€æ­¥å°±æ˜¯æŠŠ<code>.gitignore</code>ä¹Ÿæäº¤åˆ°Gitï¼Œå°±å®Œæˆäº†ï¼å½“ç„¶æ£€éªŒ<code>.gitignore</code>çš„æ ‡å‡†æ˜¯<code>git status</code>å‘½ä»¤æ˜¯ä¸æ˜¯è¯´<code>working directory clean</code>ã€‚</p>
<p>ä½¿ç”¨Windowsçš„æœ‹å‹æ³¨æ„äº†ï¼Œå¦‚æœä½ åœ¨èµ„æºç®¡ç†å™¨é‡Œæ–°å»ºä¸€ä¸ª<code>.gitignore</code>æ–‡ä»¶ï¼Œå®ƒä¼šéå¸¸å¼±æ™ºåœ°æç¤ºä½ å¿…é¡»è¾“å…¥æ–‡ä»¶åï¼Œä½†æ˜¯åœ¨æ–‡æœ¬ç¼–è¾‘å™¨é‡Œâ€œä¿å­˜â€æˆ–è€…â€œå¦å­˜ä¸ºâ€å°±å¯ä»¥æŠŠæ–‡ä»¶ä¿å­˜ä¸º<code>.gitignore</code>äº†ã€‚</p>
<p>æœ‰äº›æ—¶å€™ï¼Œä½ æƒ³æ·»åŠ ä¸€ä¸ªæ–‡ä»¶åˆ°Gitï¼Œä½†å‘ç°æ·»åŠ ä¸äº†ï¼ŒåŸå› æ˜¯è¿™ä¸ªæ–‡ä»¶è¢«<code>.gitignore</code>å¿½ç•¥äº†ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add App.class</span><br><span class="line">The following paths are ignored by one of your .gitignore files:</span><br><span class="line">App.class</span><br><span class="line">Use <span class="operator">-f</span> <span class="keyword">if</span> you really want to add them.</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ç¡®å®æƒ³æ·»åŠ è¯¥æ–‡ä»¶ï¼Œå¯ä»¥ç”¨<code>-f</code>å¼ºåˆ¶æ·»åŠ åˆ°Gitï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git add <span class="operator">-f</span> App.class</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½ å‘ç°ï¼Œå¯èƒ½æ˜¯<code>.gitignore</code>å†™å¾—æœ‰é—®é¢˜ï¼Œéœ€è¦æ‰¾å‡ºæ¥åˆ°åº•å“ªä¸ªè§„åˆ™å†™é”™äº†ï¼Œå¯ä»¥ç”¨<code>git check-ignore</code>å‘½ä»¤æ£€æŸ¥ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git check<span class="literal">-ignore</span> <span class="literal">-v</span> App.class</span><br><span class="line">.gitignore:<span class="number">3</span>:*.class	App.class</span><br></pre></td></tr></table></figure>

<p>Gitä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œ<code>.gitignore</code>çš„ç¬¬3è¡Œè§„åˆ™å¿½ç•¥äº†è¯¥æ–‡ä»¶ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“åº”è¯¥ä¿®è®¢å“ªä¸ªè§„åˆ™ã€‚</p>
<h3 id="é…ç½®åˆ«å"><a href="#é…ç½®åˆ«å" class="headerlink" title="é…ç½®åˆ«å"></a>é…ç½®åˆ«å</h3><p>æœ‰æ²¡æœ‰ç»å¸¸æ•²é”™å‘½ä»¤ï¼Ÿæ¯”å¦‚<code>git status</code>ï¼Ÿ<code>status</code>è¿™ä¸ªå•è¯çœŸå¿ƒä¸å¥½è®°ã€‚</p>
<p>å¦‚æœæ•²<code>git st</code>å°±è¡¨ç¤º<code>git status</code>é‚£å°±ç®€å•å¤šäº†ï¼Œå½“ç„¶è¿™ç§å·æ‡’çš„åŠæ³•æˆ‘ä»¬æ˜¯æåŠ›èµæˆçš„ã€‚</p>
<p>æˆ‘ä»¬åªéœ€è¦æ•²ä¸€è¡Œå‘½ä»¤ï¼Œå‘Šè¯‰Gitï¼Œä»¥å<code>st</code>å°±è¡¨ç¤º<code>status</code>ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> alias.st status</span><br></pre></td></tr></table></figure>

<p>å¥½äº†ï¼Œç°åœ¨æ•²<code>git st</code>çœ‹çœ‹æ•ˆæœã€‚</p>
<p>å½“ç„¶è¿˜æœ‰åˆ«çš„å‘½ä»¤å¯ä»¥ç®€å†™ï¼Œå¾ˆå¤šäººéƒ½ç”¨<code>co</code>è¡¨ç¤º<code>checkout</code>ï¼Œ<code>ci</code>è¡¨ç¤º<code>commit</code>ï¼Œ<code>br</code>è¡¨ç¤º<code>branch</code>ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> alias.co checkout</span><br><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> alias.ci commit</span><br><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> alias.br branch</span><br></pre></td></tr></table></figure>

<p>ä»¥åæäº¤å°±å¯ä»¥ç®€å†™æˆï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git ci <span class="literal">-m</span> <span class="string">&quot;bala bala bala...&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>--global</code>å‚æ•°æ˜¯å…¨å±€å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™äº›å‘½ä»¤åœ¨è¿™å°ç”µè„‘çš„æ‰€æœ‰Gitä»“åº“ä¸‹éƒ½æœ‰ç”¨ã€‚</p>
<p>åœ¨æ’¤é”€ä¿®æ”¹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå‘½ä»¤<code>git reset HEAD file</code>å¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›å·¥ä½œåŒºã€‚æ—¢ç„¶æ˜¯ä¸€ä¸ªunstageæ“ä½œï¼Œå°±å¯ä»¥é…ç½®ä¸€ä¸ª<code>unstage</code>åˆ«åï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> alias.unstage <span class="string">&#x27;reset HEAD&#x27;</span></span><br></pre></td></tr></table></figure>

<p>å½“ä½ æ•²å…¥å‘½ä»¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git unstage test.py</span><br></pre></td></tr></table></figure>

<p>å®é™…ä¸ŠGitæ‰§è¡Œçš„æ˜¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git reset HEAD test.py</span><br></pre></td></tr></table></figure>

<p>é…ç½®ä¸€ä¸ª<code>git last</code>ï¼Œè®©å…¶æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ä¿¡æ¯ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> alias.last <span class="string">&#x27;log -1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œç”¨<code>git last</code>å°±èƒ½æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡çš„æäº¤ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git last</span><br><span class="line">commit adca45d317e6d8a4b23f9811c3d7b7f0f180bfe2</span><br><span class="line">Merge: bd6ae48 <span class="number">291</span>bea8</span><br><span class="line">Author: Yaohua Guo &lt;Guo.Yaohua@foxmail.com&gt;</span><br><span class="line">Date:   Thu Aug <span class="number">22</span> <span class="number">22</span>:<span class="number">49</span>:<span class="number">22</span> <span class="number">2013</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">    merge &amp; fix hello.py</span><br></pre></td></tr></table></figure>

<p>ç”šè‡³å¯ä»¥è¿›ä¸€æ­¥ç¾åŒ–æŠŠ<code>lg</code>é…ç½®æˆï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> git config -<span class="literal">-global</span> alias.lg <span class="string">&quot;log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit&quot;</span></span><br></pre></td></tr></table></figure>

<p>æ¥çœ‹çœ‹<code>git lg</code>çš„æ•ˆæœï¼š</p>
<p><img src="http://pic.guoyaohua.com/image/git/10.png" alt="img"></p>
<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>é…ç½®Gitçš„æ—¶å€™ï¼ŒåŠ ä¸Š<code>--global</code>æ˜¯é’ˆå¯¹å½“å‰ç”¨æˆ·èµ·ä½œç”¨çš„ï¼Œå¦‚æœä¸åŠ ï¼Œé‚£åªé’ˆå¯¹å½“å‰çš„ä»“åº“èµ·ä½œç”¨ã€‚</p>
<p>é…ç½®æ–‡ä»¶æ”¾å“ªäº†ï¼Ÿæ¯ä¸ªä»“åº“çš„Gité…ç½®æ–‡ä»¶éƒ½æ”¾åœ¨<code>.git/config</code>æ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">type</span> .git/config </span><br><span class="line">[<span class="type">core</span>]</span><br><span class="line">    repositoryformatversion = <span class="number">0</span></span><br><span class="line">    filemode = true</span><br><span class="line">    bare = false</span><br><span class="line">    logallrefupdates = true</span><br><span class="line">    ignorecase = true</span><br><span class="line">    precomposeunicode = true</span><br><span class="line">[<span class="type">remote</span> <span class="string">&quot;origin&quot;</span>]</span><br><span class="line">    url = git@github.com:michaelliao/learngit.git</span><br><span class="line">    fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[<span class="type">branch</span> <span class="string">&quot;master&quot;</span>]</span><br><span class="line">    remote = origin</span><br><span class="line">    merge = refs/heads/master</span><br><span class="line">[<span class="type">alias</span>]</span><br><span class="line">    last = log <span class="literal">-1</span></span><br></pre></td></tr></table></figure>

<p>åˆ«åå°±åœ¨<code>[alias]</code>åé¢ï¼Œè¦åˆ é™¤åˆ«åï¼Œç›´æ¥æŠŠå¯¹åº”çš„è¡Œåˆ æ‰å³å¯ã€‚</p>
<p>è€Œå½“å‰ç”¨æˆ·çš„Gité…ç½®æ–‡ä»¶æ”¾åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ä¸€ä¸ªéšè—æ–‡ä»¶<code>.gitconfig</code>ä¸­ï¼š</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">type</span> .gitconfig</span><br><span class="line">[<span class="type">alias</span>]</span><br><span class="line">    co = checkout</span><br><span class="line">    ci = commit</span><br><span class="line">    br = branch</span><br><span class="line">    st = status</span><br><span class="line">[<span class="type">user</span>]</span><br><span class="line">    name = Your Name</span><br><span class="line">    email = your@email.com</span><br></pre></td></tr></table></figure>

<p>é…ç½®åˆ«åä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ”¹é”™äº†ï¼Œå¯ä»¥åˆ æ‰æ–‡ä»¶é‡æ–°é€šè¿‡å‘½ä»¤é…ç½®ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li>Gitè®°å½•çš„æ˜¯æ–‡ä»¶çš„ä¿®æ”¹çŠ¶æ€ï¼Œè€Œä¸æ˜¯æ–‡ä»¶æœ¬èº«ã€‚</li>
<li>åˆå§‹åŒ–ä¸€ä¸ªGitä»“åº“ï¼Œä½¿ç”¨<code>git init</code>å‘½ä»¤ã€‚</li>
<li>æ·»åŠ æ–‡ä»¶åˆ°Gitä»“åº“ï¼Œåˆ†ä¸¤æ­¥ï¼š<ul>
<li>ä½¿ç”¨å‘½ä»¤<code>git add &lt;file&gt;</code>ï¼Œæ³¨æ„ï¼Œå¯åå¤å¤šæ¬¡ä½¿ç”¨ï¼Œæ·»åŠ å¤šä¸ªæ–‡ä»¶ï¼›</li>
<li>ä½¿ç”¨å‘½ä»¤<code>git commit -m &lt;message&gt;</code>ï¼Œå®Œæˆã€‚</li>
</ul>
</li>
<li>æ¯æ¬¡ä¿®æ”¹ï¼Œå¦‚æœä¸ç”¨<code>git add</code>åˆ°æš‚å­˜åŒºï¼Œé‚£å°±ä¸ä¼šåŠ å…¥åˆ°<code>commit</code>ä¸­ã€‚</li>
<li>æäº¤åï¼Œå¯ç”¨<code>git diff HEAD -- &lt;file_name&gt;</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«ã€‚</li>
<li>è¦å…³è”ä¸€ä¸ªè¿œç¨‹åº“ï¼Œä½¿ç”¨å‘½ä»¤<code>git remote add origin git@server-name:path/repo-name.git</code>ï¼Œä½¿ç”¨å‘½ä»¤<code>git push -u origin master</code>ç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯çš„æ‰€æœ‰å†…å®¹ï¼Œæ­¤åï¼Œæ¯æ¬¡æœ¬åœ°æäº¤åï¼Œåªè¦æœ‰å¿…è¦ï¼Œå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤<code>git push origin master</code>æ¨é€æœ€æ–°ä¿®æ”¹ã€‚</li>
<li>è¦å…‹éš†ä¸€ä¸ªä»“åº“ï¼Œé¦–å…ˆå¿…é¡»çŸ¥é“ä»“åº“çš„åœ°å€ï¼Œç„¶åä½¿ç”¨<code>git clone</code>å‘½ä»¤å…‹éš†ã€‚Gitæ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬<code>https</code>ï¼Œä½†é€šè¿‡<code>ssh</code>æ”¯æŒçš„åŸç”Ÿ<code>git</code>åè®®é€Ÿåº¦æœ€å¿«ã€‚</li>
<li>HEAD<code>æŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤</code>git reset â€“hard commit_id`ã€‚</li>
<li>ç©¿æ¢­å‰ï¼Œç”¨<code>git log</code>å¯ä»¥æŸ¥çœ‹æäº¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚</li>
<li>è¦é‡è¿”æœªæ¥ï¼Œç”¨<code>git reflog</code>æŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚</li>
<li>å½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤<code>git checkout -- file</code>ã€‚</li>
<li>å½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤<code>git reset HEAD &lt;file&gt;</code>ï¼Œç¬¬äºŒæ­¥æŒ‰ä¸Šä¸€æ¡æ“ä½œã€‚</li>
<li>å·²ç»æäº¤äº†ä¸åˆé€‚çš„ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“æ—¶ï¼Œæƒ³è¦æ’¤é”€æœ¬æ¬¡æäº¤ï¼Œå‚è€ƒç‰ˆæœ¬å›é€€ï¼Œä¸è¿‡å‰ææ˜¯æ²¡æœ‰æ¨é€åˆ°è¿œç¨‹åº“ã€‚</li>
<li>å‘½ä»¤<code>git rm</code>ç”¨äºåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶å·²ç»è¢«æäº¤åˆ°ç‰ˆæœ¬åº“ï¼Œé‚£ä¹ˆä½ æ°¸è¿œä¸ç”¨æ‹…å¿ƒè¯¯åˆ ï¼Œä½†æ˜¯è¦å°å¿ƒï¼Œä½ åªèƒ½æ¢å¤æ–‡ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½ ä¼šä¸¢å¤±<strong>æœ€è¿‘ä¸€æ¬¡æäº¤åä½ ä¿®æ”¹çš„å†…å®¹</strong>ã€‚</li>
<li>Gité¼“åŠ±å¤§é‡ä½¿ç”¨åˆ†æ”¯ï¼š<ul>
<li>æŸ¥çœ‹åˆ†æ”¯ï¼š<code>git branch</code></li>
<li>åˆ›å»ºåˆ†æ”¯ï¼š<code>git branch &lt;name&gt;</code></li>
<li>åˆ‡æ¢åˆ†æ”¯ï¼š<code>git checkout &lt;name&gt;</code></li>
<li>åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼š<code>git checkout -b &lt;name&gt;</code></li>
<li>åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼š<code>git merge &lt;name&gt;</code></li>
<li>åˆ é™¤åˆ†æ”¯ï¼š<code>git branch -d &lt;name&gt;</code></li>
</ul>
</li>
<li>å½“Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼Œå°±å¿…é¡»é¦–å…ˆè§£å†³å†²çªã€‚è§£å†³å†²çªåï¼Œå†æäº¤ï¼Œåˆå¹¶å®Œæˆã€‚è§£å†³å†²çªå°±æ˜¯æŠŠGitåˆå¹¶å¤±è´¥çš„æ–‡ä»¶æ‰‹åŠ¨ç¼–è¾‘ä¸ºæˆ‘ä»¬å¸Œæœ›çš„å†…å®¹ï¼Œå†æäº¤ã€‚</li>
<li>ç”¨<code>git log --graph</code>å‘½ä»¤å¯ä»¥çœ‹åˆ°åˆ†æ”¯åˆå¹¶å›¾ã€‚</li>
<li>åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Š<code>--no-ff</code>å‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åçš„å†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œ<code>fast forward</code>åˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚</li>
<li>åˆ‡æ¢åˆ†æ”¯ä½¿ç”¨<code>git checkout &lt;master&gt;</code> ï¼ŒHEADæŒ‡å‘masterï¼Œå·¥ä½œåŒºä¹Ÿæ¢å¤åˆ°masterçš„çŠ¶æ€ã€‚</li>
<li>å¼€å‘ä¸€ä¸ªæ–°featureï¼Œæœ€å¥½æ–°å»ºä¸€ä¸ªåˆ†æ”¯ã€‚</li>
<li>å¦‚æœè¦ä¸¢å¼ƒä¸€ä¸ªæ²¡æœ‰è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯ï¼Œå¯ä»¥é€šè¿‡<code>git branch -D &lt;name&gt;</code>å¼ºè¡Œåˆ é™¤ã€‚</li>
<li>æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼Œä½¿ç”¨<code>git remote -v</code>ã€‚</li>
<li>æœ¬åœ°æ–°å»ºçš„åˆ†æ”¯å¦‚æœä¸æ¨é€åˆ°è¿œç¨‹ï¼Œå¯¹å…¶ä»–äººå°±æ˜¯ä¸å¯è§çš„ã€‚</li>
<li>ä»æœ¬åœ°æ¨é€åˆ†æ”¯ï¼Œä½¿ç”¨<code>git push origin branch-name</code>ï¼Œå¦‚æœæ¨é€å¤±è´¥ï¼Œå…ˆç”¨<code>git pull</code>æŠ“å–è¿œç¨‹çš„æ–°æäº¤ã€‚</li>
<li>åœ¨æœ¬åœ°åˆ›å»ºå’Œè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„åˆ†æ”¯ï¼Œä½¿ç”¨<code>git checkout -b branch-name origin/branch-name</code>ï¼Œæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯çš„åç§°æœ€å¥½ä¸€è‡´ã€‚</li>
<li>å»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è”ï¼Œä½¿ç”¨<code>git branch --set-upstream branch-name origin/branch-name</code>ã€‚</li>
<li>ä»è¿œç¨‹æŠ“å–åˆ†æ”¯ï¼Œä½¿ç”¨<code>git pull</code>ï¼Œå¦‚æœæœ‰å†²çªï¼Œè¦å…ˆå¤„ç†å†²çªã€‚</li>
<li>å‘½ä»¤<code>git tag &lt;tagname&gt;</code>ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸º<code>HEAD</code>ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idã€‚</li>
<li>å‘½ä»¤<code>git tag -a &lt;tagname&gt; -m &quot;blablabla...&quot;</code>å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ã€‚</li>
<li>å‘½ä»¤<code>git tag</code>å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚</li>
<li>å¿½ç•¥æŸäº›æ–‡ä»¶æ—¶ï¼Œéœ€è¦ç¼–å†™<code>.gitignore</code>ã€‚</li>
<li><code>.gitignore</code>æ–‡ä»¶æœ¬èº«è¦æ”¾åˆ°ç‰ˆæœ¬åº“é‡Œï¼Œå¹¶ä¸”å¯ä»¥å¯¹<code>.gitignore</code>åšç‰ˆæœ¬ç®¡ç†ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>Sqlite3 C/C++</title>
    <url>/2021/08/11/Sqlite3-C-C/</url>
    <content><![CDATA[<h1 id="SQLite-C-C"><a href="#SQLite-C-C" class="headerlink" title="SQLite - C/C++"></a>SQLite - C/C++</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡æ˜¯ç®€å•çš„sqlite3 c++ æ¥å£åº”ç”¨ï¼Œæºè‡ª[èœé¸Ÿæ•™ç¨‹](<a href="https://www.runoob.com/sqlite/sqlite-c-cpp.html">SQLite â€“ C/C++ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a>)ï¼Œä»¥ä¾¿æŸ¥è¯¢</p>
<span id="more"></span>

<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>åœ¨ C/C++ ç¨‹åºä¸­ä½¿ç”¨ SQLite ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿æœºå™¨ä¸Šå·²ç»æœ‰ SQLite åº“ã€‚å¯ä»¥æŸ¥çœ‹ SQLite å®‰è£…ç« èŠ‚äº†è§£å®‰è£…è¿‡ç¨‹ã€‚</p>
<h2 id="C-C-æ¥å£-API"><a href="#C-C-æ¥å£-API" class="headerlink" title="C/C++ æ¥å£ API"></a>C/C++ æ¥å£ API</h2><p>ä»¥ä¸‹æ˜¯é‡è¦çš„ C&amp;C++ / SQLite æ¥å£ç¨‹åºï¼Œå¯ä»¥æ»¡è¶³æ‚¨åœ¨ C/C++ ç¨‹åºä¸­ä½¿ç”¨ SQLite æ•°æ®åº“çš„éœ€æ±‚ã€‚å¦‚æœæ‚¨éœ€è¦äº†è§£æ›´å¤šç»†èŠ‚ï¼Œè¯·æŸ¥çœ‹ SQLite å®˜æ–¹æ–‡æ¡£ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åºå·</th>
<th align="left">API &amp; æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">*<em>sqlite3_open(const char *filename, sqlite3 *<em>ppDb)</em></em> è¯¥ä¾‹ç¨‹æ‰“å¼€ä¸€ä¸ªæŒ‡å‘ SQLite æ•°æ®åº“æ–‡ä»¶çš„è¿æ¥ï¼Œè¿”å›ä¸€ä¸ªç”¨äºå…¶ä»– SQLite ç¨‹åºçš„æ•°æ®åº“è¿æ¥å¯¹è±¡ã€‚å¦‚æœ <em>filename</em> å‚æ•°æ˜¯ NULL æˆ– â€˜:memory:â€™ï¼Œé‚£ä¹ˆ sqlite3_open() å°†ä¼šåœ¨ RAM ä¸­åˆ›å»ºä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œè¿™åªä¼šåœ¨ session çš„æœ‰æ•ˆæ—¶é—´å†…æŒç»­ã€‚å¦‚æœæ–‡ä»¶å filename ä¸ä¸º NULLï¼Œé‚£ä¹ˆ sqlite3_open() å°†ä½¿ç”¨è¿™ä¸ªå‚æ•°å€¼å°è¯•æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ã€‚å¦‚æœè¯¥åç§°çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œsqlite3_open() å°†åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åä¸ºè¯¥åç§°çš„æ•°æ®åº“æ–‡ä»¶å¹¶æ‰“å¼€ã€‚</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>sqlite3_exec(sqlite3*, const char *sql, sqlite_callback, void *data, char * errmsg)</strong> è¯¥ä¾‹ç¨‹æä¾›äº†ä¸€ä¸ªæ‰§è¡Œ SQL å‘½ä»¤çš„å¿«æ·æ–¹å¼ï¼ŒSQL å‘½ä»¤ç”± sql å‚æ•°æä¾›ï¼Œå¯ä»¥ç”±å¤šä¸ª SQL å‘½ä»¤ç»„æˆã€‚åœ¨è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªå‚æ•° <em>sqlite3</em> æ˜¯æ‰“å¼€çš„æ•°æ®åº“å¯¹è±¡ï¼Œ<em>sqlite_callback</em> æ˜¯ä¸€ä¸ªå›è°ƒï¼Œ<em>data</em> ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œerrmsg å°†è¢«è¿”å›ç”¨æ¥è·å–ç¨‹åºç”Ÿæˆçš„ä»»ä½•é”™è¯¯ã€‚sqlite3_exec() ç¨‹åºè§£æå¹¶æ‰§è¡Œç”± <strong>sql</strong> å‚æ•°æ‰€ç»™çš„æ¯ä¸ªå‘½ä»¤ï¼Œç›´åˆ°å­—ç¬¦ä¸²ç»“æŸæˆ–è€…é‡åˆ°é”™è¯¯ä¸ºæ­¢ã€‚</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>sqlite3_close(sqlite3*)</strong> è¯¥ä¾‹ç¨‹å…³é—­ä¹‹å‰è°ƒç”¨ sqlite3_open() æ‰“å¼€çš„æ•°æ®åº“è¿æ¥ã€‚æ‰€æœ‰ä¸è¿æ¥ç›¸å…³çš„è¯­å¥éƒ½åº”åœ¨è¿æ¥å…³é—­ä¹‹å‰å®Œæˆã€‚å¦‚æœè¿˜æœ‰æŸ¥è¯¢æ²¡æœ‰å®Œæˆï¼Œsqlite3_close() å°†è¿”å› SQLITE_BUSY ç¦æ­¢å…³é—­çš„é”™è¯¯æ¶ˆæ¯ã€‚</td>
</tr>
</tbody></table>
<h2 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h2><p>ä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•è¿æ¥åˆ°ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“ã€‚å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¢«åˆ›å»ºï¼Œæœ€åå°†è¿”å›ä¸€ä¸ªæ•°æ®åº“å¯¹è±¡ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sqlite3.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   sqlite3 *db;</span><br><span class="line">   <span class="keyword">char</span> *zErrMsg = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">int</span> rc;</span><br><span class="line"></span><br><span class="line">   rc = <span class="built_in">sqlite3_open</span>(<span class="string">&quot;test.db&quot;</span>, &amp;db);</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span>( rc )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Can&#x27;t open database: %s\n&quot;</span>, <span class="built_in">sqlite3_errmsg</span>(db));</span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Opened database successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">sqlite3_close</span>(db);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥ç¼–è¯‘å’Œè¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œåœ¨å½“å‰ç›®å½•ä¸­åˆ›å»ºæˆ‘ä»¬çš„æ•°æ®åº“ <strong>test.db</strong>ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ”¹å˜è·¯å¾„ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="variable">$gcc</span> test.c -l sqlite3</span><br><span class="line">$./a.out</span><br><span class="line">Opened database successfully</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦ä½¿ç”¨ C++ æºä»£ç ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹åˆ—æ‰€ç¤ºç¼–è¯‘ä»£ç ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="variable">$g</span>++ test.c -l sqlite3</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œï¼ŒæŠŠæˆ‘ä»¬çš„ç¨‹åºé“¾æ¥ä¸Š sqlite3 åº“ï¼Œä»¥ä¾¿å‘ C ç¨‹åºæä¾›å¿…è¦çš„å‡½æ•°ã€‚è¿™å°†åœ¨æ‚¨çš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ test.dbï¼Œæ‚¨å°†å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">-rwxr-xr-x. 1 root root 7383 May  8 02:06 a.out</span><br><span class="line">-rw-r--r--. 1 root root  323 May  8 02:05 test.c</span><br><span class="line">-rw-r--r--. 1 root root    0 May  8 02:06 test.db</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h2><p>ä¸‹é¢çš„ C ä»£ç æ®µå°†ç”¨äºåœ¨å…ˆå‰åˆ›å»ºçš„æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sqlite3.h&gt;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">callback</span><span class="params">(<span class="keyword">void</span> *NotUsed, <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **azColName)</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;argc; i++)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%s = %s\n&quot;</span>, azColName[i], argv[i] ? argv[i] : <span class="string">&quot;NULL&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   sqlite3 *db;</span><br><span class="line">   <span class="keyword">char</span> *zErrMsg = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">int</span>  rc;</span><br><span class="line">   <span class="keyword">char</span> *sql;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Open database */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_open</span>(<span class="string">&quot;test.db&quot;</span>, &amp;db);</span><br><span class="line">   <span class="keyword">if</span>( rc )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Can&#x27;t open database: %s\n&quot;</span>, <span class="built_in">sqlite3_errmsg</span>(db));</span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stdout, <span class="string">&quot;Opened database successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Create SQL statement */</span></span><br><span class="line">   sql = <span class="string">&quot;CREATE TABLE COMPANY(&quot;</span>  \</span><br><span class="line">         <span class="string">&quot;ID INT PRIMARY KEY     NOT NULL,&quot;</span> \</span><br><span class="line">         <span class="string">&quot;NAME           TEXT    NOT NULL,&quot;</span> \</span><br><span class="line">         <span class="string">&quot;AGE            INT     NOT NULL,&quot;</span> \</span><br><span class="line">         <span class="string">&quot;ADDRESS        CHAR(50),&quot;</span> \</span><br><span class="line">         <span class="string">&quot;SALARY         REAL );&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Execute SQL statement */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_exec</span>(db, sql, callback, <span class="number">0</span>, &amp;zErrMsg);</span><br><span class="line">   <span class="keyword">if</span>( rc != SQLITE_OK )&#123;</span><br><span class="line">   <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;SQL error: %s\n&quot;</span>, zErrMsg);</span><br><span class="line">      <span class="built_in">sqlite3_free</span>(zErrMsg);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stdout, <span class="string">&quot;Table created successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">sqlite3_close</span>(db);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šåœ¨ test.db æ–‡ä»¶ä¸­åˆ›å»º COMPANY è¡¨ï¼Œæœ€ç»ˆæ–‡ä»¶åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">-rwxr-xr-x. 1 root root 9567 May  8 02:31 a.out</span><br><span class="line">-rw-r--r--. 1 root root 1207 May  8 02:31 test.c</span><br><span class="line">-rw-r--r--. 1 root root 3072 May  8 02:31 test.db</span><br></pre></td></tr></table></figure>

<h2 id="INSERT-æ“ä½œ"><a href="#INSERT-æ“ä½œ" class="headerlink" title="INSERT æ“ä½œ"></a>INSERT æ“ä½œ</h2><p>ä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•åœ¨ä¸Šé¢åˆ›å»ºçš„ COMPANY è¡¨ä¸­åˆ›å»ºè®°å½•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sqlite3.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">callback</span><span class="params">(<span class="keyword">void</span> *NotUsed, <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **azColName)</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;argc; i++)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%s = %s\n&quot;</span>, azColName[i], argv[i] ? argv[i] : <span class="string">&quot;NULL&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   sqlite3 *db;</span><br><span class="line">   <span class="keyword">char</span> *zErrMsg = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">int</span> rc;</span><br><span class="line">   <span class="keyword">char</span> *sql;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Open database */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_open</span>(<span class="string">&quot;test.db&quot;</span>, &amp;db);</span><br><span class="line">   <span class="keyword">if</span>( rc )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Can&#x27;t open database: %s\n&quot;</span>, <span class="built_in">sqlite3_errmsg</span>(db));</span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Opened database successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Create SQL statement */</span></span><br><span class="line">   sql = <span class="string">&quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) &quot;</span>  \</span><br><span class="line">         <span class="string">&quot;VALUES (1, &#x27;Paul&#x27;, 32, &#x27;California&#x27;, 20000.00 ); &quot;</span> \</span><br><span class="line">         <span class="string">&quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY) &quot;</span>  \</span><br><span class="line">         <span class="string">&quot;VALUES (2, &#x27;Allen&#x27;, 25, &#x27;Texas&#x27;, 15000.00 ); &quot;</span>     \</span><br><span class="line">         <span class="string">&quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)&quot;</span> \</span><br><span class="line">         <span class="string">&quot;VALUES (3, &#x27;Teddy&#x27;, 23, &#x27;Norway&#x27;, 20000.00 );&quot;</span> \</span><br><span class="line">         <span class="string">&quot;INSERT INTO COMPANY (ID,NAME,AGE,ADDRESS,SALARY)&quot;</span> \</span><br><span class="line">         <span class="string">&quot;VALUES (4, &#x27;Mark&#x27;, 25, &#x27;Rich-Mond &#x27;, 65000.00 );&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Execute SQL statement */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_exec</span>(db, sql, callback, <span class="number">0</span>, &amp;zErrMsg);</span><br><span class="line">   <span class="keyword">if</span>( rc != SQLITE_OK )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;SQL error: %s\n&quot;</span>, zErrMsg);</span><br><span class="line">      <span class="built_in">sqlite3_free</span>(zErrMsg);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stdout, <span class="string">&quot;Records created successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">sqlite3_close</span>(db);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šåœ¨ COMPANY è¡¨ä¸­åˆ›å»ºç»™å®šè®°å½•ï¼Œå¹¶ä¼šæ˜¾ç¤ºä»¥ä¸‹ä¸¤è¡Œï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">Opened database successfully</span><br><span class="line">Records created successfully</span><br></pre></td></tr></table></figure>

<h2 id="SELECT-æ“ä½œ"><a href="#SELECT-æ“ä½œ" class="headerlink" title="SELECT æ“ä½œ"></a>SELECT æ“ä½œ</h2><p>åœ¨æˆ‘ä»¬å¼€å§‹è®²è§£è·å–è®°å½•çš„å®ä¾‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸‹å›è°ƒå‡½æ•°çš„ä¸€äº›ç»†èŠ‚ï¼Œè¿™å°†åœ¨æˆ‘ä»¬çš„å®ä¾‹ä½¿ç”¨åˆ°ã€‚è¿™ä¸ªå›è°ƒæä¾›äº†ä¸€ä¸ªä» SELECT è¯­å¥è·å¾—ç»“æœçš„æ–¹å¼ã€‚å®ƒå£°æ˜å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*sqlite3_callback)</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">void</span>*,    <span class="comment">/* Data provided in the 4th argument of sqlite3_exec() */</span></span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">int</span>,      <span class="comment">/* The number of columns in row */</span></span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">char</span>**,   <span class="comment">/* An array of strings representing fields in the row */</span></span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">char</span>**    <span class="comment">/* An array of strings representing column names */</span></span></span></span><br><span class="line"><span class="params"><span class="function">)</span></span>;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸Šé¢çš„å›è°ƒåœ¨ sqlite_exec() ç¨‹åºä¸­ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆ SQLite å°†ä¸º SQL å‚æ•°å†…æ‰§è¡Œçš„æ¯ä¸ª SELECT è¯­å¥ä¸­å¤„ç†çš„æ¯ä¸ªè®°å½•è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚</p>
<p>ä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•ä»å‰é¢åˆ›å»ºçš„ COMPANY è¡¨ä¸­è·å–å¹¶æ˜¾ç¤ºè®°å½•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sqlite3.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">callback</span><span class="params">(<span class="keyword">void</span> *data, <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **azColName)</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s: &quot;</span>, (<span class="keyword">const</span> <span class="keyword">char</span>*)data);</span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;argc; i++)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%s = %s\n&quot;</span>, azColName[i], argv[i] ? argv[i] : <span class="string">&quot;NULL&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   sqlite3 *db;</span><br><span class="line">   <span class="keyword">char</span> *zErrMsg = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">int</span> rc;</span><br><span class="line">   <span class="keyword">char</span> *sql;</span><br><span class="line">   <span class="keyword">const</span> <span class="keyword">char</span>* data = <span class="string">&quot;Callback function called&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Open database */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_open</span>(<span class="string">&quot;test.db&quot;</span>, &amp;db);</span><br><span class="line">   <span class="keyword">if</span>( rc )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Can&#x27;t open database: %s\n&quot;</span>, <span class="built_in">sqlite3_errmsg</span>(db));</span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Opened database successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Create SQL statement */</span></span><br><span class="line">   sql = <span class="string">&quot;SELECT * from COMPANY&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Execute SQL statement */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_exec</span>(db, sql, callback, (<span class="keyword">void</span>*)data, &amp;zErrMsg);</span><br><span class="line">   <span class="keyword">if</span>( rc != SQLITE_OK )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;SQL error: %s\n&quot;</span>, zErrMsg);</span><br><span class="line">      <span class="built_in">sqlite3_free</span>(zErrMsg);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stdout, <span class="string">&quot;Operation done successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">sqlite3_close</span>(db);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Opened database successfully</span><br><span class="line">Callback <span class="keyword">function</span> <span class="keyword">called</span>: ID <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">NAME <span class="operator">=</span> Paul</span><br><span class="line">AGE <span class="operator">=</span> <span class="number">32</span></span><br><span class="line">ADDRESS <span class="operator">=</span> California</span><br><span class="line">SALARY <span class="operator">=</span> <span class="number">20000.0</span></span><br><span class="line"></span><br><span class="line">Callback <span class="keyword">function</span> <span class="keyword">called</span>: ID <span class="operator">=</span> <span class="number">2</span></span><br><span class="line">NAME <span class="operator">=</span> Allen</span><br><span class="line">AGE <span class="operator">=</span> <span class="number">25</span></span><br><span class="line">ADDRESS <span class="operator">=</span> Texas</span><br><span class="line">SALARY <span class="operator">=</span> <span class="number">15000.0</span></span><br><span class="line"></span><br><span class="line">Callback <span class="keyword">function</span> <span class="keyword">called</span>: ID <span class="operator">=</span> <span class="number">3</span></span><br><span class="line">NAME <span class="operator">=</span> Teddy</span><br><span class="line">AGE <span class="operator">=</span> <span class="number">23</span></span><br><span class="line">ADDRESS <span class="operator">=</span> Norway</span><br><span class="line">SALARY <span class="operator">=</span> <span class="number">20000.0</span></span><br><span class="line"></span><br><span class="line">Callback <span class="keyword">function</span> <span class="keyword">called</span>: ID <span class="operator">=</span> <span class="number">4</span></span><br><span class="line">NAME <span class="operator">=</span> Mark</span><br><span class="line">AGE <span class="operator">=</span> <span class="number">25</span></span><br><span class="line">ADDRESS <span class="operator">=</span> Rich<span class="operator">-</span>Mond</span><br><span class="line">SALARY <span class="operator">=</span> <span class="number">65000.0</span></span><br><span class="line"></span><br><span class="line">Operation done successfully</span><br></pre></td></tr></table></figure>

<h2 id="UPDATE-æ“ä½œ"><a href="#UPDATE-æ“ä½œ" class="headerlink" title="UPDATE æ“ä½œ"></a>UPDATE æ“ä½œ</h2><p>ä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ UPDATE è¯­å¥æ¥æ›´æ–°ä»»ä½•è®°å½•ï¼Œç„¶åä» COMPANY è¡¨ä¸­è·å–å¹¶æ˜¾ç¤ºæ›´æ–°çš„è®°å½•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sqlite3.h&gt;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">callback</span><span class="params">(<span class="keyword">void</span> *data, <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **azColName)</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s: &quot;</span>, (<span class="keyword">const</span> <span class="keyword">char</span>*)data);</span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;argc; i++)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%s = %s\n&quot;</span>, azColName[i], argv[i] ? argv[i] : <span class="string">&quot;NULL&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   sqlite3 *db;</span><br><span class="line">   <span class="keyword">char</span> *zErrMsg = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">int</span> rc;</span><br><span class="line">   <span class="keyword">char</span> *sql;</span><br><span class="line">   <span class="keyword">const</span> <span class="keyword">char</span>* data = <span class="string">&quot;Callback function called&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Open database */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_open</span>(<span class="string">&quot;test.db&quot;</span>, &amp;db);</span><br><span class="line">   <span class="keyword">if</span>( rc )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Can&#x27;t open database: %s\n&quot;</span>, <span class="built_in">sqlite3_errmsg</span>(db));</span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Opened database successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Create merged SQL statement */</span></span><br><span class="line">   sql = <span class="string">&quot;UPDATE COMPANY set SALARY = 25000.00 where ID=1; &quot;</span> \</span><br><span class="line">         <span class="string">&quot;SELECT * from COMPANY&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Execute SQL statement */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_exec</span>(db, sql, callback, (<span class="keyword">void</span>*)data, &amp;zErrMsg);</span><br><span class="line">   <span class="keyword">if</span>( rc != SQLITE_OK )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;SQL error: %s\n&quot;</span>, zErrMsg);</span><br><span class="line">      <span class="built_in">sqlite3_free</span>(zErrMsg);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stdout, <span class="string">&quot;Operation done successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">sqlite3_close</span>(db);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Opened database successfully</span><br><span class="line">Callback function called: ID = <span class="number">1</span></span><br><span class="line">NAME = Paul</span><br><span class="line">AGE = <span class="number">32</span></span><br><span class="line">ADDRESS = California</span><br><span class="line">SALARY = <span class="number">25000.0</span></span><br><span class="line"></span><br><span class="line">Callback function called: ID = <span class="number">2</span></span><br><span class="line">NAME = Allen</span><br><span class="line">AGE = <span class="number">25</span></span><br><span class="line">ADDRESS = Texas</span><br><span class="line">SALARY = <span class="number">15000.0</span></span><br><span class="line"></span><br><span class="line">Callback function called: ID = <span class="number">3</span></span><br><span class="line">NAME = Teddy</span><br><span class="line">AGE = <span class="number">23</span></span><br><span class="line">ADDRESS = Norway</span><br><span class="line">SALARY = <span class="number">20000.0</span></span><br><span class="line"></span><br><span class="line">Callback function called: ID = <span class="number">4</span></span><br><span class="line">NAME = Mark</span><br><span class="line">AGE = <span class="number">25</span></span><br><span class="line">ADDRESS = Rich-Mond</span><br><span class="line">SALARY = <span class="number">65000.0</span></span><br><span class="line"></span><br><span class="line">Operation done successfully</span><br></pre></td></tr></table></figure>

<h2 id="DELETE-æ“ä½œ"><a href="#DELETE-æ“ä½œ" class="headerlink" title="DELETE æ“ä½œ"></a>DELETE æ“ä½œ</h2><p>ä¸‹é¢çš„ C ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ DELETE è¯­å¥åˆ é™¤ä»»ä½•è®°å½•ï¼Œç„¶åä» COMPANY è¡¨ä¸­è·å–å¹¶æ˜¾ç¤ºå‰©ä½™çš„è®°å½•ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sqlite3.h&gt;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">callback</span><span class="params">(<span class="keyword">void</span> *data, <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **azColName)</span></span>&#123;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s: &quot;</span>, (<span class="keyword">const</span> <span class="keyword">char</span>*)data);</span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;argc; i++)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%s = %s\n&quot;</span>, azColName[i], argv[i] ? argv[i] : <span class="string">&quot;NULL&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   sqlite3 *db;</span><br><span class="line">   <span class="keyword">char</span> *zErrMsg = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">int</span> rc;</span><br><span class="line">   <span class="keyword">char</span> *sql;</span><br><span class="line">   <span class="keyword">const</span> <span class="keyword">char</span>* data = <span class="string">&quot;Callback function called&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Open database */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_open</span>(<span class="string">&quot;test.db&quot;</span>, &amp;db);</span><br><span class="line">   <span class="keyword">if</span>( rc )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Can&#x27;t open database: %s\n&quot;</span>, <span class="built_in">sqlite3_errmsg</span>(db));</span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Opened database successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Create merged SQL statement */</span></span><br><span class="line">   sql = <span class="string">&quot;DELETE from COMPANY where ID=2; &quot;</span> \</span><br><span class="line">         <span class="string">&quot;SELECT * from COMPANY&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/* Execute SQL statement */</span></span><br><span class="line">   rc = <span class="built_in">sqlite3_exec</span>(db, sql, callback, (<span class="keyword">void</span>*)data, &amp;zErrMsg);</span><br><span class="line">   <span class="keyword">if</span>( rc != SQLITE_OK )&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;SQL error: %s\n&quot;</span>, zErrMsg);</span><br><span class="line">      <span class="built_in">sqlite3_free</span>(zErrMsg);</span><br><span class="line">   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">fprintf</span>(stdout, <span class="string">&quot;Operation done successfully\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">sqlite3_close</span>(db);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç¨‹åºç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Opened database successfully</span><br><span class="line">Callback <span class="keyword">function</span> <span class="keyword">called</span>: ID <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">NAME <span class="operator">=</span> Paul</span><br><span class="line">AGE <span class="operator">=</span> <span class="number">32</span></span><br><span class="line">ADDRESS <span class="operator">=</span> California</span><br><span class="line">SALARY <span class="operator">=</span> <span class="number">20000.0</span></span><br><span class="line"></span><br><span class="line">Callback <span class="keyword">function</span> <span class="keyword">called</span>: ID <span class="operator">=</span> <span class="number">3</span></span><br><span class="line">NAME <span class="operator">=</span> Teddy</span><br><span class="line">AGE <span class="operator">=</span> <span class="number">23</span></span><br><span class="line">ADDRESS <span class="operator">=</span> Norway</span><br><span class="line">SALARY <span class="operator">=</span> <span class="number">20000.0</span></span><br><span class="line"></span><br><span class="line">Callback <span class="keyword">function</span> <span class="keyword">called</span>: ID <span class="operator">=</span> <span class="number">4</span></span><br><span class="line">NAME <span class="operator">=</span> Mark</span><br><span class="line">AGE <span class="operator">=</span> <span class="number">25</span></span><br><span class="line">ADDRESS <span class="operator">=</span> Rich<span class="operator">-</span>Mond</span><br><span class="line">SALARY <span class="operator">=</span> <span class="number">65000.0</span></span><br><span class="line"></span><br><span class="line">Operation done successfully</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Sqlite3</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>sqlite3</tag>
      </tags>
  </entry>
  <entry>
    <title>Sqlite3 ç®€å•ä½¿ç”¨</title>
    <url>/2021/08/11/Sqlite3-%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ¬æ–‡ä»‹ç»ä¸€äº›å¸¸ç”¨Sqlite3 å‘½ä»¤è¡Œã€‚</p>
<span id="more"></span>

<h3 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$ sqlite3 database_name.db</span><br><span class="line">æˆ–è€…</span><br><span class="line">sqlite<span class="operator">&gt;</span> .<span class="keyword">open</span> database_name.db</span><br></pre></td></tr></table></figure>

<h3 id="é™„åŠ æ•°æ®åº“"><a href="#é™„åŠ æ•°æ®åº“" class="headerlink" title="é™„åŠ æ•°æ®åº“"></a>é™„åŠ æ•°æ®åº“</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ATTACH DATABASE <span class="string">&#x27;file_name&#x27;</span> <span class="keyword">AS</span> <span class="string">&#x27;alias_name&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ†ç¦»æ•°æ®åº“"><a href="#åˆ†ç¦»æ•°æ®åº“" class="headerlink" title="åˆ†ç¦»æ•°æ®åº“"></a>åˆ†ç¦»æ•°æ®åº“</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DETACH DATABASE <span class="string">&#x27;alias_name&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯ä¸´æ—¶æ•°æ®åº“æˆ–ç›´æ¥é”€æ¯ã€‚</p>
<h3 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name(</span><br><span class="line">    xx		<span class="type">INT</span>		(<span class="keyword">NOT</span> <span class="keyword">NULL</span>),</span><br><span class="line">    xx		TEXT	(<span class="keyword">NOT</span> <span class="keyword">NULL</span>),</span><br><span class="line">    xx		<span class="type">CHAR</span>(<span class="number">5</span>)	(<span class="keyword">NOT</span> <span class="keyword">NULL</span>),</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY(xx, xx, ...)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> table_name;</span><br></pre></td></tr></table></figure>

<h3 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name [(col1, col2, col3, ..., coln)]</span><br><span class="line"><span class="keyword">VALUES</span> (val1, val2, val3, ..., valn);</span><br></pre></td></tr></table></figure>

<h3 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> col1, col2, col3</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> [<span class="keyword">CONDITION</span>]</span><br></pre></td></tr></table></figure>

<h3 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h3><table>
<thead>
<tr>
<th align="left">è¿ç®—ç¬¦</th>
<th align="left">æè¿°</th>
<th align="left">å®ä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">==</td>
<td align="left">æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a == b) ä¸ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td align="left">=</td>
<td align="left">æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a = b) ä¸ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td align="left">!=</td>
<td align="left">æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a != b) ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td align="left">&lt;&gt;</td>
<td align="left">æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a &lt;&gt; b) ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td align="left">&gt;</td>
<td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a &gt; b) ä¸ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td align="left">&lt;</td>
<td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a &lt; b) ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td align="left">&gt;=</td>
<td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a &gt;= b) ä¸ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td align="left">&lt;=</td>
<td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a &lt;= b) ä¸ºçœŸã€‚</td>
</tr>
<tr>
<td align="left">!&lt;</td>
<td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦ä¸å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a !&lt; b) ä¸ºå‡ã€‚</td>
</tr>
<tr>
<td align="left">!&gt;</td>
<td align="left">æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦ä¸å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚</td>
<td align="left">(a !&gt; b) ä¸ºçœŸã€‚</td>
</tr>
</tbody></table>
<h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3><table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>AND</td>
<td>ANDè¿ç®—ç¬¦å…è®¸åœ¨ä¸€ä¸ªSQLè¯­å¥ä¸­çš„WHEREå­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶çš„å­˜åœ¨</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>BETWEEN è¿ç®—ç¬¦ç”¨äºåœ¨ç»™å®šæœ€å°å€¼å’Œæœ€å¤§å€¼èŒƒå›´å†…çš„ä¸€ç³»åˆ—å€¼ä¸­æœç´¢å€¼ã€‚</td>
</tr>
<tr>
<td>EXISTS</td>
<td>EXISTS è¿ç®—ç¬¦ç”¨äºåœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æŒ‡å®šè¡¨ä¸­æœç´¢è¡Œçš„å­˜åœ¨ã€‚</td>
</tr>
<tr>
<td>IN</td>
<td>IN è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚</td>
</tr>
<tr>
<td>NOT IN</td>
<td>IN è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ï¼Œç”¨äºæŠŠæŸä¸ªå€¼ä¸ä¸åœ¨ä¸€ç³»åˆ—æŒ‡å®šåˆ—è¡¨çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚</td>
</tr>
<tr>
<td>LIKE</td>
<td>LIKE è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒã€‚</td>
</tr>
<tr>
<td>GLOB</td>
<td>GLOB è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ä½¿ç”¨é€šé…ç¬¦è¿ç®—ç¬¦çš„ç›¸ä¼¼å€¼è¿›è¡Œæ¯”è¾ƒã€‚GLOB ä¸ LIKE ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒæ˜¯<strong>å¤§å°å†™æ•æ„Ÿ</strong>çš„ã€‚</td>
</tr>
<tr>
<td>NOT</td>
<td>NOT è¿ç®—ç¬¦æ˜¯æ‰€ç”¨çš„é€»è¾‘è¿ç®—ç¬¦çš„å¯¹ç«‹é¢ã€‚æ¯”å¦‚ NOT EXISTSã€NOT BETWEENã€NOT INï¼Œç­‰ç­‰ã€‚<strong>å®ƒæ˜¯å¦å®šè¿ç®—ç¬¦ã€‚</strong></td>
</tr>
<tr>
<td>OR</td>
<td>OR è¿ç®—ç¬¦ç”¨äºç»“åˆä¸€ä¸ª SQL è¯­å¥çš„ WHERE å­å¥ä¸­çš„å¤šä¸ªæ¡ä»¶ã€‚</td>
</tr>
<tr>
<td>IS NULL</td>
<td>NULL è¿ç®—ç¬¦ç”¨äºæŠŠæŸä¸ªå€¼ä¸ NULL å€¼è¿›è¡Œæ¯”è¾ƒã€‚</td>
</tr>
<tr>
<td>IS</td>
<td>IS è¿ç®—ç¬¦ä¸ = ç›¸ä¼¼ã€‚</td>
</tr>
<tr>
<td>IS NOT</td>
<td>IS NOT è¿ç®—ç¬¦ä¸ != ç›¸ä¼¼ã€‚</td>
</tr>
<tr>
<td>||</td>
<td>è¿æ¥ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td>UNIQUE</td>
<td>UNIQUE è¿ç®—ç¬¦æœç´¢æŒ‡å®šè¡¨ä¸­çš„æ¯ä¸€è¡Œï¼Œç¡®ä¿å”¯ä¸€æ€§ï¼ˆæ— é‡å¤ï¼‰ã€‚</td>
</tr>
</tbody></table>
<h3 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a>ä½è¿ç®—ç¬¦</h3><table>
<thead>
<tr>
<th align="left">è¿ç®—ç¬¦</th>
<th align="left">æè¿°</th>
<th align="left">å®ä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&amp;</td>
<td align="left">å¦‚æœåŒæ—¶å­˜åœ¨äºä¸¤ä¸ªæ“ä½œæ•°ä¸­ï¼ŒäºŒè¿›åˆ¶ AND è¿ç®—ç¬¦å¤åˆ¶ä¸€ä½åˆ°ç»“æœä¸­ã€‚</td>
<td align="left">(A &amp; B) å°†å¾—åˆ° 12ï¼Œå³ä¸º 0000 1100</td>
</tr>
<tr>
<td align="left">|</td>
<td align="left">å¦‚æœå­˜åœ¨äºä»»ä¸€æ“ä½œæ•°ä¸­ï¼ŒäºŒè¿›åˆ¶ OR è¿ç®—ç¬¦å¤åˆ¶ä¸€ä½åˆ°ç»“æœä¸­ã€‚</td>
<td align="left">(A | B) å°†å¾—åˆ° 61ï¼Œå³ä¸º 0011 1101</td>
</tr>
<tr>
<td align="left">~</td>
<td align="left">äºŒè¿›åˆ¶è¡¥ç è¿ç®—ç¬¦æ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼Œå…·æœ‰â€ç¿»è½¬â€ä½æ•ˆåº”ï¼Œå³0å˜æˆ1ï¼Œ1å˜æˆ0ã€‚</td>
<td align="left">(~A ) å°†å¾—åˆ° -61ï¼Œå³ä¸º 1100 0011ï¼Œä¸€ä¸ªæœ‰ç¬¦å·äºŒè¿›åˆ¶æ•°çš„è¡¥ç å½¢å¼ã€‚</td>
</tr>
<tr>
<td align="left">&lt;&lt;</td>
<td align="left">äºŒè¿›åˆ¶å·¦ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°çš„å€¼å‘å·¦ç§»åŠ¨å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚</td>
<td align="left">A &lt;&lt; 2 å°†å¾—åˆ° 240ï¼Œå³ä¸º 1111 0000</td>
</tr>
</tbody></table>
<h3 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h3><p>æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ã€è¿ç®—ç¬¦å’Œè®¡ç®—å€¼çš„SQLå‡½æ•°çš„ç»„åˆã€‚ä¸å…¬å¼ç±»ä¼¼ï¼Œéƒ½å†™åœ¨æŸ¥è¯¢è¯­å¥ä¸­ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç‰¹å®šçš„æ•°æ®é›†æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚</p>
<h3 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h3><p>ç”¨äºä¿®æ”¹è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨å¸¦æœ‰ WHERE å­å¥çš„ UPDATE æŸ¥è¯¢æ¥æ›´æ–°é€‰å®šè¡Œï¼Œå¦åˆ™æ‰€æœ‰çš„è¡Œéƒ½ä¼šè¢«æ›´æ–°ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">UPDATE table_name</span><br><span class="line"><span class="keyword">SET</span> col1<span class="operator">=</span>val1, col2<span class="operator">=</span>val2, ... coln<span class="operator">=</span>valn</span><br><span class="line"><span class="keyword">WHERE</span> [<span class="keyword">CONDITION</span>]</span><br></pre></td></tr></table></figure>

<h3 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h3><p>ç”¨äºåˆ é™¤è¡¨ä¸­å·²æœ‰çš„è®°å½•ã€‚å¯ä»¥ä½¿ç”¨å¸¦æœ‰ WHERE å­å¥çš„ DELETE æŸ¥è¯¢æ¥åˆ é™¤é€‰å®šè¡Œï¼Œå¦åˆ™æ‰€æœ‰çš„è®°å½•éƒ½ä¼šè¢«åˆ é™¤ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> [<span class="keyword">CONDITION</span>]</span><br></pre></td></tr></table></figure>

<h3 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h3><p>ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒLIKE è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªé€šé…ç¬¦ä¸ LIKE è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨</p>
<ul>
<li>%ï¼šä»£è¡¨<strong>é›¶ä¸ªæˆ–å¤šä¸ª</strong>æ•°å­—æˆ–å­—ç¬¦ã€‚</li>
<li>_ï¼šä»£è¡¨<strong>ä¸€ä¸ª</strong>æ•°å­—æˆ–å­—ç¬¦ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th align="left">è¯­å¥</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">WHERE salary LIKE â€˜200%â€™</td>
<td align="left">æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary LIKE â€˜%200%â€™</td>
<td align="left">æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary LIKE â€˜_00%â€™</td>
<td align="left">æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary LIKE â€˜2_%_%â€™</td>
<td align="left">æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary LIKE â€˜%2â€™</td>
<td align="left">æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary LIKE â€˜_2%3â€™</td>
<td align="left">æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary LIKE â€˜2___3â€™</td>
<td align="left">æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
</tbody></table>
<h3 id="GLOB"><a href="#GLOB" class="headerlink" title="GLOB"></a>GLOB</h3><p>ç”¨æ¥åŒ¹é…é€šé…ç¬¦æŒ‡å®šæ¨¡å¼çš„æ–‡æœ¬å€¼ã€‚å¦‚æœæœç´¢è¡¨è¾¾å¼ä¸æ¨¡å¼è¡¨è¾¾å¼åŒ¹é…ï¼ŒGLOB è¿ç®—ç¬¦å°†è¿”å›çœŸï¼ˆtrueï¼‰ï¼Œä¹Ÿå°±æ˜¯ 1ã€‚ä¸ LIKE è¿ç®—ç¬¦ä¸åŒçš„æ˜¯ï¼ŒGLOB æ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œå¯¹äºä¸‹é¢çš„é€šé…ç¬¦ï¼Œå®ƒéµå¾ª UNIX çš„è¯­æ³•ã€‚</p>
<ul>
<li>*ï¼šä»£è¡¨<strong>é›¶ä¸ªæˆ–å¤šä¸ª</strong>æ•°å­—æˆ–å­—ç¬¦ã€‚</li>
<li>?ï¼šä»£è¡¨<strong>ä¸€ä¸ª</strong>æ•°å­—æˆ–å­—ç¬¦ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th align="left">è¯­å¥</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">WHERE salary GLOB â€˜200*â€™</td>
<td align="left">æŸ¥æ‰¾ä»¥ 200 å¼€å¤´çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary GLOB â€˜<em>200</em>â€˜</td>
<td align="left">æŸ¥æ‰¾ä»»æ„ä½ç½®åŒ…å« 200 çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary GLOB â€˜?00*â€™</td>
<td align="left">æŸ¥æ‰¾ç¬¬äºŒä½å’Œç¬¬ä¸‰ä½ä¸º 00 çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary GLOB â€˜2??â€™</td>
<td align="left">æŸ¥æ‰¾ä»¥ 2 å¼€å¤´ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 3 ä¸ªå­—ç¬¦çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary GLOB â€˜*2â€™</td>
<td align="left">æŸ¥æ‰¾ä»¥ 2 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary GLOB â€˜?2*3â€™</td>
<td align="left">æŸ¥æ‰¾ç¬¬äºŒä½ä¸º 2ï¼Œä¸”ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
<tr>
<td align="left">WHERE salary GLOB â€˜2???3â€™</td>
<td align="left">æŸ¥æ‰¾é•¿åº¦ä¸º 5 ä½æ•°ï¼Œä¸”ä»¥ 2 å¼€å¤´ä»¥ 3 ç»“å°¾çš„ä»»æ„å€¼</td>
</tr>
</tbody></table>
<h3 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h3><p>ç”¨äºé™åˆ¶ç”± SELECT è¯­å¥è¿”å›çš„æ•°æ®æ•°é‡</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> col1, col2, ..., coln</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">LIMIT [sizeof <span class="keyword">rows</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">or</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> col1, col2, ..., coln</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">LIMIT [limit_num] <span class="keyword">OFFSET</span> [offset_num]</span><br></pre></td></tr></table></figure>

<h3 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h3><p>ç”¨æ¥åŸºäºä¸€ä¸ªæˆ–å¤šä¸ªåˆ—æŒ‰å‡åºæˆ–é™åºé¡ºåºæ’åˆ—æ•°æ®ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span><span class="operator">-</span>list </span><br><span class="line"><span class="keyword">FROM</span> table_name </span><br><span class="line">[<span class="keyword">WHERE</span> <span class="keyword">condition</span>] </span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> column1, column2, .. columnN] [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>];</span><br></pre></td></tr></table></figure>

<h3 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h3><p>ç”¨äºä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å¯¹ç›¸åŒçš„æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚åœ¨ SELECT è¯­å¥ä¸­ï¼ŒGROUP BY å­å¥æ”¾åœ¨ WHERE å­å¥ä¹‹åï¼Œ<strong>æ”¾åœ¨ ORDER BY å­å¥ä¹‹å‰</strong>ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">column</span><span class="operator">-</span>list</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> [ conditions ]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column1, column2....columnN</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column1, column2....columnN</span><br></pre></td></tr></table></figure>

<h3 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h3><p>HAVING å­å¥å…è®¸æŒ‡å®šæ¡ä»¶æ¥è¿‡æ»¤å°†å‡ºç°åœ¨æœ€ç»ˆç»“æœä¸­çš„åˆ†ç»„ç»“æœã€‚</p>
<p><strong>WHERE å­å¥åœ¨æ‰€é€‰åˆ—ä¸Šè®¾ç½®æ¡ä»¶ï¼Œè€Œ HAVING å­å¥åˆ™åœ¨ç”± GROUP BY å­å¥åˆ›å»ºçš„åˆ†ç»„ä¸Šè®¾ç½®æ¡ä»¶ã€‚</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column1, column2</span><br><span class="line"><span class="keyword">FROM</span> table1, table2</span><br><span class="line"><span class="keyword">WHERE</span> [ conditions ]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column1, column2</span><br><span class="line"><span class="keyword">HAVING</span> [ conditions ]</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column1, column2</span><br></pre></td></tr></table></figure>

<h3 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h3><p>ä¸ SELECT è¯­å¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥æ¶ˆé™¤æ‰€æœ‰é‡å¤çš„è®°å½•ï¼Œå¹¶åªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ã€‚æœ‰å¯èƒ½å‡ºç°ä¸€ç§æƒ…å†µï¼Œåœ¨ä¸€ä¸ªè¡¨ä¸­æœ‰å¤šä¸ªé‡å¤çš„è®°å½•ã€‚å½“æå–è¿™æ ·çš„è®°å½•æ—¶ï¼ŒDISTINCT å…³é”®å­—å°±æ˜¾å¾—ç‰¹åˆ«æœ‰æ„ä¹‰ï¼Œå®ƒåªè·å–å”¯ä¸€ä¸€æ¬¡è®°å½•ï¼Œè€Œä¸æ˜¯è·å–é‡å¤è®°å½•ã€‚</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> column1, column2,.....columnN </span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> [<span class="keyword">condition</span>]</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Sqlite3</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>sqlite3</tag>
      </tags>
  </entry>
</search>
