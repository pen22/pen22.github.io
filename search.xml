<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo</title>
    <url>/2021/05/28/Hexo/</url>
    <content><![CDATA[<h2 id="å¿«é€Ÿå¼€å§‹-Hexo"><a href="#å¿«é€Ÿå¼€å§‹-Hexo" class="headerlink" title="å¿«é€Ÿå¼€å§‹ Hexo"></a>å¿«é€Ÿå¼€å§‹ Hexo</h2><span id="more"></span>

<h3 id="åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« "><a href="#åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« " class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« "></a>åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« </h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="è¿è¡ŒæœåŠ¡å™¨"><a href="#è¿è¡ŒæœåŠ¡å™¨" class="headerlink" title="è¿è¡ŒæœåŠ¡å™¨"></a>è¿è¡ŒæœåŠ¡å™¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br><span class="line">$ <span class="comment"># hexo s</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="ç”Ÿæˆé™æ€æ–‡ä»¶"><a href="#ç”Ÿæˆé™æ€æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé™æ€æ–‡ä»¶"></a>ç”Ÿæˆé™æ€æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line">$ <span class="comment"># hexo g</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="å‘å¸ƒåˆ°è¿œç¨‹ç½‘ç«™"><a href="#å‘å¸ƒåˆ°è¿œç¨‹ç½‘ç«™" class="headerlink" title="å‘å¸ƒåˆ°è¿œç¨‹ç½‘ç«™"></a>å‘å¸ƒåˆ°è¿œç¨‹ç½‘ç«™</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br><span class="line">$ <span class="comment">#hexo d</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 126.å•è¯æ¥é¾™ ||</title>
    <url>/2021/06/21/LeetCode/leetcode-126/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>ç»™å®šä¸¤ä¸ªå•è¯ï¼ˆbeginWord å’Œ endWordï¼‰å’Œä¸€ä¸ªå­—å…¸ wordListï¼Œæ‰¾å‡ºæ‰€æœ‰ä» beginWord åˆ° endWord çš„æœ€çŸ­è½¬æ¢åºåˆ—ã€‚è½¬æ¢éœ€éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š</p>
<p>æ¯æ¬¡è½¬æ¢åªèƒ½æ”¹å˜ä¸€ä¸ªå­—æ¯ã€‚<br>è½¬æ¢åå¾—åˆ°çš„å•è¯å¿…é¡»æ˜¯å­—å…¸ä¸­çš„å•è¯ã€‚<br>è¯´æ˜:</p>
<ul>
<li>å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„è½¬æ¢åºåˆ—ï¼Œè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</li>
<li>æ‰€æœ‰å•è¯å…·æœ‰ç›¸åŒçš„é•¿åº¦ã€‚</li>
<li>æ‰€æœ‰å•è¯åªç”±å°å†™å­—æ¯ç»„æˆã€‚</li>
<li>å­—å…¸ä¸­ä¸å­˜åœ¨é‡å¤çš„å•è¯ã€‚</li>
<li>ä½ å¯ä»¥å‡è®¾ beginWord å’Œ endWord æ˜¯éç©ºçš„ï¼Œä¸”äºŒè€…ä¸ç›¸åŒã€‚<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">beginWord = &quot;hit&quot;,</span><br><span class="line">endWord = &quot;cog&quot;,</span><br><span class="line">wordList = [&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;lot&quot;,&quot;log&quot;,&quot;cog&quot;]</span><br><span class="line"></span><br><span class="line">è¾“å‡º:</span><br><span class="line">[</span><br><span class="line">  [&quot;hit&quot;,&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;cog&quot;],</span><br><span class="line">Â  [&quot;hit&quot;,&quot;hot&quot;,&quot;lot&quot;,&quot;log&quot;,&quot;cog&quot;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">beginWord = &quot;hit&quot;</span><br><span class="line">endWord = &quot;cog&quot;</span><br><span class="line">wordList = [&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;lot&quot;,&quot;log&quot;]</span><br><span class="line"></span><br><span class="line">è¾“å‡º: []</span><br><span class="line"></span><br><span class="line">è§£é‡Š:Â endWord &quot;cog&quot; ä¸åœ¨å­—å…¸ä¸­ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ç¬¦åˆè¦æ±‚çš„è½¬æ¢åºåˆ—ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æ ¹æ®é¢˜æ„å…ˆå°†å•è¯è¡¨æ„æˆä¸€ä¸ªæ— å‘å›¾ï¼Œç„¶åbfsæœç´¢è·¯å¾„ã€‚</p>
<p>è¿™é‡Œæ³¨æ„ï¼Œå› ä¸ºè¦æ±‚è¿”å›å…¨éƒ¨æœ€çŸ­è·¯å¾„ï¼Œæ‰€ä»¥bfsçš„é˜Ÿåˆ—ä¸­å•çº¯çš„å­˜èŠ‚ç‚¹è¡Œä¸é€šï¼ˆ<del>Maybeå¯ä»¥å§</del>ï¼‰ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å­˜è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯<strong>ä»èµ·ç‚¹åˆ°è¿™ä¸ªç‚¹çš„è·¯å¾„</strong>ï¼Œå…¶ä»–çš„å’Œæ™®é€šbfsæ²¡ä»€ä¹ˆä¸¤æ ·ã€‚</p>
<p>å¦å¤–å°±æ˜¯æ—¶é—´å¡çš„æœ‰ç‚¹ç´§ï¼Œåœ¨æ„å›¾çš„æ—¶å€™æ²¡æœ‰é‚£å¥<code>if(tmp &gt; 1) break;</code>å°±è¶…æ—¶äº†ï¼Ÿï¼Ÿæ‰¾ä¸ªæ—¶é—´ä¼˜åŒ–ä¸€ä¸‹ç®—æ³•ã€‚</p>
<hr>
<p>( è¿™ä¸ªé¢˜ç¡®å®æœ‰ç‚¹è®©äººå¤´å¤§ï¼Œè¿˜æ˜¯å¤ªèœäº†</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;vector&lt;string&gt;&gt; <span class="built_in">findLadders</span>(string beginWord, string endWord, vector&lt;string&gt;&amp; wordList) &#123;</span><br><span class="line">    <span class="keyword">int</span> n, len, beg, end;</span><br><span class="line">    unordered_map&lt;string, <span class="keyword">int</span>&gt; wti;</span><br><span class="line">    vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; G;  </span><br><span class="line">    vector&lt;string&gt; words;  <span class="comment">//æ‹·è´å•è¯è¡¨</span></span><br><span class="line"></span><br><span class="line">    n = wordList.<span class="built_in">size</span>(); <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    len = wordList[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">    words = wordList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        wti[words[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!wti.<span class="built_in">count</span>(endWord)) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(!wti.<span class="built_in">count</span>(beginWord)) &#123; words.<span class="built_in">push_back</span>(beginWord); wti[beginWord] = n++; &#125;</span><br><span class="line">    </span><br><span class="line">    beg = wti[beginWord];</span><br><span class="line">    end = wti[endWord];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„å›¾</span></span><br><span class="line">    G.<span class="built_in">resize</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; len; k++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(words[i][k] != words[j][k]) tmp++;</span><br><span class="line">                <span class="keyword">if</span>(tmp &gt; <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(tmp == <span class="number">1</span>) &#123;</span><br><span class="line">                G[i].<span class="built_in">push_back</span>(j);</span><br><span class="line">                G[j].<span class="built_in">push_back</span>(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;vector&lt;string&gt;&gt; ans;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æœè·¯</span></span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dis</span><span class="params">(n, <span class="number">0x3f3f3f</span>)</span></span>;</span><br><span class="line">    dis[beg] = <span class="number">0</span>;</span><br><span class="line">    queue&lt;vector&lt;string&gt;&gt; q;</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;beginWord&#125;);</span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        vector&lt;string&gt; path = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">int</span> u = wti[path.<span class="built_in">back</span>()];</span><br><span class="line">        <span class="keyword">if</span>(u == end) &#123;</span><br><span class="line">            ans.<span class="built_in">push_back</span>(path);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> v : G[u]) &#123;</span><br><span class="line">                <span class="keyword">if</span>(dis[u] + <span class="number">1</span> &lt;= dis[v]) &#123;</span><br><span class="line">                    vector&lt;string&gt; tmp = path;</span><br><span class="line">                    tmp.<span class="built_in">push_back</span>(words[v]);</span><br><span class="line">                    q.<span class="built_in">push</span>(tmp);</span><br><span class="line">                    dis[v] = dis[u] + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æœç´¢</tag>
        <tag>æœ€çŸ­è·¯</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 128.æœ€é•¿è¿ç»­åºåˆ—</title>
    <url>/2021/06/22/LeetCode/leetcode-128/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾å‡ºæœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦ã€‚</p>
<p>è¦æ±‚ç®—æ³•çš„**æ—¶é—´å¤æ‚åº¦ä¸º O(n)**ã€‚</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: [100, 4, 200, 1, 3, 2]</span><br><span class="line">è¾“å‡º: 4</span><br><span class="line">è§£é‡Š: æœ€é•¿è¿ç»­åºåˆ—æ˜¯ [1, 2, 3, 4]ã€‚å®ƒçš„é•¿åº¦ä¸º 4ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$ è‡ªç„¶æ˜¯<strong>ä¸èƒ½æ’åº</strong>äº†ï¼Œå¹¶æŸ¥é›†å¯ä»¥æŠŠ<strong>å±æ€§ç›¸ä¼¼çš„ä¸€ç±»æ•°èšåœ¨ä¸€èµ·çš„ä½œç”¨</strong>ï¼Œè€Œä¸”å‹ç¼©åçš„å¹¶æŸ¥é›†æ—¶é—´å¤æ‚åº¦ä¹Ÿå¾ˆå¯è§‚ã€‚</p>
<ul>
<li><p>å…ˆåˆå§‹åŒ–æ•°ç»„ä¸­æ¯ä¸€ä¸ªæ•°æŒ‡å‘æœ¬èº«ã€‚</p>
</li>
<li><p>å¾ªç¯æ•°ç»„</p>
<ul>
<li><p>å¦‚æœ $nums[i] + 1$ åœ¨å¹¶æŸ¥é›†ä¸­ï¼Œ $nums[i] + 1$ æŒ‡å‘ $nums[i]$ã€‚</p>
</li>
<li><p>å¦‚æœ $nums[i] - 1$ åœ¨å¹¶æŸ¥é›†ä¸­ï¼Œ $nums[i]$ æŒ‡å‘ $nums[i] - 1$ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>âš è¿™é¢˜ä¾ç„¶æœ‰ä¸ªç©ºæ•°ç»„é—®é¢˜ï¼Œåˆè¢«å‘äº†ã€‚ã€‚ã€‚</strong></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">unordered_map&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; p;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x == p[x] ? x : p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">longestConsecutive</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.<span class="built_in">size</span>(); <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> item : nums) &#123; p[item] = item; &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> item : nums) &#123;</span><br><span class="line">        <span class="keyword">if</span>(p.<span class="built_in">count</span>(item + <span class="number">1</span>)) p[item + <span class="number">1</span>] = item;</span><br><span class="line">        <span class="keyword">if</span>(p.<span class="built_in">count</span>(item - <span class="number">1</span>)) p[item] = item - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> item : nums) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="built_in">find</span>(item);</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, item - temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>å¹¶æŸ¥é›†</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 238.é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯</title>
    <url>/2021/06/22/LeetCode/leetcode-238/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸ºÂ nÂ çš„æ•´æ•°æ•°ç»„Â numsï¼Œå…¶ä¸­Â n &gt; 1ï¼Œè¿”å›è¾“å‡ºæ•°ç»„Â outputÂ ï¼Œå…¶ä¸­ output[i]Â ç­‰äºÂ numsÂ ä¸­é™¤Â nums[i]Â ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯ã€‚</p>
<p><strong>æç¤º</strong>ï¼šé¢˜ç›®æ•°æ®ä¿è¯æ•°ç»„ä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€ï¼ˆç”šè‡³æ˜¯æ•´ä¸ªæ•°ç»„ï¼‰çš„ä¹˜ç§¯éƒ½åœ¨ 32 ä½æ•´æ•°èŒƒå›´å†…ã€‚</p>
<p><strong>è¯´æ˜</strong>: è¯·ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œä¸”åœ¨Â O(n) æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚</p>
<p><strong>è¿›é˜¶</strong>ï¼šä½ å¯ä»¥åœ¨å¸¸æ•°ç©ºé—´å¤æ‚åº¦å†…å®Œæˆè¿™ä¸ªé¢˜ç›®å—ï¼Ÿï¼ˆ å‡ºäºå¯¹ç©ºé—´å¤æ‚åº¦åˆ†æçš„ç›®çš„ï¼Œè¾“å‡ºæ•°ç»„ä¸è¢«è§†ä¸ºé¢å¤–ç©ºé—´ã€‚)</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: [1,2,3,4]</span><br><span class="line">è¾“å‡º: [24,12,8,6]</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ul>
<li><p>å¸¸è§„åšæ³•<br>  ä¸€çœ‹åˆ°çš„ä¸€ä¸‹å­æƒ³åˆ°çš„å¯èƒ½å°±æ˜¯æŠŠæ‰€æœ‰æ•°ç´¯ä¹˜èµ·æ¥ï¼Œç„¶å<strong>å¾ªç¯</strong>ä¸€è¾¹ï¼Œå¾ªç¯åˆ°é‚£ä¸ªæ•°å°±<strong>é™¤æ‰</strong>å“ªä¸ªæ•°ã€‚ä½†æ˜¯æ³¨æ„å¦‚æœè¿™ä¸ªé¢˜æ˜¯ç´¯åŠ çš„è¯å¯ä»¥è¿™æ ·åšï¼Œä½†æ˜¯è¿™ä¸ªé¢˜æ˜¯ç´¯ä¹˜ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä½ç½®æ˜¯0ï¼Œè¿™æ—¶å€™å°±ä¼šå‡ºé”™ã€‚</p>
<p>  æ‰€ä»¥è€ƒè™‘å¦ä¸€ç§æ–¹æ³•ï¼Œå°†æ•°ç»„åšä¸€æ¬¡<strong>å‰ç¼€å’Œåç¼€ç´¯ä¹˜</strong>ï¼Œå¾ªç¯åˆ°æŸä¸ªæ•°çš„æ—¶å€™å°†è¯¥æ•°<strong>å‰ç¼€ä¹˜ä»¥åç¼€</strong>å³å¯</p>
</li>
<li><p>è¿›é˜¶åšæ³•<br>  åœ¨è¿›é˜¶é‡Œé¢è¦æ±‚åˆ°å¸¸æ•°ç©ºé—´å¤æ‚åº¦ï¼Œå¦‚æœæ˜¯æŒ‰ç…§å¸¸è§„åšæ³•ï¼Œéœ€è¦ç”¨åˆ°<strong>leftå’Œright</strong>ä¸¤ä¸ªæ•°ç»„åˆ†åˆ«å­˜<strong>å‰ç¼€å’Œåç¼€</strong>ï¼Œå¦å¤–è¿˜å¾—å¼€ä¸€ä¸ªç­”æ¡ˆæ•°ç»„å»å­˜å‚¨è®¡ç®—ç­”æ¡ˆã€‚è¿™æ ·ç©ºé—´å¤æ‚åº¦æ˜æ˜¾æ˜¯ $O(n)$ ï¼Œå› ä¸ºé¢˜ç›®è¦æ±‚ä¸­è®²åˆ°</p>
<blockquote>
<p>å‡ºäºå¯¹ç©ºé—´å¤æ‚åº¦åˆ†æçš„ç›®çš„ï¼Œè¾“å‡ºæ•°ç»„ä¸è¢«è§†ä¸ºé¢å¤–ç©ºé—´ã€‚</p>
</blockquote>
<p>  ä¹Ÿå°±æ˜¯å¸¸æ•°ç©ºé—´å¤æ‚åº¦çš„è¯å°±éœ€è¦æŠŠç­”æ¡ˆæ•°ç»„æ‹¿è¿›æ¥<strong>é‡æ–°åˆ©ç”¨</strong>ï¼Œäºæ˜¯å¯ä»¥æƒ³åˆ°å¦‚ä¸‹åšæ³•</p>
<blockquote>
<p>å‡è®¾nums[] = {a, b, c, d}<br>  ä»¤ans[] = {1, a, ab, abc}<br>  ç„¶åå€’ç€è®¡ç®—ä¸€è¾¹ansæ•°ç»„ä½¿å¾—<br>  ans[] = {1 * bcd, a * cd, ab * d, abc}</p>
</blockquote>
<p>  è¿™ä¸åˆšå¥½å°±æ˜¯ç­”æ¡ˆå—ã€‚è¿™ä¸ªé¢˜çš„åšæ³•å°±å‡ºæ¥äº†</p>
</li>
</ul>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><ul>
<li><p>å¸¸è§„åšæ³•</p>
  <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">productExceptSelf</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">left</span><span class="params">(n)</span>, <span class="title">right</span><span class="params">(n)</span>, <span class="title">ans</span><span class="params">(n)</span></span>;</span><br><span class="line">    </span><br><span class="line">    left[<span class="number">0</span>] = nums[<span class="number">0</span>]; right[n - <span class="number">1</span>] = nums[n - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123; left[i] = nums[i] * left[i - <span class="number">1</span>]; &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123; right[i] = nums[i] * right[i + <span class="number">1</span>]; &#125;</span><br><span class="line">    </span><br><span class="line">    ans[<span class="number">0</span>] = right[<span class="number">1</span>]; ans[n - <span class="number">1</span>] = left[n - <span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        ans[i] = left[i - <span class="number">1</span>] * right[i + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>è¿›é˜¶åšæ³•</p>
  <figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">productExceptSelf</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">ans</span><span class="params">(n, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123; </span><br><span class="line">        ans[i] = ans[i - <span class="number">1</span>] * nums[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> tmp = nums[n - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        ans[i] *= tmp;</span><br><span class="line">        tmp *= nums[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>å‰ç¼€å’Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 15.æ–°21ç‚¹</title>
    <url>/2021/06/20/LeetCode/leetcode-15/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„Â numsï¼Œåˆ¤æ–­Â numsÂ ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾—Â a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [-1, 0, 1, 2, -1, 4]</span><br><span class="line">è¾“å‡ºï¼šans = [[-1, 0, 1], [-1, -1, 2]]</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>æ’åº+åŒæŒ‡é’ˆ+vectoræ•°ç»„å»é‡ï¼Œå»é‡æœ‰ä¸¤ç§æ–¹å¼ğŸ™‚</p>
<ul>
<li><p>vector + setå»é‡<br><code>set&lt;vector&lt;int&gt;&gt; s(ans.begin(), ans.end());</code><br><code>ans.assign(s.begin(), s.end());</code></p>
<p>  è¿‡æ˜¯å¯ä»¥è¿‡ï¼Œä½†æ˜¯â€¦.<br>  <a href="https://imgtu.com/i/RuxDV1"><img src="https://z3.ax1x.com/2021/06/23/RuxDV1.png" alt="RuxDV1.png"></a></p>
</li>
<li><p>ç¬¬äºŒç§å°±æ˜¯åœ¨ä»£ç é‡Œé¢å»é‡ï¼Œå¦‚æœç¢°åˆ°é‡å¤çš„å°±è·³è¿‡ï¼Œè¿™ä¸ªä¸ç®—å¤ªå·®..<br>  <a href="https://imgtu.com/i/Rux0bR"><img src="https://z3.ax1x.com/2021/06/23/Rux0bR.png" alt="Rux0bR.png"></a></p>
</li>
</ul>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; <span class="built_in">threeSum</span>(vector&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">if</span>(nums.<span class="built_in">size</span>() &lt; <span class="number">3</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(), nums.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt; ans;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">2</span> &amp;&amp; nums[i] &lt;= <span class="number">0</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> l = i + <span class="number">1</span>, r = n - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = nums[i] + nums[l] + nums[r];</span><br><span class="line">            <span class="keyword">if</span>(tmp &gt; <span class="number">0</span>) r--;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(tmp &lt; <span class="number">0</span>) l++;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">while</span>(l &lt; r &amp;&amp; nums[l] == nums[l + <span class="number">1</span>]) l++;</span><br><span class="line">                <span class="keyword">while</span>(l &lt; r &amp;&amp; nums[r] == nums[r - <span class="number">1</span>]) r--;</span><br><span class="line">                ans.<span class="built_in">push_back</span>(&#123;nums[i], nums[l], nums[r]&#125;);</span><br><span class="line">                l++; r--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ’åº</tag>
        <tag>åŒæŒ‡é’ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 29.é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ</title>
    <url>/2021/06/21/LeetCode/leetcode-29/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—ã€‚</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix = [[1,2,3],[4,5,6],[7,8,9]]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,6,9,8,7,4,5]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix =Â [[1,2,3,4],[5,6,7,8],[9,10,11,12]]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3,4,8,12,11,10,9,5,6,7]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0 &lt;= matrix.length &lt;= 100</span><br><span class="line">0 &lt;= matrix[i].lengthÂ &lt;= 100</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ç›´æ¥æŒ‰ç…§é¢˜æ„è½¬å°±å¥½äº†ï¼Œè¿™é“é¢˜è™½ç„¶æ ‡çš„Easyï¼Œä½†è¿˜æ˜¯è¢«<strong>ç©ºå‘é‡</strong>å’Œ<strong>æ•°æ®èŒƒå›´ä¸æ˜ç¡®</strong>ç»™å‘äº†ä¸€ä¸‹ã€‚ã€‚</p>
<p>æ²¡æœ‰æ•°æ®èŒƒå›´ï¼Œæˆ‘ç›´æ¥æŠŠè®¿é—®è¿‡çš„åœ°æ–¹æ ‡è®° $0x3f3f3f3f$ ä½†å…¶å®è¿™ç§åšæ³•æ˜¯ä¸å¯¹çš„ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨å¦ä¸€ä¸ª $vis$ æ•°ç»„ï¼Œ$vis[i][j]$ è¡¨ç¤º$i,j$ è¿™ä¸ªä½ç½®è¾“å‡ºè¿‡äº†ã€‚</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ok</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> &lt;= x &amp;&amp; x &lt; n &amp;&amp; <span class="number">0</span> &lt;= y &amp;&amp; y &lt; m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">spiralOrder</span><span class="params">(vector&lt;vector&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = matrix.<span class="built_in">size</span>(); <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    <span class="keyword">int</span> m = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">ans</span><span class="params">(n * m)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>, tmp = <span class="number">0</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> d[<span class="number">4</span>][<span class="number">2</span>] = &#123; &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125; &#125;;</span><br><span class="line">    ans[cnt++] = matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    matrix[x][y] = inf;</span><br><span class="line">    <span class="keyword">while</span>(cnt &lt; n * m) &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">ok</span>(x + d[tmp][<span class="number">0</span>], y + d[tmp][<span class="number">1</span>], n, m) &amp;&amp; matrix[x + d[tmp][<span class="number">0</span>]][y + d[tmp][<span class="number">1</span>]] != inf) &#123;</span><br><span class="line">            ans[cnt++] = matrix[x + d[tmp][<span class="number">0</span>]][y + d[tmp][<span class="number">1</span>]];</span><br><span class="line">            matrix[x + d[tmp][<span class="number">0</span>]][y + d[tmp][<span class="number">1</span>]] = inf;</span><br><span class="line">            x += d[tmp][<span class="number">0</span>];</span><br><span class="line">            y += d[tmp][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        tmp = (tmp + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>æ•°ç»„</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 42.è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ</title>
    <url>/2021/06/21/LeetCode/leetcode-42/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>è¾“å…¥ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰æ­£æ•°ä¹Ÿæœ‰è´Ÿæ•°ã€‚æ•°ç»„ä¸­çš„ä¸€ä¸ªæˆ–è¿ç»­å¤šä¸ªæ•´æ•°ç»„æˆä¸€ä¸ªå­æ•°ç»„ã€‚æ±‚æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚</p>
<p>è¦æ±‚<strong>æ—¶é—´å¤æ‚åº¦</strong>ä¸º $O(n)$ ã€‚</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: nums = [-2,1,-3,4,-1,2,1,-5,4]</span><br><span class="line">è¾“å‡º: 6</span><br><span class="line">è§£é‡Š:Â è¿ç»­å­æ•°ç»„Â [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸ºÂ 6ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 &lt;=Â arr.length &lt;= 10^5</span><br><span class="line">-100 &lt;= arr[i] &lt;= 100</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p><strong>çŠ¶æ€å®šä¹‰</strong>ï¼š$dp[i]$ = ä»¥$nums[i]$ä¸ºç»“å°¾çš„è¿ç»­å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼</p>
<p><strong>è½¬ç§»æ–¹ç¨‹</strong>ï¼šè‹¥ $dp[i-1] \leq 0$ ï¼Œè¯´æ˜ $dp[iâˆ’1]$ å¯¹ $dp[i]$ äº§ç”Ÿè´Ÿè´¡çŒ®ï¼Œå³ $dp[i-1] + nums[i]$ è¿˜ä¸å¦‚ $nums[i]$ æœ¬èº«å¤§ã€‚</p>
<ul>
<li><p>å½“ $dp[i-1] \leq 0$ï¼Œ$dp[i]=nums[i]$</p>
</li>
<li><p>å½“ $dp[i-1]&gt;0$ï¼Œ$dp[i] = dp[i-1]+nums[i]$</p>
</li>
</ul>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">dp</span><span class="params">(nums.size())</span></span>;</span><br><span class="line">    dp[<span class="number">0</span>] = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> ans = nums[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">        dp[i] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>] + nums[i], nums[i]);</span><br><span class="line">        ans = <span class="built_in">max</span>(ans, dp[i]); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 837.æ–°21ç‚¹</title>
    <url>/2021/06/22/LeetCode/leetcode-837/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><p>çˆ±ä¸½ä¸å‚ä¸ä¸€ä¸ªå¤§è‡´åŸºäºçº¸ç‰Œæ¸¸æˆ â€œ21ç‚¹â€ è§„åˆ™çš„æ¸¸æˆï¼Œæè¿°å¦‚ä¸‹ï¼š</p>
<p>çˆ±ä¸½ä¸ä»¥ 0 åˆ†å¼€å§‹ï¼Œå¹¶åœ¨å¥¹çš„å¾—åˆ†å°‘äº K åˆ†æ—¶æŠ½å–æ•°å­—ã€‚ æŠ½å–æ—¶ï¼Œå¥¹ä» [1, W] çš„èŒƒå›´ä¸­éšæœºè·å¾—ä¸€ä¸ªæ•´æ•°ä½œä¸ºåˆ†æ•°è¿›è¡Œç´¯è®¡ï¼Œå…¶ä¸­ W æ˜¯æ•´æ•°ã€‚ æ¯æ¬¡æŠ½å–éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå…¶ç»“æœå…·æœ‰ç›¸åŒçš„æ¦‚ç‡ã€‚</p>
<p>å½“çˆ±ä¸½ä¸è·å¾—ä¸å°‘äº K åˆ†æ—¶ï¼Œå¥¹å°±åœæ­¢æŠ½å–æ•°å­—ã€‚ çˆ±ä¸½ä¸çš„åˆ†æ•°ä¸è¶…è¿‡ N çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ</p>
<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = 10, K = 1, W = 10</span><br><span class="line">è¾“å‡ºï¼š1.00000</span><br><span class="line">è¯´æ˜ï¼šçˆ±ä¸½ä¸å¾—åˆ°ä¸€å¼ å¡ï¼Œç„¶ååœæ­¢ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = 6, K = 1, W = 10</span><br><span class="line">è¾“å‡ºï¼š0.60000</span><br><span class="line">è¯´æ˜ï¼šçˆ±ä¸½ä¸å¾—åˆ°ä¸€å¼ å¡ï¼Œç„¶ååœæ­¢ã€‚</span><br><span class="line">åœ¨ W = 10 çš„ 6 ç§å¯èƒ½ä¸‹ï¼Œå¥¹çš„å¾—åˆ†ä¸è¶…è¿‡ N = 6 åˆ†ã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šN = 21, K = 17, W = 10</span><br><span class="line">è¾“å‡ºï¼š0.73278</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. 0 &lt;= K &lt;= N &lt;= 10000</span><br><span class="line">2. 1 &lt;= W &lt;= 10000</span><br><span class="line">3. å¦‚æœç­”æ¡ˆä¸æ­£ç¡®ç­”æ¡ˆçš„è¯¯å·®ä¸è¶…è¿‡ 10^-5ï¼Œåˆ™è¯¥ç­”æ¡ˆå°†è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆé€šè¿‡ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å®šä¹‰è¿™æ ·çš„<strong>dpæ•°ç»„</strong><br>$$dp[i] = ä»¤åˆå§‹åˆ†æ•°ä¸ºiï¼ŒæŠ½ç‰Œç»“æŸåä¸è¶…è¿‡Nçš„æ¦‚ç‡$$</p>
<p>åˆå§‹åŒ– $dp$ æ•°ç»„çš„æ—¶å€™ $dp[i]=1,i \in [K,N]$ $dp[i]=0,i \in (N,+ \infty )$ </p>
<p>å½“<strong>åˆå§‹åˆ†æ•°</strong>ä¸º $K-1$ æ—¶ï¼Œå¾ˆæ˜æ˜¾çŸ¥é“<strong>æ¦‚ç‡</strong>ä¸º $P= \frac{\sum_{i=K}^{K+W} dp[i]}{W}$ ï¼Œè¿™æ—¶é¡ºç€å…¬å¼ä»k-1æ¨å›0å³å¯ã€‚</p>
<p>ä½†æ˜¯è¿™é‡Œæ³¨æ„ä¸€ä¸‹æ•°æ®èŒƒå›´ï¼Œå¦‚æœæ˜¯è¿™æ ·å…ˆå¾ªç¯ä¸€ä¸ª $K$ ï¼Œå†å¾ªç¯ $W$ ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šå¾ˆé«˜æ‰€ä»¥åœ¨å¤„ç†çš„æ—¶å€™æ³¨æ„ä¸€ä¸‹é‚£ä¸€æ®µ $\sum_{i=K}^{K+W} dp[i]$ ï¼Œ<strong>è®¡ç®—çš„æ—¶å€™å¯ä»¥å‡å»åŒºé—´åé¢çš„ï¼Œå†åŠ ä¸ŠåŒºé—´å‰é¢çš„ã€‚</strong></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">new21Game</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span> K, <span class="keyword">int</span> W)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">double</span>&gt; <span class="title">dp</span><span class="params">(N + W + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = K; i &lt;= N; i++) dp[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">double</span> tmp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = K + <span class="number">1</span>; i &lt;= K + W; i++) tmp += dp[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = K - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        tmp += dp[i + <span class="number">1</span>];</span><br><span class="line">        tmp -= dp[i + <span class="number">1</span> + W];</span><br><span class="line">        dp[i] = tmp / W;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode - 64.æ±‚1+2+...+n</title>
    <url>/2021/06/21/LeetCode/leetcode-64/</url>
    <content><![CDATA[<h3 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h3><ul>
<li>æ±‚ 1+2+â€¦+n ï¼Œè¦æ±‚ä¸èƒ½ä½¿ç”¨ä¹˜é™¤æ³•ã€forã€whileã€ifã€elseã€switchã€caseç­‰å…³é”®å­—åŠæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼ˆA?B:Cï¼‰ã€‚<span id="more"></span>
<h3 id="æ ·ä¾‹"><a href="#æ ·ä¾‹" class="headerlink" title="æ ·ä¾‹"></a>æ ·ä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: n = 3</span><br><span class="line">è¾“å‡º: 6</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: n = 9</span><br><span class="line">è¾“å‡º: 45</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>å¯ä»¥å…ˆæ€è€ƒé€šè¿‡æ±‚å’Œå…¬å¼ <code>n * (n + 1) &gt;&gt; 1</code> ä½†è¿™ç§æ–¹å¼å¿…é¡»è¦ç”¨ä¹˜æ³•ï¼Œä¸ç„¶çš„è¯éœ€è¦<code>if</code>æ¥åšåˆ¤æ–­ï¼Œåœ¨å¶æ•°é‚£é‡Œ <code> &gt;&gt; 1</code> ï¼Œæ‰€ä»¥è¿™ä¸ªæ€è·¯ä¼šè¡Œä¸é€šã€‚</p>
<p>é€šè¿‡å¾ªç¯æ¥æ±‚å’Œ <code>while(n) sum += (n--);</code> ä½†æ˜¯ä¼šç”¨åˆ°<code>while</code>å¯è¿™å·²ç»å¾ˆç²¾ç®€äº†ï¼Œæ²¡æœ‰ç”¨åˆ°ä¹˜é™¤æ³•åªæ˜¯å¤šäº†ä¸€ä¸ªwhileï¼Œwhileåˆå¯ä»¥é€šè¿‡é€’å½’æ¶ˆæ‰ã€‚</p>
<ul>
<li>æ€è€ƒå¦‚ä½•å»æ‰whileå¾ªç¯ï¼Œè¿™é‡Œè¦æ˜ç¡®ä¸€ç‚¹ï¼Œåœ¨ <code>C/C++</code> ä¸­<code>&amp;&amp;</code>å’Œ<code>||</code>æ“ä½œå¹¶ä¸æ˜¯å¯¹ä¸¤ä¸ªæ“ä½œæ•°éƒ½å»åˆ¤æ–­ä¸€ä¸‹ï¼Œ<strong>è€Œæ˜¯å½“<code>&amp;&amp;</code>, <code>||</code>ç¬¬ä¸€ä¸ªæ“ä½œæ•°å°±å·²ç»æ»¡è¶³æ¡ä»¶çš„æƒ…å†µä¸‹ä¸ä¼šå†å»åˆ¤æ–­ç¬¬äºŒä¸ªæ“ä½œæ•°äº†</strong>ï¼Œåˆ©ç”¨è¿™ä¸€ç‚¹å¯ä»¥ä½œä¸ºé€’å½’çš„è¾¹ç•Œåˆ¤æ–­ã€‚<br>  å‡è®¾å½“å‰å¾ªç¯åˆ°äº† $x$<ul>
<li><code>!x || (sum += x)</code> è¡¨ç¤ºå½“ $x$ è¾¾åˆ°<strong>å‘ä¸‹</strong>å¾ªç¯è¾¹ç•Œ 0 æ—¶è¿”å› <code>false</code>ï¼Œè¿™æ—¶é€’å½’åœæ­¢</li>
<li><code>x &amp;&amp; ï¼ˆsum += x)</code> è¡¨ç¤ºå½“ $x$ è¾¾åˆ°<strong>å‘ä¸‹</strong>å¾ªç¯è¾¹ç•Œ 0 æ—¶è¿”å› <code>false</code>ï¼Œé€’å½’åœæ­¢</li>
<li><code>x ^ n</code> è¡¨ç¤ºå½“ $x$ è¾¾åˆ°<strong>å‘ä¸Š</strong>å¾ªç¯è¾¹ç•Œ n æ—¶é€’å½’åœæ­¢ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•éœ€è¦å¦ä¸€ä¸ªå‡½æ•°çš„é…åˆ</li>
</ul>
</li>
</ul>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><ul>
<li>3ç§</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sumNums</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    !n || (n += <span class="built_in">sumNums</span>(n - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sumNums</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    n &amp;&amp; (n += <span class="built_in">sumNums</span>(n - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">subSum</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    (x ^ n) &amp;&amp; (x += <span class="built_in">subSum</span>(x + <span class="number">1</span>, n));</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sumNums</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">subSum</span>(<span class="number">1</span>, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/06/02/Og8FAjvZ6pR2SKQ.png" alt="leetcode6-2_2.png"></p>
]]></content>
      <categories>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>ä½è¿ç®—</tag>
      </tags>
  </entry>
  <entry>
    <title>mongoose APIå‚è€ƒ</title>
    <url>/2021/08/01/mongoose-API%E5%8F%82%E8%80%83/</url>
    <content><![CDATA[<h3 id="é€šç”¨API"><a href="#é€šç”¨API" class="headerlink" title="é€šç”¨API"></a>é€šç”¨API</h3><span id="more"></span>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">http_message</span> &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">message</span>;</span> <span class="comment">/* Whole message: request line + headers + body */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">body</span>;</span>    <span class="comment">/* Message body. 0-length for requests with no body */</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/* HTTP Request line (or HTTP response line) */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">method</span>;</span> <span class="comment">/* &quot;GET&quot; */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">uri</span>;</span>    <span class="comment">/* &quot;/my_file.html&quot; */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">proto</span>;</span>  <span class="comment">/* &quot;HTTP/1.1&quot; -- for both request and response */</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/* For responses, code and response status message are set */</span></span><br><span class="line">  <span class="keyword">int</span> resp_code;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">resp_status_msg</span>;</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * Query-string part of the URI. For example, for HTTP request</span></span><br><span class="line"><span class="comment">   *    GET /foo/bar?param1=val1&amp;param2=val2</span></span><br><span class="line"><span class="comment">   *    |    uri    |     query_string     |</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * Note that question mark character doesn&#x27;t belong neither to the uri,</span></span><br><span class="line"><span class="comment">   * nor to the query_string</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">query_string</span>;</span></span><br><span class="line"> </span><br><span class="line">  <span class="comment">/* Headers */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">header_names</span>[<span class="title">MG_MAX_HTTP_HEADERS</span>];</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">header_values</span>[<span class="title">MG_MAX_HTTP_HEADERS</span>];</span></span><br><span class="line">&#125;;<span class="comment">///HTTPæ¶ˆæ¯</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">websocket_message</span> &#123;</span></span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> *data;</span><br><span class="line">  <span class="keyword">size_t</span> size;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> flags;</span><br><span class="line">&#125;;<span class="comment">///websocketæ¶ˆæ¯</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mg_http_multipart_part</span> &#123;</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *file_name;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *var_name;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">data</span>;</span></span><br><span class="line">  <span class="keyword">int</span> status; <span class="comment">/* &lt;0 on error */</span></span><br><span class="line">  <span class="keyword">void</span> *user_data;</span><br><span class="line">&#125;;<span class="comment">///HTTPåˆ†åŒ…éƒ¨åˆ†</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mg_ssi_call_ctx</span> &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">http_message</span> *<span class="title">req</span>;</span> <span class="comment">/* The request being processed. */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">file</span>;</span>       <span class="comment">/* Filesystem path of the file being processed. */</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">mg_str</span> <span class="title">arg</span>;</span> <span class="comment">/* The argument passed to the tag: &lt;!-- call arg --&gt;. */</span></span><br><span class="line">&#125;;<span class="comment">///SSIè°ƒç”¨ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_set_protocol_http_websocket</span><span class="params">(struct mg_connection *nc)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_handshake</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *uri,</span></span></span><br><span class="line"><span class="params"><span class="function">                                 <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_handshake2</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *path,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *host, <span class="keyword">const</span> <span class="keyword">char</span> *protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_handshake3</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *path,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *host, <span class="keyword">const</span> <span class="keyword">char</span> *protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers, <span class="keyword">const</span> <span class="keyword">char</span> *user,</span></span></span><br><span class="line"><span class="params"><span class="function">                                  <span class="keyword">const</span> <span class="keyword">char</span> *pass)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_handshake3v</span><span class="params">(struct mg_connection *nc,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str path,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str host,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str extra_headers,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str user,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> struct mg_str pass)</span></span>;</span><br><span class="line"><span class="function">struct mg_connection *<span class="title">mg_connect_ws</span><span class="params">(struct mg_mgr *mgr,</span></span></span><br><span class="line"><span class="params"><span class="function">                                    MG_CB(<span class="keyword">mg_event_handler_t</span> event_handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                          <span class="keyword">void</span> *user_data),</span></span></span><br><span class="line"><span class="params"><span class="function">                                    <span class="keyword">const</span> <span class="keyword">char</span> *url, <span class="keyword">const</span> <span class="keyword">char</span> *protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">                                    <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="function">struct mg_connection *<span class="title">mg_connect_ws_opt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_mgr *mgr, MG_CB(<span class="keyword">mg_event_handler_t</span> ev_handler, <span class="keyword">void</span> *user_data),</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_connect_opts opts, <span class="keyword">const</span> <span class="keyword">char</span> *url, <span class="keyword">const</span> <span class="keyword">char</span> *protocol,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_frame</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> op_and_flags,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="keyword">const</span> <span class="keyword">void</span> *data, <span class="keyword">size_t</span> data_len)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_websocket_framev</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> op_and_flags,</span></span></span><br><span class="line"><span class="params"><span class="function">                              <span class="keyword">const</span> struct mg_str *strings, <span class="keyword">int</span> num_strings)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_printf_websocket_frame</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> op_and_flags,</span></span></span><br><span class="line"><span class="params"><span class="function">                               <span class="keyword">const</span> <span class="keyword">char</span> *fmt, ...)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_url_decode</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *src, <span class="keyword">int</span> src_len, <span class="keyword">char</span> *dst, <span class="keyword">int</span> dst_len,</span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="keyword">int</span> is_form_url_encoded)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">mg_hash_md5_v</span><span class="params">(<span class="keyword">size_t</span> num_msgs, <span class="keyword">const</span> <span class="keyword">uint8_t</span> *msgs[],</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">const</span> <span class="keyword">size_t</span> *msg_lens, <span class="keyword">uint8_t</span> *digest)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">mg_hash_sha1_v</span><span class="params">(<span class="keyword">size_t</span> num_msgs, <span class="keyword">const</span> <span class="keyword">uint8_t</span> *msgs[],</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> <span class="keyword">size_t</span> *msg_lens, <span class="keyword">uint8_t</span> *digest)</span></span>;</span><br></pre></td></tr></table></figure>



<h3 id="HTTP-Serverç«¯API"><a href="#HTTP-Serverç«¯API" class="headerlink" title="HTTP Serverç«¯API"></a>HTTP Serverç«¯API</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_parse_http</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *s, <span class="keyword">int</span> n, struct http_message *hm, <span class="keyword">int</span> is_req)</span></span>;</span><br><span class="line"><span class="comment">/**è§£æhttpæ¶ˆæ¯ï¼Œå¦‚æœis_req=1 æ­¤æ¶ˆæ¯æ˜¯httpè¯·æ±‚ï¼Œis_req=0 æ­¤æ¶ˆæ¯æ˜¯httpå›åº”</span></span><br><span class="line"><span class="comment"> *è¿”å›è§£æçš„å­—èŠ‚æ•° å¦‚æœhttpæ¶ˆæ¯ä¸å®Œæ•´åˆ™è¿”å›0 å¦‚æœè§£æå‡ºé”™ï¼Œåˆ™è¿”å›è´Ÿæ•°*/</span></span><br><span class="line"><span class="function">struct mg_str *<span class="title">mg_get_http_header</span><span class="params">(struct http_message *hm, <span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>;</span><br><span class="line"><span class="comment">/**æœç´¢å¹¶è¿”å›è§£æåçš„httpæ¶ˆæ¯hmä¸­çš„è¡¨å¤´åç§°ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°æ ‡å¤´ï¼Œåˆ™è¿”å›NULL</span></span><br><span class="line"><span class="comment"> *å®ä¾‹ï¼šstruct mg_str *host_hdr = mg_get_http_header(hm, &quot;Host&quot;);*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_http_parse_header</span><span class="params">(struct mg_str *hdr, <span class="keyword">const</span> <span class="keyword">char</span> *var_name, <span class="keyword">char</span> *buf,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="keyword">size_t</span> buf_size)</span></span>;</span><br><span class="line"><span class="comment">/**è§£æhttpå¤´hdr,æŸ¥æ‰¾å˜é‡var_nameå¹¶å°†å…¶å€¼å­˜å‚¨åˆ°bufä¸­ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å˜é‡ï¼Œè¿”å›0å¦åˆ™è¿”å›é0ã€‚æ­¤å‡½æ•°ç”¨äºè§£æcookieséªŒè¯å¤´ç­‰ã€‚å¦‚æœæˆåŠŸåˆ™è¿”å›å˜é‡å€¼çš„é•¿åº¦ï¼Œå¦‚æœbufç¼“å†²åŒºä¸å¤Ÿå¤§ï¼Œæˆ–è€…æ²¡æœ‰æ‰¾åˆ°æ­¤å˜é‡åˆ™è¿”å›0</span></span><br><span class="line"><span class="comment">char user[20];</span></span><br><span class="line"><span class="comment">struct mg_str *hdr = mg_get_http_header(hm, &quot;Authorization&quot;);</span></span><br><span class="line"><span class="comment">mg_http_parse_header(hdr, &quot;username&quot;, user, sizeof(user));</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_get_http_basic_auth</span><span class="params">(struct http_message *hm, <span class="keyword">char</span> *user, <span class="keyword">size_t</span> user_len,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">char</span> *pass, <span class="keyword">size_t</span> pass_len)</span></span>;</span><br><span class="line"><span class="comment">/*è·å–å¹¶è§£ææˆæƒï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°æˆæƒå¤´æˆ–è€…mg_parse_http_basic_authè§£æç»“æœå¤´å¤±è´¥*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_parse_http_basic_auth</span><span class="params">(struct mg_str *hdr, <span class="keyword">char</span> *user, <span class="keyword">size_t</span> user_len,</span></span></span><br><span class="line"><span class="params"><span class="function">                             <span class="keyword">char</span> *pass, <span class="keyword">size_t</span> pass_len)</span></span>;</span><br><span class="line"><span class="comment">/*è§£ææˆæƒ,å¦‚æˆæƒç±»å‹ä¸æ˜¯Basicæˆ–è€…å‡ºç°å…¶ä»–é”™è¯¯(å¦‚ç”¨äºbase64ç¼–ç çš„ç”¨æˆ·å¯†ç ä¸å¯¹)åŸºæœ¬å¤´è¿”å›-1*/</span></span><br><span class="line"><span class="function"><span class="keyword">size_t</span> <span class="title">mg_parse_multipart</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *buf, <span class="keyword">size_t</span> buf_len, <span class="keyword">char</span> *var_name,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">size_t</span> var_name_len, <span class="keyword">char</span> *file_name,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">size_t</span> file_name_len, <span class="keyword">const</span> <span class="keyword">char</span> **chunk,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="keyword">size_t</span> *chunk_len)</span></span>;</span><br><span class="line"><span class="comment">/*è§£æåŒ…å«å¤šéƒ¨åˆ†è¡¨å•æ•°æ®åº“çš„ç¼“å†²åŒºbuf,buf_len,å°†å—åå­˜å‚¨åœ¨var_name,var_name_lenç¼“å†²åŒºä¸­ã€‚å¦‚æœå—æ˜¯ä¸Šä¼ æ–‡ä»¶ï¼Œé‚£ä¹ˆfile_name,file_name_lenå°†ä¼šè¢«ä¸€ä¸ªä¸Šä¼ çš„æ–‡ä»¶åå¡«å……ã€‚chunk,chunk_lenæŒ‡å‘å—æ•°æ®ã€‚è¿”å›è¦è·³åˆ°ä¸‹ä¸€ä¸ªå—çš„å­—èŠ‚æ•°ï¼Œå¦‚æœæ²¡æœ‰æ›´å¤šå—åˆ™è¿”å›0*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_get_http_var</span><span class="params">(<span class="keyword">const</span> struct mg_str *buf, <span class="keyword">const</span> <span class="keyword">char</span> *name, <span class="keyword">char</span> *dst,</span></span></span><br><span class="line"><span class="params"><span class="function">                    <span class="keyword">size_t</span> dst_len)</span></span>;</span><br><span class="line"><span class="comment">/*è·å–Httpè¡¨å•å˜é‡ã€‚ä»bufè·å–å˜é‡åï¼Œåˆ°æŒ‡å®šdstæŒ‡å®šé•¿åº¦dst_lençš„ç¼“å†²åŒºã€‚ç›®çš„åœ°å€æ€»æ˜¯0ç»ˆæ­¢ï¼Œè¿”å›è·å–åˆ°çš„å˜é‡çš„é•¿åº¦ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å˜é‡ï¼Œåˆ™è¿”å›0.bufå¿…é¡»æ˜¯æœ‰æ•ˆçš„urlç¼–ç ç¼“å†²åŒºã€‚å¦‚æœdsté•¿åº¦å¤ªå°æˆ–è€…å‘ç”Ÿé”™è¯¯è¿”å›è´Ÿæ•°*/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ­¤ç»“æ„å®šä¹‰äº†mg_serve_http()çš„å·¥ä½œæ–¹å¼ï¼Œæœ€ä½³æ˜¯è®¾ç½®éœ€è¦çš„ï¼Œå…¶ä½™ä¸ºNULL</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mg_serve_http_opts</span> &#123;</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *document_root;<span class="comment">///webæ ¹ç›®å½•è·¯å¾„</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *index_files;<span class="comment">///ç´¢å¼•æ–‡ä»¶åˆ—è¡¨ï¼Œé»˜è®¤æ˜¯&quot;&quot;</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  per_directory_auth_file =NULLè¡¨ç¤ºç¦ç”¨èº«ä»½éªŒè¯</span></span><br><span class="line"><span class="comment">  per_directory_auth_file =&quot;.htpasswd&quot; è¦ä½¿ç”¨èº«ä»½è®¤è¯æ¥ä¿æŠ¤ç›®å½•ï¼Œç„¶ååœ¨ä»»ä½•ç›®å½•åˆ›å»ºä½¿ç”¨                                 digestè®¤è¯çš„.htpasswdæ–‡ä»¶ã€‚ä½¿ç”¨mongoose webæœåŠ¡å™¨äºŒè¿›åˆ¶æ–‡ä»¶æˆ–                             è€…Apacheçš„htpasswdå®ä¾‹åˆ›å»º/æ“ä½œå¯†ç æ–‡ä»¶</span></span><br><span class="line"><span class="comment">                             ç¡®ä¿auth_domainæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åŸŸ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *per_directory_auth_file;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *auth_domain;<span class="comment">//æˆæƒåŸŸã€‚å³webæœåŠ¡å™¨çš„åŸŸå</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">      global_auth_file = NULL ç¦ç”¨èº«ä»½è®¤è¯</span></span><br><span class="line"><span class="comment">      é€šå¸¸åªä¿æŠ¤document_rootæ ¹ç›®å½•é€‰å®šçš„ç›®å½•ã€‚å¦‚æœå¯¹webæœåŠ¡å™¨çš„æ‰€æœ‰è®¿é—®éƒ½å¿…é¡»ç»è¿‡èº«ä»½éªŒè¯ï¼Œ       ä¸ç®¡URIæ˜¯ä»€ä¹ˆï¼Œå°†æ­¤é€‰é¡¹è®¾ç½®ä¸ºå¯†ç æ–‡ä»¶çš„è·¯å¾„ã€‚æ­¤æ–‡ä»¶çš„æ ¼å¼ä¸.htpasswdçš„æ ¼å¼ä¸€æ ·ï¼Œå¹¶æŠŠæ­¤        æ–‡ä»¶æ”¾åœ¨document_rootæ ¹ç›®å½•ä¹‹å¤–ï¼Œä»¥é˜²ä»–äººè·å–åˆ°æ­¤æ–‡ä»¶</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *global_auth_file;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *enable_directory_listing;<span class="comment">//è®¾ç½®ä¸º&quot;no&quot;ç¦ç”¨ç›®å½•åˆ—è¡¨ï¼Œé»˜è®¤å¯ç”¨</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *ssi_pattern;<span class="comment">///ssiåŒ¹é…æ¨¡å¼  æºç æœ‰è¯¦ç»†ä»‹ç»</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *ip_acl;<span class="comment">///ip_acl=NULLè¡¨ç¤ºæ‰€æœ‰IPéƒ½å¯é“¾æ¥</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> MG_ENABLE_HTTP_URL_REWRITES</span></span><br><span class="line">      <span class="keyword">const</span> <span class="keyword">char</span> *url_rewrites;/æºç æœ‰è¯¦ç»†ä»‹ç»</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *dav_document_root;<span class="comment">///DAVçš„æ ¹ç›®å½•,dav_document_root=NULL åˆ™DAVè¯·æ±‚å¤±è´¥</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *dav_auth_file;<span class="comment">//DAVå¯†ç æ–‡ä»¶ï¼Œdav_auth_file=NULL åˆ™DAVè¯·æ±‚å¤±è´¥ dav_auth_file=&quot;-&quot; ç¦ç”¨DAVé‰´æƒ</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *hidden_file_pattern;<span class="comment">///æ–‡ä»¶éšè—çš„Globæ¨¡å¼</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *cgi_file_pattern;<span class="comment">///cgi_file_pattern != NULL åˆ™ä½¿èƒ½cgiï¼Œå³æ­¤ç›®å½•ä¸‹æ»¡è¶³ **.cgi$|**.php$&quot;éƒ½è§†ä¸ºcgiæ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *cgi_interpreter;<span class="comment">///å¦‚æœä¸æ˜¯NULLï¼Œè¯·å¿½ç•¥CGIè„šæœ¬hashbangå¹¶ä½¿ç”¨è¿™ä¸ªè§£é‡Šå™¨</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *custom_mime_types;</span><br><span class="line"><span class="comment">/*Comma-separated list of Content-Type overrides for path suffixes,&quot;.txt=text/plain; charset=utf-8,.c=text/plain&quot;e.g.*/</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers;<span class="comment">///æ·»åŠ åˆ°æ¯ä¸ªhttpç›¸åº”çš„é¢å¤–çš„header,è¦å¯ç”¨CORSï¼Œè¯·å°†æ­¤è®¾ç½®ä¸º&quot;Access-Control-Allow-Origin: *&quot;ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_serve_http</span><span class="params">(struct mg_connection *nc, struct http_message *hm,</span></span></span><br><span class="line"><span class="params"><span class="function">                   struct mg_serve_http_opts opts)</span></span>;</span><br><span class="line"><span class="comment">/*æ ¹æ®optsçš„å†…å®¹ï¼Œæä¾›ç‰¹å®šçš„httpè¯·æ±‚*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_http_serve_file</span><span class="params">(struct mg_connection *nc, struct http_message *hm,</span></span></span><br><span class="line"><span class="params"><span class="function">                        <span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">const</span> struct mg_str mime_type,</span></span></span><br><span class="line"><span class="params"><span class="function">                        <span class="keyword">const</span> struct mg_str extra_headers)</span></span>;</span><br><span class="line"><span class="comment">/*æä¾›å…·æœ‰ç»™å®šMIMEç±»å‹å’Œå¯é€‰extra_headerså¤´çš„ç‰¹å®šæ–‡ä»¶*/</span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> struct <span class="title">mg_str</span> <span class="params">(*mg_fu_fname_fn)</span><span class="params">(struct mg_connection *nc,</span></span></span><br><span class="line"><span class="params"><span class="function">                                        struct mg_str fname)</span></span>;<span class="comment">///mg_file_upload_handler()çš„å›è°ƒå‡½æ•°åŸå‹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_file_upload_handler</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> ev, <span class="keyword">void</span> *ev_data,</span></span></span><br><span class="line"><span class="params"><span class="function">                            mg_fu_fname_fn local_name_fn</span></span></span><br><span class="line"><span class="params"><span class="function">                                MG_UD_ARG(<span class="keyword">void</span> *user_data))</span></span>;</span><br><span class="line"><span class="comment">/*æ–‡ä»¶ä¸Šä¼ å¤„ç†ç¨‹åºã€‚è¿™ä¸ªå¤„ç†ç¨‹åºå¯ä»¥ç”¨æœ€å°‘çš„ä»£ç å®ç°æ–‡ä»¶ä¸Šä¼ .æ­¤ç¨‹åºå¤„ç†MG_EV_HTTPPARTäº‹ä»¶å¹¶ä¿å­˜æ–‡ä»¶æ•°æ®åˆ°æœ¬åœ°ã€‚local_name_fnå°†ä»¥å®¢æˆ·ç«¯æä¾›çš„åå­—è°ƒç”¨å¹¶ä»¥æœŸæœ›çš„æœ¬åœ°æ–‡ä»¶åç§°æ‰“å¼€ã€‚å¦‚æœè¿”å›NULLå°†ç»ˆæ­¢æ–‡ä»¶ä¸Šä¼ (å®¢æˆ·ç«¯å¾—åˆ°403)ï¼Œå¦‚æœè¿”å›ä¸æ˜¯NULL,è¿”å›çš„å­—ç¬¦ä¸²å¿…é¡»æ˜¯å †åˆ†é…çš„ï¼Œä¸”è°ƒç”¨æ–¹éœ€è¦é‡Šæ”¾è¿™äº›å­—ç¬¦ä¸²ã€‚å¼‚å¸¸æƒ…å†µï¼šè¿”å›å®Œå…¨ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_register_http_endpoint</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *uri_path,</span></span></span><br><span class="line"><span class="params"><span class="function">                               MG_CB(<span class="keyword">mg_event_handler_t</span> handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                     <span class="keyword">void</span> *user_data))</span></span>;</span><br><span class="line"><span class="comment">/*ä¸ºncæ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå¦‚æœæ³¨å†Œäº†å›è°ƒå‡½æ•°ï¼Œå…¶ä¼šè¢«è°ƒç”¨æ¬§å† ï¼Œè€Œä¸æ˜¯è°ƒç”¨mg_bind()ä¸­æä¾›çš„å›è°ƒå‡½æ•°*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mg_http_endpoint_opts</span> &#123;</span></span><br><span class="line">  <span class="keyword">void</span> *user_data;</span><br><span class="line">  <span class="comment">/*æˆæƒåŸŸ (realm) */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *auth_domain;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">char</span> *auth_file;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_register_http_endpoint_opt</span><span class="params">(struct mg_connection *nc,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">const</span> <span class="keyword">char</span> *uri_path,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   <span class="keyword">mg_event_handler_t</span> handler,</span></span></span><br><span class="line"><span class="params"><span class="function">                                   struct mg_http_endpoint_opts opts)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_http_check_digest_auth</span><span class="params">(struct http_message *hm, <span class="keyword">const</span> <span class="keyword">char</span> *auth_domain,</span></span></span><br><span class="line"><span class="params"><span class="function">                              FILE *fp)</span></span>;</span><br><span class="line"><span class="comment">/*æ ¹æ®æ‰“å¼€çš„å¯†ç æ–‡ä»¶éªŒè¯HTTPè¯·æ±‚ã€‚å¦‚æœç»è¿‡èº«ä»½éªŒè¯ï¼Œè¿”å›1ï¼Œå¦åˆ™è¿”å›0*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_check_digest_auth</span><span class="params">(struct mg_str method, struct mg_str uri,</span></span></span><br><span class="line"><span class="params"><span class="function">                         struct mg_str username, struct mg_str cnonce,</span></span></span><br><span class="line"><span class="params"><span class="function">                         struct mg_str response, struct mg_str qop,</span></span></span><br><span class="line"><span class="params"><span class="function">                         struct mg_str nc, struct mg_str nonce,</span></span></span><br><span class="line"><span class="params"><span class="function">                         struct mg_str auth_domain, FILE *fp)</span></span>;</span><br><span class="line"><span class="comment">/*å¯¹æ‰“å¼€çš„å¯†ç æ–‡ä»¶éªŒè¯ç»™å®šçš„å“åº”å‚æ•°ã€‚å¦‚æœç»è¿‡èº«ä»½éªŒè¯ï¼Œè¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚</span></span><br><span class="line"><span class="comment">ç”± mg_http_check_digest_auth().è°ƒç”¨</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_http_chunk</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *buf, <span class="keyword">size_t</span> len)</span></span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ä½¿ç”¨ç»„å—HTTPç¼–ç å‘å®¢æˆ·ç«¯å‘é€å¤§å°ä¸ºlençš„ç¼“å†²åŒºbuf.è¿™ä¸ªå‡½æ•°é¦–å…ˆå°†  å‘é€ç¼“å†²åŒºå¤§å°(16è¿›åˆ¶)+æ¢è¡Œç¬¦+ç¼“å†²åŒº+æ¢è¡Œç¬¦å‘å‡ºã€‚ä¾‹å¦‚ï¼Œmg_send_http_chunk(ncï¼Œâ€œfooâ€ï¼Œ3)å°†æŠŠ &quot;3\r\nfoo\r\n&quot;å­—ç¬¦ä¸²è¿½åŠ åˆ°nc-&gt;send_mbufè¾“å‡ºIOç¼“å†²åŒº</span></span><br><span class="line"><span class="comment">HTTPå¤´â€œä¼ è¾“ç¼–ç :å—åŒ–â€åº”è¯¥åœ¨ä½¿ç”¨æ­¤å‡½æ•°ä¹‹å‰å‘é€</span></span><br><span class="line"><span class="comment">ä¸è¦å¿˜è®°åœ¨å“åº”ç»“æŸæ—¶å‘é€ä¸€ä¸ªç©ºå—ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æ‰€æœ‰å†…å®¹éƒ½å·²å‘é€</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_printf_http_chunk</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *fmt, ...)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€ä¸€ä¸ªprintfæ ¼å¼çš„HTTPå—ã€‚åŠŸèƒ½ç±»ä¼¼äºmg_send_http_chunk()ã€‚*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_response_line</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> status_code,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€å“åº”çŠ¶æ€è¡Œã€‚å¦‚æœextra_headersä¸æ˜¯NULLï¼Œé‚£ä¹ˆextra_headersä¹Ÿä¼šåœ¨å“åº”è¡Œä¹‹åå‘é€ã€‚extra_headersä¸èƒ½ä»¥æ–°è¡Œç»“æŸ*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_http_send_error</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> code, <span class="keyword">const</span> <span class="keyword">char</span> *reason)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€ä¸€ä¸ªé”™è¯¯çš„å›åº”ã€‚å¦‚æœåŸå› ä¸ºç©ºï¼Œæ¶ˆæ¯å°†ä»é”™è¯¯ä»£ç ä¸­æ¨æ–­å‡ºæ¥(å¦‚æœæ”¯æŒçš„è¯)*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_http_send_redirect</span><span class="params">(struct mg_connection *nc, <span class="keyword">int</span> status_code,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> struct mg_str location,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> struct mg_str extra_headers)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€ä¸€ä¸ªé‡å®šå‘å“åº”ã€‚status_codeåº”è¯¥æ˜¯301æˆ–302ï¼Œä½ç½®æŒ‡å‘æ–°ä½ç½®ã€‚å¦‚æœextra_headersä¸æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆextra_headersä¹Ÿä¼šåœ¨å“åº”è¡Œä¹‹åå‘é€ã€‚extra_headersä¸èƒ½ä»¥æ–°è¡Œç»“æŸã€‚*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_send_head</span><span class="params">(struct mg_connection *n, <span class="keyword">int</span> status_code,</span></span></span><br><span class="line"><span class="params"><span class="function">                  <span class="keyword">int64_t</span> content_length, <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€å“åº”è¡Œå’Œæ ‡é¢˜ã€‚è¿™ä¸ªå‡½æ•°ç”¨status_codeå‘é€å“åº”è¡Œï¼Œå¹¶è‡ªåŠ¨å‘é€ä¸€ä¸ªæ ‡é¢˜:&quot;Content-Length&quot;æˆ– &quot;Transfer-Encoding&quot;ã€‚å¦‚æœcontent_lengthä¸ºè´Ÿï¼Œåˆ™å‘é€â€œTransfer-Encoding: chunkedâ€æŠ¥å¤´ï¼Œå¦åˆ™å‘é€â€œContent-Lengthâ€æŠ¥å¤´ã€‚å¦‚æœè½¬æ¢ç¼–ç è¢«åˆ†å‰²ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä½“å¿…é¡»ä½¿ç”¨mg_send_http_chunk()æˆ–mg_printf_http_chunk()å‡½æ•°å‘é€ã€‚å¦åˆ™ï¼Œå¿…é¡»ä½¿ç”¨mg_send()æˆ–mg_printf()ã€‚é¢å¤–çš„æ ‡é¢˜å¯ä»¥é€šè¿‡extra_headersè®¾ç½®ã€‚æ³¨æ„ï¼Œextra_headersä¸èƒ½è¢«ä¸€ä¸ªæ–°çš„è¡Œç»ˆæ­¢*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_printf_html_escape</span><span class="params">(struct mg_connection *nc, <span class="keyword">const</span> <span class="keyword">char</span> *fmt, ...)</span></span>;</span><br><span class="line"><span class="comment">/*å‘é€ä¸€ä¸ªæ‰“å°æ ¼å¼çš„HTTPå—ï¼Œè½¬ä¹‰HTMLæ ‡è®°*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mg_http_reverse_proxy</span><span class="params">(struct mg_connection *nc,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="keyword">const</span> struct http_message *hm, struct mg_str mount,</span></span></span><br><span class="line"><span class="params"><span class="function">                           struct mg_str upstream)</span></span>;</span><br><span class="line"><span class="comment">/*å°†ç»™å®šçš„è¯·æ±‚ä»£ç†ç»™ç»™å®šçš„ä¸Šæ¸¸httpæœåŠ¡å™¨.æŒ‚è½½ä¸­çš„è·¯å¾„å‰ç¼€å°†è¢«å‰¥ç¦»åˆ°ä¸Šæ¸¸æœåŠ¡å™¨è¯·æ±‚çš„è·¯å¾„ï¼Œä¾‹å¦‚å¦‚æœæŒ‚è½½ä¸º/apiï¼Œä¸Šæ¸¸ä¸º http://localhost:8001/foo é‚£ä¹ˆå‘/apiä¼ å…¥çš„è¯·æ±‚å°†ä¼ å…¥åˆ° http://localhost:8001/foo/bar*/</span></span><br></pre></td></tr></table></figure>



<h3 id="HTTP-Clientç«¯API"><a href="#HTTP-Clientç«¯API" class="headerlink" title="HTTP Clientç«¯API"></a>HTTP Clientç«¯API</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function">struct mg_connection *<span class="title">mg_connect_http</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_mgr *mgr,</span></span></span><br><span class="line"><span class="params"><span class="function">    MG_CB(<span class="keyword">mg_event_handler_t</span> event_handler, <span class="keyword">void</span> *user_data), <span class="keyword">const</span> <span class="keyword">char</span> *url,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers, <span class="keyword">const</span> <span class="keyword">char</span> *post_data)</span></span>;</span><br><span class="line"><span class="comment">/*åˆ›å»ºå‡ºç«™HTTPè¿æ¥çš„åŠ©æ‰‹å‡½æ•°</span></span><br><span class="line"><span class="comment">urlæ˜¯è¦è·å–çš„urlã€‚å®ƒå¿…é¡»è¢«æ­£ç¡®åœ°urlç¼–ç ï¼Œä¾‹å¦‚æ²¡æœ‰ç©ºæ ¼ï¼Œç­‰ç­‰.é»˜è®¤æƒ…å†µä¸‹ï¼Œmg_connect_http()å‘é€è¿æ¥å’Œä¸»æœºå¤´</span></span><br><span class="line"><span class="comment">extra_headersæ˜¯ä¸€ä¸ªé¢å¤–çš„HTTPå¤´:&quot;User-Agent: my-app\r\n&quot;</span></span><br><span class="line"><span class="comment">å¦‚æœpost_dataä¸ºç©ºï¼Œåˆ™åˆ›å»ºä¸€ä¸ªGETè¯·æ±‚ã€‚å¦åˆ™ï¼Œå°†ä½¿ç”¨æŒ‡å®šçš„POSTæ•°æ®åˆ›å»ºPOSTè¯·æ±‚ã€‚</span></span><br><span class="line"><span class="comment">æ³¨æ„ï¼Œå¦‚æœè¦æäº¤çš„æ•°æ®æ˜¯è¡¨å•æäº¤ï¼Œé‚£ä¹ˆåº”è¯¥ç›¸åº”åœ°è®¾ç½®Content-TypeæŠ¥å¤´(å‚è§ä¸‹é¢çš„ç¤ºä¾‹)ã€‚</span></span><br><span class="line"><span class="comment">nc1 = mg_connect_http(mgr, ev_handler_1, &quot;http://www.google.com&amp;quot;, NULL,</span></span><br><span class="line"><span class="comment">                        NULL);</span></span><br><span class="line"><span class="comment">nc2 = mg_connect_http(mgr, ev_handler_1, &quot;https://github.com&amp;quot;, NULL, NULL);</span></span><br><span class="line"><span class="comment">nc3 = mg_connect_http(</span></span><br><span class="line"><span class="comment">      mgr, ev_handler_1, &quot;my_server:8000/form_submit/&quot;,</span></span><br><span class="line"><span class="comment">      &quot;Content-Type: application/x-www-form-urlencoded\r\n&quot;,</span></span><br><span class="line"><span class="comment">      &quot;var_1=value_1&amp;var_2=value_2&quot;);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">struct mg_connection *<span class="title">mg_connect_http_opt</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_mgr *mgr, MG_CB(<span class="keyword">mg_event_handler_t</span> ev_handler, <span class="keyword">void</span> *user_data),</span></span></span><br><span class="line"><span class="params"><span class="function">    struct mg_connect_opts opts, <span class="keyword">const</span> <span class="keyword">char</span> *url, <span class="keyword">const</span> <span class="keyword">char</span> *extra_headers,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">char</span> *post_data)</span></span>;</span><br><span class="line"><span class="comment">/*åˆ›å»ºå‡ºç«™HTTPè¿æ¥çš„åŠ©æ‰‹å‡½æ•°.ä¸mg_connect_httpåŸºæœ¬ç›¸åŒï¼Œä½†å…è®¸æä¾›é¢å¤–çš„å‚æ•°(ä¾‹å¦‚SSLå‚æ•°)*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mg_http_create_digest_auth_header</span><span class="params">(<span class="keyword">char</span> *buf, <span class="keyword">size_t</span> buf_len,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="keyword">const</span> <span class="keyword">char</span> *method, <span class="keyword">const</span> <span class="keyword">char</span> *uri,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="keyword">const</span> <span class="keyword">char</span> *auth_domain, <span class="keyword">const</span> <span class="keyword">char</span> *user,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="keyword">const</span> <span class="keyword">char</span> *passwd)</span></span>;</span><br><span class="line"><span class="comment">/*ä¸ºå®¢æˆ·æœºè¯·æ±‚åˆ›å»ºæ‘˜è¦èº«ä»½éªŒè¯å¤´*/</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linuxç½‘ç»œç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>mongoose</tag>
      </tags>
  </entry>
</search>
